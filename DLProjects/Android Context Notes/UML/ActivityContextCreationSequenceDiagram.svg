<?xml version="1.0" encoding="UTF-8" standalone="yes"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="687px" style="width:936px;height:687px;" version="1.1" viewBox="0 0 936 687" width="936px"><defs><filter height="300%" id="f3vql9d" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="170" x="382" y="26.0439">ActivityContext 创建过程</text><rect fill="#FFFFFF" filter="url(#f3vql9d)" height="506.9475" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="168" y="121.1174"/><rect fill="#FFFFFF" filter="url(#f3vql9d)" height="176.5264" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="173" y="301.521"/><rect fill="#FFFFFF" filter="url(#f3vql9d)" height="63.386" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="385" y="198.3806"/><rect fill="#FFFFFF" filter="url(#f3vql9d)" height="108.1404" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="498" y="369.907"/><rect fill="#FFFFFF" filter="url(#f3vql9d)" height="42.7544" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="636" y="514.8018"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="173" x2="173" y1="74.2402" y2="646.8193"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="389.5" x2="389.5" y1="74.2402" y2="646.8193"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="502.5" x2="502.5" y1="74.2402" y2="646.8193"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="641" x2="641" y1="74.2402" y2="646.8193"/><rect fill="#FEFECE" filter="url(#f3vql9d)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="119" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="126" y="59.1641">ActivityThread</text><rect fill="#FEFECE" filter="url(#f3vql9d)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="119" y="645.8193"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="126" y="668.8633">ActivityThread</text><rect fill="#FEFECE" filter="url(#f3vql9d)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="332.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="339.5" y="59.1641">Instrumentation</text><rect fill="#FEFECE" filter="url(#f3vql9d)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="332.5" y="645.8193"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="339.5" y="668.8633">Instrumentation</text><rect fill="#FEFECE" filter="url(#f3vql9d)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="457.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="464.5" y="59.1641">ContextImpl</text><rect fill="#FEFECE" filter="url(#f3vql9d)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="457.5" y="645.8193"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="464.5" y="668.8633">ContextImpl</text><rect fill="#FEFECE" filter="url(#f3vql9d)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="610" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="617" y="59.1641">Activity</text><rect fill="#FEFECE" filter="url(#f3vql9d)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="610" y="645.8193"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="617" y="668.8633">Activity</text><rect fill="#FFFFFF" filter="url(#f3vql9d)" height="506.9475" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="168" y="121.1174"/><rect fill="#FFFFFF" filter="url(#f3vql9d)" height="176.5264" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="173" y="301.521"/><rect fill="#FFFFFF" filter="url(#f3vql9d)" height="63.386" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="385" y="198.3806"/><rect fill="#FFFFFF" filter="url(#f3vql9d)" height="108.1404" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="498" y="369.907"/><rect fill="#FFFFFF" filter="url(#f3vql9d)" height="42.7544" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="636" y="514.8018"/><polygon fill="#A80036" points="156,117.1174,166,121.1174,156,125.1174,160,121.1174" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="162" y1="121.1174" y2="121.1174"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="10" y="117.0154">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="21" y="117.0154">performLaunchActivity()</text><polygon fill="#FBFB77" filter="url(#f3vql9d)" points="183,89.2402,183,134.2402,392,134.2402,392,99.2402,382,89.2402,183,89.2402" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="382" x2="382" y1="89.2402" y2="99.2402"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="392" x2="382" y1="99.2402" y2="99.2402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="189" y="109.1382">在application创建完成之后</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188" x="189" y="126.8926">AMS会调用该函数来创建Activity</text><polygon fill="#A80036" points="373,194.3806,383,198.3806,373,202.3806,377,198.3806" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="379" y1="198.3806" y2="198.3806"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="185" y="194.2786">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="196" y="194.2786">mInstrumentation.newActivity()</text><polygon fill="#FBFB77" filter="url(#f3vql9d)" points="400,148.749,400,229.749,694,229.749,694,158.749,684,148.749,400,148.749" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="684" x2="684" y1="148.749" y2="158.749"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="694" x2="684" y1="158.749" y2="158.749"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="250" x="406" y="168.647">调用该函数创建Activity时，只是利用传入的</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="269" x="406" y="186.4014">ClassLoader和ClassName调用默认的构造函数</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="273" x="406" y="204.1558">创建，所以在这个创建的过程中没有进行任何的</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="406" y="221.9102">初始化操作</text><polygon fill="#A80036" points="189,257.7666,179,261.7666,189,265.7666,185,261.7666" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="183" x2="389" y1="261.7666" y2="261.7666"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="195" y="257.6646">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="206" y="257.6646">activity</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="225" y1="289.2754" y2="289.2754"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="225" x2="225" y1="289.2754" y2="302.2754"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="184" x2="225" y1="302.2754" y2="302.2754"/><polygon fill="#A80036" points="194,298.2754,184,302.2754,194,306.2754,190,302.2754" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="190" y="284.4189">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="201" y="284.4189">createBaseContextForActivity()</text><polygon fill="#A80036" points="486,365.907,496,369.907,486,373.907,490,369.907" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183" x2="492" y1="369.907" y2="369.907"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="190" y="365.8049">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="201" y="365.8049">createActivityContext()</text><polygon fill="#FBFB77" filter="url(#f3vql9d)" points="513,320.2754,513,401.2754,927,401.2754,927,330.2754,917,320.2754,513,320.2754" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="917" x2="917" y1="320.2754" y2="330.2754"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="927" x2="917" y1="330.2754" y2="330.2754"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="290" x="519" y="340.1733">在这里只是简单的调用ContextImpl的构造函数创建</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="298" x="519" y="357.9277">一个ContextImpl对象，和createAppContext()不同的</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="393" x="519" y="375.6821">只是传入的参数而已，所以在这里并没有实现ContextThemeWrapper</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="519" y="393.4365">一些独有的特性，都是后面才加进去的</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="508" x2="550" y1="434.0474" y2="434.0474"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="550" x2="550" y1="434.0474" y2="447.0474"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="509" x2="550" y1="447.0474" y2="447.0474"/><polygon fill="#A80036" points="519,443.0474,509,447.0474,519,451.0474,515,447.0474" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="515" y="429.1909">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="526" y="429.1909">setOuterContext()</text><polygon fill="#A80036" points="189,474.0474,179,478.0474,189,482.0474,185,478.0474" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="183" x2="502" y1="478.0474" y2="478.0474"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="195" y="473.9453">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="206" y="473.9453">appContext</text><polygon fill="#A80036" points="624,510.8018,634,514.8018,624,518.8018,628,514.8018" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="630" y1="514.8018" y2="514.8018"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="185" y="510.6997">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="196" y="510.6997">attach()</text><polygon fill="#FBFB77" filter="url(#f3vql9d)" points="651,491.8018,651,518.8018,889,518.8018,889,501.8018,879,491.8018,651,491.8018" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="879" x2="879" y1="491.8018" y2="501.8018"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="889" x2="879" y1="501.8018" y2="501.8018"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="657" y="511.6997">"init the activity include base context"</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="646" x2="688" y1="557.3105" y2="557.3105"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="688" x2="688" y1="557.3105" y2="570.3105"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="641" x2="688" y1="570.3105" y2="570.3105"/><polygon fill="#A80036" points="651,566.3105,641,570.3105,651,574.3105,647,570.3105" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="653" y="552.4541">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="664" y="552.4541">attachBaseContext()</text><polygon fill="#A80036" points="629,592.3105,639,596.3105,629,600.3105,633,596.3105" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="635" y1="596.3105" y2="596.3105"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="185" y="592.2085">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="203" y="592.2085">初始化主题相关内容</text><polygon fill="#A80036" points="629,624.0649,639,628.0649,629,632.0649,633,628.0649" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="173" x2="635" y1="628.0649" y2="628.0649"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="180" y="623.9629">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="198" y="623.9629">调用生命周期函数</text></g></svg>