<?xml version="1.0" encoding="UTF-8" standalone="yes"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="1195px" style="width:1220px;height:1195px;" version="1.1" viewBox="0 0 1220 1195" width="1220px"><defs><filter height="300%" id="fqa26tf" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="1065.9126" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="58" y="79.1201"/><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="987.7722" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="186" y="147.5061"/><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="861.0002" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="357" y="242.5237"/><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="285.5439" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="466" y="763.4712"/><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="91.2632" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="471" y="803.2256"/><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="334.5439" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="634" y="305.9097"/><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="54.5088" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="634" y="839.98"/><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="203.5264" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="809" y="337.6641"/><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="102.2632" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="814" y="377.4185"/><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="50.1316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="819" y="429.55"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="62.5" x2="62.5" y1="41.1201" y2="1154.0327"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="191" x2="191" y1="41.1201" y2="1154.0327"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="362" x2="362" y1="41.1201" y2="1154.0327"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="471" x2="471" y1="41.1201" y2="1154.0327"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="639" x2="639" y1="41.1201" y2="1154.0327"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="813.5" x2="813.5" y1="41.1201" y2="1154.0327"/><rect fill="#FEFECE" filter="url(#fqa26tf)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="17.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="24.5" y="26.0439">ContextImpl</text><rect fill="#FEFECE" filter="url(#fqa26tf)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="17.5" y="1153.0327"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="24.5" y="1176.0767">ContextImpl</text><rect fill="#FEFECE" filter="url(#fqa26tf)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="146" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="153" y="26.0439">LoadedApk</text><rect fill="#FEFECE" filter="url(#fqa26tf)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="146" y="1153.0327"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="153" y="1176.0767">LoadedApk</text><rect fill="#FEFECE" filter="url(#fqa26tf)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="308" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="315" y="26.0439">ActivityThread</text><rect fill="#FEFECE" filter="url(#fqa26tf)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="308" y="1153.0327"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="315" y="1176.0767">ActivityThread</text><rect fill="#FEFECE" filter="url(#fqa26tf)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="82" x="428" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="435" y="26.0439">Resources</text><rect fill="#FEFECE" filter="url(#fqa26tf)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="82" x="428" y="1153.0327"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="435" y="1176.0767">Resources</text><rect fill="#FEFECE" filter="url(#fqa26tf)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="566" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="573" y="26.0439">AssetManager_Java</text><rect fill="#FEFECE" filter="url(#fqa26tf)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="566" y="1153.0327"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="573" y="1176.0767">AssetManager_Java</text><rect fill="#FEFECE" filter="url(#fqa26tf)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="742.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="749.5" y="26.0439">AssetManager_Cpp</text><rect fill="#FEFECE" filter="url(#fqa26tf)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="742.5" y="1153.0327"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="749.5" y="1176.0767">AssetManager_Cpp</text><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="1065.9126" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="58" y="79.1201"/><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="987.7722" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="186" y="147.5061"/><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="861.0002" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="357" y="242.5237"/><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="285.5439" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="466" y="763.4712"/><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="91.2632" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="471" y="803.2256"/><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="334.5439" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="634" y="305.9097"/><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="54.5088" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="634" y="839.98"/><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="203.5264" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="809" y="337.6641"/><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="102.2632" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="814" y="377.4185"/><rect fill="#FFFFFF" filter="url(#fqa26tf)" height="50.1316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="819" y="429.55"/><polygon fill="#A80036" points="46,75.1201,56,79.1201,46,83.1201,50,79.1201" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="52" y1="79.1201" y2="79.1201"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="10" y="75.0181">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="21" y="75.0181">init()</text><polygon fill="#FBFB77" filter="url(#fqa26tf)" points="73,56.1201,73,83.1201,439,83.1201,439,66.1201,429,56.1201,73,56.1201" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="429" x2="429" y1="56.1201" y2="66.1201"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="439" x2="429" y1="66.1201" y2="66.1201"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="345" x="79" y="76.0181">init的过程会从传入的参数获取到mPackageInfo,mResources</text><polygon fill="#A80036" points="174,143.5061,184,147.5061,174,151.5061,178,147.5061" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="68" x2="180" y1="147.5061" y2="147.5061"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="75" y="143.4041">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="86" y="143.4041">getResources()</text><polygon fill="#FBFB77" filter="url(#fqa26tf)" points="201,97.8745,201,178.8745,477,178.8745,477,107.8745,467,97.8745,201,97.8745" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="97.8745" y2="107.8745"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="477" x2="467" y1="107.8745" y2="107.8745"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="207" y="117.7725">getResources在获取Resources的时候</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="207" y="135.5269">首先会去检查本地变量mResources是否存在</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="207" y="153.2813">如果有则直接返回，否则创建</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="207" y="171.0356">这样可以保证resource的单例</text><polygon fill="#A80036" points="345,238.5237,355,242.5237,345,246.5237,349,242.5237" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="196" x2="351" y1="242.5237" y2="242.5237"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="203" y="238.4216">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="214" y="238.4216">getTopLevelResource()</text><polygon fill="#FBFB77" filter="url(#fqa26tf)" points="372,192.8921,372,273.8921,843,273.8921,843,202.8921,833,192.8921,372,192.8921" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="833" x2="833" y1="192.8921" y2="202.8921"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="843" x2="833" y1="202.8921" y2="202.8921"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="378" y="212.79">本地会有一个</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="450" x="378" y="230.5444">HashMap&lt;ResourcesKey, WeakReference&lt;Resources&gt; &gt; mActiveResources</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="371" x="378" y="248.2988">用来保存已经创建的资源，ResourcesKey可以等同为资源的路径</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="378" y="266.0532">会优先从这个缓存中进行查找，找不到在进行创建</text><polygon fill="#A80036" points="622,301.9097,632,305.9097,622,309.9097,626,305.9097" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="367" x2="628" y1="305.9097" y2="305.9097"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="374" y="301.8076">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="385" y="301.8076">new()</text><polygon fill="#A80036" points="797,333.6641,807,337.6641,797,341.6641,801,337.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="644" x2="803" y1="337.6641" y2="337.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="651" y="333.562">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="662" y="333.562">init()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="819" x2="866" y1="365.1729" y2="365.1729"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="866" x2="866" y1="365.1729" y2="378.1729"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="825" x2="866" y1="378.1729" y2="378.1729"/><polygon fill="#A80036" points="835,374.1729,825,378.1729,835,382.1729,831,378.1729" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="831" y="360.3164">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="842" y="360.3164">new()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="824" x2="871" y1="417.3044" y2="417.3044"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="871" x2="871" y1="417.3044" y2="430.3044"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="830" x2="871" y1="430.3044" y2="430.3044"/><polygon fill="#A80036" points="840,426.3044,830,430.3044,840,434.3044,836,430.3044" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="836" y="412.448">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="847" y="412.448">addDefaultAssets()</text><polygon fill="#FBFB77" filter="url(#fqa26tf)" points="969,396.1729,969,441.1729,1211,441.1729,1211,406.1729,1201,396.1729,969,396.1729" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1201" x2="1201" y1="396.1729" y2="406.1729"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1211" x2="1201" y1="406.1729" y2="406.1729"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="975" y="416.0708">在这里添加的默认路径是系统资源路径</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="975" y="433.8252">/system/framework/framework-res.apk</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="829" x2="871" y1="479.436" y2="479.436"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="871" x2="871" y1="479.436" y2="492.436"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="824" x2="871" y1="492.436" y2="492.436"/><polygon fill="#A80036" points="834,488.436,824,492.436,834,496.436,830,492.436" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="836" y="474.5796">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="847" y="474.5796">addAssetPath</text><polygon fill="#A80036" points="655,537.1904,645,541.1904,655,545.1904,651,541.1904" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="649" x2="813" y1="541.1904" y2="541.1904"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="661" y="537.0884">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="672" y="537.0884">AssetManager_Cpp</text><polygon fill="#FBFB77" filter="url(#fqa26tf)" points="824,500.436,824,563.436,1117,563.436,1117,510.436,1107,500.436,824,500.436" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1107" x2="1107" y1="500.436" y2="510.436"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1117" x2="1107" y1="510.436" y2="510.436"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="830" y="520.334">创建并初始化的C++层AssetMnagager会保存在</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="269" x="830" y="538.0884">AssetManager_Java中的mObject对象中用于后</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="830" y="555.8428">续的JNI调用</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="644" x2="686" y1="596.4536" y2="596.4536"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="686" x2="686" y1="596.4536" y2="609.4536"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="645" x2="686" y1="609.4536" y2="609.4536"/><polygon fill="#A80036" points="655,605.4536,645,609.4536,655,613.4536,651,609.4536" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="651" y="591.5972">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="669" y="591.5972">ensureSystemAssets()</text><polygon fill="#FBFB77" filter="url(#fqa26tf)" points="814,579.1992,814,606.1992,1101,606.1992,1101,589.1992,1091,579.1992,814,579.1992" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1091" x2="1091" y1="579.1992" y2="589.1992"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1101" x2="1091" y1="589.1992" y2="589.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="266" x="820" y="599.0972">创建一个新的AssetManager并且添加资源路径</text><polygon fill="#A80036" points="378,636.4536,368,640.4536,378,644.4536,374,640.4536" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="372" x2="638" y1="640.4536" y2="640.4536"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="384" y="636.3516">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="402" y="636.3516">assets</text><polygon fill="#A80036" points="627,668.208,637,672.208,627,676.208,631,672.208" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="367" x2="633" y1="672.208" y2="672.208"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="374" y="668.106">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="392" y="668.106">addAssetPath()</text><polygon fill="#A80036" points="802,713.8396,812,717.8396,802,721.8396,806,717.8396" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="639" x2="808" y1="717.8396" y2="717.8396"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="646" y="713.7375">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="664" y="713.7375">addAssetPath()</text><polygon fill="#FBFB77" filter="url(#fqa26tf)" points="819,685.9624,819,730.9624,1108,730.9624,1108,695.9624,1098,685.9624,819,685.9624" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1098" x2="1098" y1="685.9624" y2="695.9624"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1108" x2="1098" y1="695.9624" y2="695.9624"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="825" y="705.8604">在这个地方出入apk的路径从而保证可以正确的</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="825" y="723.6147">找到需要的资源</text><polygon fill="#A80036" points="454,759.4712,464,763.4712,454,767.4712,458,763.4712" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="367" x2="460" y1="763.4712" y2="763.4712"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="374" y="759.3691">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="392" y="759.3691">new()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="476" x2="523" y1="790.98" y2="790.98"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="523" x2="523" y1="790.98" y2="803.98"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="482" x2="523" y1="803.98" y2="803.98"/><polygon fill="#A80036" points="492,799.98,482,803.98,492,807.98,488,803.98" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="488" y="786.1235">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="506" y="786.1235">updateConfiguration()</text><polygon fill="#A80036" points="622,835.98,632,839.98,622,843.98,626,839.98" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="481" x2="628" y1="839.98" y2="839.98"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="488" y="835.8779">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="506" y="835.8779">setConfiguration()</text><polygon fill="#A80036" points="802,890.4888,812,894.4888,802,898.4888,806,894.4888" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="639" x2="808" y1="894.4888" y2="894.4888"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="646" y="890.3867">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="664" y="890.3867">setConfiguration()</text><polygon fill="#FBFB77" filter="url(#fqa26tf)" points="819,853.7344,819,916.7344,1139,916.7344,1139,863.7344,1129,853.7344,819,853.7344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1129" x2="1129" y1="853.7344" y2="863.7344"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1139" x2="1129" y1="863.7344" y2="863.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="285" x="825" y="873.6323">在这个地方最后会调用C++的代码进行配置的保存</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="278" x="825" y="891.3867">主要的保存内容在Configuration和DisplayMatrics</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="299" x="825" y="909.1411">从而可以根据当前设备的配置信息获取到正确的资源</text><polygon fill="#A80036" points="627,967.752,637,971.752,627,975.752,631,971.752" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="476" x2="633" y1="971.752" y2="971.752"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="483" y="967.6499">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="501" y="967.6499">ensureStringBlocks()</text><polygon fill="#FBFB77" filter="url(#fqa26tf)" points="644,930.9976,644,993.9976,951,993.9976,951,940.9976,941,930.9976,644,930.9976" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="941" x2="941" y1="930.9976" y2="940.9976"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="951" x2="941" y1="940.9976" y2="940.9976"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="650" y="950.8955">在这个函数里面回去确保应用字符串资源池的创建</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="650" y="968.6499">创建的过程首先是去复制系统原有的资源的字符串</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="650" y="986.4043">资源池，之后才是去加载应用本身的字符串资源池</text><polygon fill="#A80036" points="378,1045.0151,368,1049.0151,378,1053.0151,374,1049.0151" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="372" x2="470" y1="1049.0151" y2="1049.0151"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="384" y="1044.9131">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="402" y="1044.9131">resources</text><polygon fill="#FBFB77" filter="url(#fqa26tf)" points="481,1008.2607,481,1071.2607,736,1071.2607,736,1018.2607,726,1008.2607,481,1008.2607" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="726" x2="726" y1="1008.2607" y2="1018.2607"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="736" x2="726" y1="1018.2607" y2="1018.2607"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="487" y="1028.1587">resources创建完成之后</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="487" y="1045.9131">通过一段线程安全的代码将其添加到缓存</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="487" y="1063.6675">最后再进行返回</text><polygon fill="#A80036" points="207,1099.5239,197,1103.5239,207,1107.5239,203,1103.5239" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="201" x2="361" y1="1103.5239" y2="1103.5239"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="213" y="1099.4219">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="231" y="1099.4219">resources</text><polygon fill="#A80036" points="79,1131.2783,69,1135.2783,79,1139.2783,75,1135.2783" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="73" x2="190" y1="1135.2783" y2="1135.2783"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="85" y="1131.1763">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="103" y="1131.1763">resources</text></g></svg>