<!DOCTYPE html> <html> <head> <title>Presentation</title> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0">  <style> .markdown-preview-enhanced pre, .markdown-preview-enhanced .host { color: rgb(173, 174, 175); background-color: rgb(45, 46, 47); }
.markdown-preview-enhanced pre .line.cursor-line, .markdown-preview-enhanced .host .line.cursor-line { background-color: rgba(61, 62, 63, 0.258824); }
.markdown-preview-enhanced pre .invisible, .markdown-preview-enhanced .host .invisible { color: rgb(173, 174, 175); }
.markdown-preview-enhanced pre .cursor, .markdown-preview-enhanced .host .cursor { border-color: rgb(108, 156, 186); border-left-width: 2px; }
.markdown-preview-enhanced pre .selection .region, .markdown-preview-enhanced .host .selection .region { background-color: rgb(61, 62, 63); }
.markdown-preview-enhanced pre .bracket-matcher .region, .markdown-preview-enhanced .host .bracket-matcher .region { border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(108, 156, 186); }
.markdown-preview-enhanced pre .invisible-character, .markdown-preview-enhanced .host .invisible-character { color: rgba(125, 126, 127, 0.247059); -webkit-font-smoothing: antialiased; }
.markdown-preview-enhanced pre .indent-guide, .markdown-preview-enhanced .host .indent-guide { color: rgb(61, 62, 63); }
.markdown-preview-enhanced pre .wrap-guide, .markdown-preview-enhanced .host .wrap-guide { background-color: rgb(61, 62, 63); }
.markdown-preview-enhanced pre .find-result .region.region.region, .markdown-preview-enhanced .host .find-result .region.region.region, .markdown-preview-enhanced pre .current-result .region.region.region, .markdown-preview-enhanced .host .current-result .region.region.region { border-radius: 0px; transition: border-color 0.4s; background-color: rgba(108, 156, 186, 0.156863); }
.markdown-preview-enhanced pre .find-result .region.region.region, .markdown-preview-enhanced .host .find-result .region.region.region { border: 2px solid transparent; }
.markdown-preview-enhanced pre .current-result .region.region.region, .markdown-preview-enhanced .host .current-result .region.region.region { border: 2px solid rgb(108, 156, 186); transition-duration: 0.1s; }
.markdown-preview-enhanced pre .gutter .line-number, .markdown-preview-enhanced .host .gutter .line-number { color: rgb(125, 126, 127); -webkit-font-smoothing: antialiased; }
.markdown-preview-enhanced pre .gutter .line-number.git-line-removed::before, .markdown-preview-enhanced .host .gutter .line-number.git-line-removed::before { bottom: -3px; }
.markdown-preview-enhanced pre .gutter .line-number.git-line-removed::after, .markdown-preview-enhanced .host .gutter .line-number.git-line-removed::after { content: ""; position: absolute; left: 0px; bottom: 0px; width: 25px; border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgba(157, 105, 54, 0.498039); pointer-events: none; }
.markdown-preview-enhanced pre .gutter .line-number.cursor-line, .markdown-preview-enhanced .host .gutter .line-number.cursor-line { color: rgb(108, 156, 186); background-color: rgb(61, 62, 63); }
.markdown-preview-enhanced pre .gutter .line-number.cursor-line-no-selection, .markdown-preview-enhanced .host .gutter .line-number.cursor-line-no-selection { background-color: transparent; }
.markdown-preview-enhanced pre .gutter .line-number .icon-right, .markdown-preview-enhanced .host .gutter .line-number .icon-right { color: rgb(173, 174, 175); }
.markdown-preview-enhanced pre .gutter .line-number.folded, .markdown-preview-enhanced .host .gutter .line-number.folded, .markdown-preview-enhanced pre .gutter .line-number::after, .markdown-preview-enhanced .host .gutter .line-number::after, .markdown-preview-enhanced pre .fold-marker::after, .markdown-preview-enhanced .host .fold-marker::after { color: rgb(108, 156, 186); }
.markdown-preview-enhanced { font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 1.6; color: rgb(173, 174, 175); overflow: initial; margin: 10px 13px; padding: 2em; box-sizing: border-box; word-wrap: break-word; background-color: rgb(45, 46, 47); }
.markdown-preview-enhanced[data-use-github-style] { color: rgb(51, 51, 51); background-color: rgb(255, 255, 255); }
.markdown-preview-enhanced > :first-child { margin-top: 0px; }
.markdown-preview-enhanced[is="space-pen-div"] { width: 100%; margin: 0px; z-index: 999; overflow: scroll; font-size: 16px; display: block; position: absolute; }
.markdown-preview-enhanced[is="space-pen-div"][data-use-github-style] { }
.markdown-preview-enhanced[is="space-pen-div"][data-use-github-style] ::-webkit-scrollbar-track { box-shadow: rgba(218, 218, 218, 0.6) 0px 0px 3px inset; background-color: rgb(244, 244, 244); }
.markdown-preview-enhanced[is="space-pen-div"][data-use-github-style] ::-webkit-scrollbar-thumb { border-radius: 10px; border-color: transparent; background-color: rgb(204, 204, 204); }
.markdown-preview-enhanced h1, .markdown-preview-enhanced h2, .markdown-preview-enhanced h3, .markdown-preview-enhanced h4, .markdown-preview-enhanced h5, .markdown-preview-enhanced h6 { line-height: 1.2; margin-top: 1em; margin-bottom: 16px; color: rgb(255, 255, 255); }
.markdown-preview-enhanced[data-use-github-style] h1, .markdown-preview-enhanced[data-use-github-style] h2, .markdown-preview-enhanced[data-use-github-style] h3, .markdown-preview-enhanced[data-use-github-style] h4, .markdown-preview-enhanced[data-use-github-style] h5, .markdown-preview-enhanced[data-use-github-style] h6 { color: rgb(51, 51, 51); }
.markdown-preview-enhanced h1 { font-size: 2.4em; font-weight: 300; padding-bottom: 0.3em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(85, 87, 89); }
.markdown-preview-enhanced h2 { font-size: 1.8em; font-weight: 400; padding-bottom: 0.3em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(85, 87, 89); }
.markdown-preview-enhanced h3 { font-size: 1.5em; font-weight: 500; }
.markdown-preview-enhanced h4 { font-size: 1.2em; font-weight: 600; }
.markdown-preview-enhanced h5 { font-size: 1.1em; font-weight: 600; }
.markdown-preview-enhanced h6 { font-size: 1em; font-weight: 600; }
.markdown-preview-enhanced[data-use-github-style] h1, .markdown-preview-enhanced[data-use-github-style] h2 { border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(231, 231, 231); }
.markdown-preview-enhanced strong { color: rgb(255, 255, 255); }
.markdown-preview-enhanced[data-use-github-style] strong { color: rgb(51, 51, 51); }
.markdown-preview-enhanced del { color: rgb(214, 215, 215); }
.markdown-preview-enhanced a:not([href]) { color: inherit; text-decoration: none; }
.markdown-preview-enhanced a { color: rgb(0, 136, 204); text-decoration: none; }
.markdown-preview-enhanced a:hover { color: rgb(0, 80, 163); text-decoration: none; }
.markdown-preview-enhanced img { max-width: 100%; }
.markdown-preview-enhanced > p { margin-top: 0px; margin-bottom: 16px; word-wrap: break-word; }
.markdown-preview-enhanced > ul, .markdown-preview-enhanced > ol { margin-bottom: 16px; }
.markdown-preview-enhanced ul, .markdown-preview-enhanced ol { padding-left: 2em; }
.markdown-preview-enhanced ul.no-list, .markdown-preview-enhanced ol.no-list { padding: 0px; list-style-type: none; }
.markdown-preview-enhanced ul ul, .markdown-preview-enhanced ul ol, .markdown-preview-enhanced ol ol, .markdown-preview-enhanced ol ul { margin-top: 0px; margin-bottom: 0px; }
.markdown-preview-enhanced li { margin-bottom: 0px; }
.markdown-preview-enhanced li.task-list-item { list-style: none; }
.markdown-preview-enhanced li > p { margin-top: 0px; margin-bottom: 0px; }
.markdown-preview-enhanced .task-list-item-checkbox { margin: 0px 0.2em 0.25em -1.6em; vertical-align: middle; }
.markdown-preview-enhanced .task-list-item-checkbox:hover { cursor: pointer; }
.markdown-preview-enhanced blockquote { margin: 16px 0px; font-size: inherit; padding: 0px 15px; color: rgb(214, 215, 215); border-left-width: 4px; border-left-style: solid; border-left-color: rgb(85, 87, 89); }
.markdown-preview-enhanced blockquote > :first-child { margin-top: 0px; }
.markdown-preview-enhanced blockquote > :last-child { margin-bottom: 0px; }
.markdown-preview-enhanced[data-use-github-style] blockquote { color: rgb(119, 119, 119); border-left-width: 4px; border-left-style: solid; border-left-color: rgb(221, 221, 221); }
.markdown-preview-enhanced hr { height: 4px; margin: 32px 0px; border: 0px none; background-color: rgb(85, 87, 89); }
.markdown-preview-enhanced[data-use-github-style] hr { background-color: rgb(231, 231, 231); }
.markdown-preview-enhanced table { margin: 10px 0px 15px; border-collapse: collapse; border-spacing: 0px; display: block; width: 100%; overflow: auto; word-break: keep-all; }
.markdown-preview-enhanced table th { font-weight: bold; color: rgb(255, 255, 255); }
.markdown-preview-enhanced table td, .markdown-preview-enhanced table th { border: 1px solid rgb(85, 87, 89); padding: 6px 13px; }
.markdown-preview-enhanced[data-use-github-style] th { color: rgb(51, 51, 51); }
.markdown-preview-enhanced[data-use-github-style] td, .markdown-preview-enhanced[data-use-github-style] th { border: 1px solid rgb(221, 221, 221); }
.markdown-preview-enhanced dl { padding: 0px; }
.markdown-preview-enhanced dl dt { padding: 0px; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: bold; }
.markdown-preview-enhanced dl dd { padding: 0px 16px; margin-bottom: 16px; }
.markdown-preview-enhanced code { font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; color: rgb(255, 255, 255); font-size: 0.85em !important; background-color: rgb(65, 66, 68); }
.markdown-preview-enhanced[data-use-github-style] code { color: inherit; background-color: rgba(0, 0, 0, 0.0392157); }
.markdown-preview-enhanced pre > code { padding: 0px; margin: 0px; word-break: normal; white-space: pre; border: 0px; font-size: 0.85em !important; background: transparent; }
.markdown-preview-enhanced .highlight { margin-bottom: 16px; }
.markdown-preview-enhanced .highlight pre, .markdown-preview-enhanced pre { font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 16px; overflow: auto; line-height: 1.45; color: rgb(173, 174, 175); border: rgb(85, 87, 89); border-radius: 3px; font-size: 0.85em !important; background-color: rgb(55, 56, 57); }
.markdown-preview-enhanced .highlight pre { margin-bottom: 0px; word-break: normal; }
.markdown-preview-enhanced pre { word-wrap: break-word; white-space: normal; word-break: break-all; }
.markdown-preview-enhanced pre .section { opacity: 1; }
.markdown-preview-enhanced pre code, .markdown-preview-enhanced pre tt { display: inline; max-width: initial; padding: 0px; margin: 0px; overflow: initial; line-height: inherit; word-wrap: normal; border: 0px; background-color: transparent; }
.markdown-preview-enhanced pre code::before, .markdown-preview-enhanced pre tt::before, .markdown-preview-enhanced pre code::after, .markdown-preview-enhanced pre tt::after { content: normal; }
.markdown-preview-enhanced p, .markdown-preview-enhanced blockquote, .markdown-preview-enhanced ul, .markdown-preview-enhanced ol, .markdown-preview-enhanced dl, .markdown-preview-enhanced pre { margin-top: 0px; margin-bottom: 16px; }
.markdown-preview-enhanced pre.editor-colors { margin: 16px 0px; padding: 1em; font-size: 0.92em; border-radius: 3px; background-color: rgb(55, 56, 57); }
.markdown-preview-enhanced kbd { color: rgb(255, 255, 255); border-width: 1px 1px 2px; border-style: solid; border-color: rgb(85, 87, 89) rgb(85, 87, 89) rgb(70, 72, 73); background-color: rgb(65, 66, 68); }
.markdown-preview-enhanced[data-use-github-style] kbd { color: rgb(51, 51, 51); border-style: solid; border-width: 1px; border-color: rgb(204, 204, 204) rgb(204, 204, 204) rgb(187, 187, 187); border-radius: 3px; box-shadow: rgb(187, 187, 187) 0px -1px 0px inset; background-color: rgb(252, 252, 252); }
.markdown-preview-enhanced .pagebreak, .markdown-preview-enhanced .newpage { page-break-before: always; }
@media screen and (min-width: 914px) { 
  .markdown-preview-enhanced { width: 854px; margin: 10px auto; background: rgb(45, 46, 47); }
}
@media screen and (max-width: 400px) { 
  .markdown-preview-enhanced { font-size: 14px; }
}
@media screen and (min-width: 914px) { 
  .markdown-preview-enhanced[data-use-github-style] { background: rgb(255, 255, 255); }
}
@media print { 
  .markdown-preview-enhanced { background-color: rgb(45, 46, 47); }
  .markdown-preview-enhanced h1, .markdown-preview-enhanced h2, .markdown-preview-enhanced h3, .markdown-preview-enhanced h4, .markdown-preview-enhanced h5, .markdown-preview-enhanced h6 { color: rgb(255, 255, 255); page-break-after: avoid; }
  .markdown-preview-enhanced blockquote { color: rgb(214, 215, 215); }
  .markdown-preview-enhanced table, .markdown-preview-enhanced pre { page-break-inside: avoid; }
  .markdown-preview-enhanced table { display: table; }
  .markdown-preview-enhanced img { display: block; max-width: 100%; max-height: 100%; }
  .markdown-preview-enhanced pre, .markdown-preview-enhanced code { word-wrap: break-word; white-space: normal; }
}
@media print { 
  .markdown-preview-enhanced[data-use-github-style] { background-color: rgb(255, 255, 255); }
  .markdown-preview-enhanced[data-use-github-style] h1, .markdown-preview-enhanced[data-use-github-style] h2, .markdown-preview-enhanced[data-use-github-style] h3, .markdown-preview-enhanced[data-use-github-style] h4, .markdown-preview-enhanced[data-use-github-style] h5, .markdown-preview-enhanced[data-use-github-style] h6 { color: rgb(34, 34, 34); }
  .markdown-preview-enhanced[data-use-github-style] blockquote { color: rgb(119, 119, 119); }
  .markdown-preview-enhanced[data-use-github-style] pre { border: 2px solid rgb(246, 246, 246); }
}
.markdown-preview-enhanced .mermaid { margin-bottom: 16px; }
.markdown-preview-enhanced .mermaid .edgePath .path { stroke: rgb(255, 255, 255); }
.markdown-preview-enhanced .mermaid .edgePath marker path { fill: rgb(255, 255, 255) !important; opacity: 1 !important; }
.markdown-preview-enhanced .mermaid line, .markdown-preview-enhanced .mermaid marker { stroke: rgb(255, 255, 255) !important; opacity: 1 !important; }
.markdown-preview-enhanced .mermaid .messageText { fill: rgb(255, 255, 255); }
.markdown-preview-enhanced[data-use-github-style] .mermaid .edgePath .path { stroke: rgb(51, 51, 51); }
.markdown-preview-enhanced[data-use-github-style] .mermaid marker path { fill: rgb(51, 51, 51) !important; opacity: 1 !important; }
.markdown-preview-enhanced[data-use-github-style] line, .markdown-preview-enhanced[data-use-github-style] marker { stroke: rgb(51, 51, 51) !important; opacity: 1 !important; }
.markdown-preview-enhanced[data-use-github-style] .messageText { fill: rgb(51, 51, 51); }
.markdown-preview-enhanced[is="space-pen-div"] .erd { overflow-x: auto; }
.markdown-preview-enhanced[is="space-pen-div"] .code-chunk { position: relative; }
.markdown-preview-enhanced[is="space-pen-div"] .code-chunk.hide-chunk { display: block !important; }
.markdown-preview-enhanced[is="space-pen-div"] .code-chunk:hover .run-all-btn { display: block !important; }
.markdown-preview-enhanced[is="space-pen-div"] .code-chunk:hover .btn-group { opacity: 1; }
.markdown-preview-enhanced[is="space-pen-div"] .code-chunk .btn-group { position: absolute; right: 0px; top: 0px; padding: 4px; opacity: 0.4; }
.markdown-preview-enhanced[is="space-pen-div"] .code-chunk .btn-group .btn { text-align: center; color: rgb(255, 255, 255); float: right; margin-left: 2px; border-radius: 4px; border-style: none; font-size: 0.8em; background-image: none; background-color: rgb(147, 187, 124); }
.markdown-preview-enhanced[is="space-pen-div"] .code-chunk .btn-group .btn:hover { cursor: pointer; background-color: rgb(119, 170, 90); }
.markdown-preview-enhanced[is="space-pen-div"] .code-chunk .btn-group .btn.run-btn { display: block !important; }
.markdown-preview-enhanced[is="space-pen-div"] .code-chunk.running .run-btn span { display: none; }
.markdown-preview-enhanced[is="space-pen-div"] .code-chunk.running .run-btn::after { content: "ᕕ(╯°□°)ᕗ"; }
.markdown-preview-enhanced[is="space-pen-div"] .code-chunk.running .run-btn:hover { cursor: not-allowed; }
.markdown-preview-enhanced[is="space-pen-div"] .code-chunk .output-div { overflow-x: auto; margin-bottom: 16px; }
.markdown-preview-enhanced[is="space-pen-div"] .code-chunk pre { cursor: text; }
.markdown-preview-enhanced:not([is="space-pen-div"]) .code-chunk.hide-chunk pre.editor-colors, .markdown-preview-enhanced:not([is="space-pen-div"]) .code-chunk.hide-chunk .btn-group { display: none; }
.markdown-preview-enhanced:not([is="space-pen-div"]) .code-chunk.hide-chunk .output-div { display: block; }
.markdown-preview-enhanced .github-syntax-theme pre.editor-colors, .markdown-preview-enhanced .github-syntax-theme .host { color: rgb(51, 51, 51); background-color: rgb(247, 247, 247); }
.markdown-preview-enhanced .github-syntax-theme pre { color: rgb(51, 51, 51); background-color: rgb(247, 247, 247); }
.markdown-preview-enhanced .github-syntax-theme pre.editor-colors .gutter, .markdown-preview-enhanced .github-syntax-theme .host .gutter { color: rgb(179, 179, 179); background-color: rgb(255, 255, 255); }
.markdown-preview-enhanced .github-syntax-theme pre.editor-colors .gutter .line-number.cursor-line, .markdown-preview-enhanced .github-syntax-theme .host .gutter .line-number.cursor-line { color: rgb(77, 77, 77); background-color: rgb(245, 245, 245); }
.markdown-preview-enhanced .github-syntax-theme pre.editor-colors .gutter .line-number.cursor-line-no-selection, .markdown-preview-enhanced .github-syntax-theme .host .gutter .line-number.cursor-line-no-selection { color: rgb(77, 77, 77); }
.markdown-preview-enhanced .github-syntax-theme pre.editor-colors .wrap-guide, .markdown-preview-enhanced .github-syntax-theme .host .wrap-guide { color: rgb(223, 223, 223); }
.markdown-preview-enhanced .github-syntax-theme pre.editor-colors .indent-guide, .markdown-preview-enhanced .github-syntax-theme .host .indent-guide { color: rgb(223, 223, 223); }
.markdown-preview-enhanced .github-syntax-theme pre.editor-colors .invisible-character, .markdown-preview-enhanced .github-syntax-theme .host .invisible-character { color: rgb(223, 223, 223); }
.markdown-preview-enhanced .github-syntax-theme pre.editor-colors .search-results .marker .region, .markdown-preview-enhanced .github-syntax-theme .host .search-results .marker .region { border: rgb(0, 0, 0); background-color: transparent; }
.markdown-preview-enhanced .github-syntax-theme pre.editor-colors .search-results .marker.current-result .region, .markdown-preview-enhanced .github-syntax-theme .host .search-results .marker.current-result .region { border: rgb(0, 0, 0); }
.markdown-preview-enhanced .github-syntax-theme pre.editor-colors.is-focused .cursor, .markdown-preview-enhanced .github-syntax-theme .host(.is-focused) .cursor { border-color: rgb(0, 0, 0); }
.markdown-preview-enhanced .github-syntax-theme pre.editor-colors.is-focused .selection .region, .markdown-preview-enhanced .github-syntax-theme .host(.is-focused) .selection .region { background-color: rgba(178, 215, 255, 0.4); }
.markdown-preview-enhanced .github-syntax-theme pre.editor-colors.is-focused .line-number.cursor-line-no-selection, .markdown-preview-enhanced .github-syntax-theme pre.editor-colors.is-focused .line.cursor-line, .markdown-preview-enhanced .github-syntax-theme .host(.is-focused) .line-number.cursor-line-no-selection, .markdown-preview-enhanced .github-syntax-theme .host(.is-focused) .line.cursor-line { background-color: rgba(240, 240, 240, 0.498039); }
.markdown-preview-enhanced .github-syntax-theme .comment, .markdown-preview-enhanced .github-syntax-theme .punctuation.comment { color: rgb(176, 176, 176); }
.markdown-preview-enhanced .github-syntax-theme .string, .markdown-preview-enhanced .github-syntax-theme .string .constant.character.escape { color: rgb(34, 115, 195); }
.markdown-preview-enhanced .github-syntax-theme .constant.numeric { color: rgb(0, 153, 204); }
.markdown-preview-enhanced .github-syntax-theme .constant.language { color: rgb(0, 153, 204); }
.markdown-preview-enhanced .github-syntax-theme .constant.character, .markdown-preview-enhanced .github-syntax-theme .constant.other.rgb-value { color: rgb(0, 153, 204); }
.markdown-preview-enhanced .github-syntax-theme .constant.numeric.line-number.find-in-files, .markdown-preview-enhanced .github-syntax-theme .constant.numeric.line-number.match.find-in-files { color: rgb(171, 176, 179); }
.markdown-preview-enhanced .github-syntax-theme .entity.name.class { color: rgb(0, 153, 204); }
.markdown-preview-enhanced .github-syntax-theme .entity.other.inherited-class { color: rgb(0, 153, 204); }
.markdown-preview-enhanced .github-syntax-theme .meta.tag.any.html, .markdown-preview-enhanced .github-syntax-theme .meta.tag.block.any.html { color: rgb(171, 176, 179); }
.markdown-preview-enhanced .github-syntax-theme .entity.name.tag { color: rgb(99, 163, 92); }
.markdown-preview-enhanced .github-syntax-theme .entity.name.function { color: rgb(133, 103, 181); }
.markdown-preview-enhanced .github-syntax-theme .entity.other.attribute-name, .markdown-preview-enhanced .github-syntax-theme .entity.other.attribute-name .punctuation.definition.entity.scss, .markdown-preview-enhanced .github-syntax-theme .entity.other.attribute-name.id.css, .markdown-preview-enhanced .github-syntax-theme .entity.other.attribute-name.id.css .punctuation.definition.entity.css, .markdown-preview-enhanced .github-syntax-theme .entity.other.attribute-name.class.css .punctuation.definition.entity.css { color: rgb(133, 103, 181); }
.markdown-preview-enhanced .github-syntax-theme .punctuation.definition.tag.begin.html, .markdown-preview-enhanced .github-syntax-theme .punctuation.definition.tag.end.html, .markdown-preview-enhanced .github-syntax-theme .punctuation.definition.tag.html, .markdown-preview-enhanced .github-syntax-theme .meta.tag.block.any.html { color: rgb(51, 51, 51); }
.markdown-preview-enhanced .github-syntax-theme .keyword.control { color: rgb(173, 28, 93); }
.markdown-preview-enhanced .github-syntax-theme .keyword.operator { color: rgb(133, 103, 181); }
.markdown-preview-enhanced .github-syntax-theme .storage { color: rgb(173, 28, 93); }
.markdown-preview-enhanced .github-syntax-theme .storage.type { color: rgb(173, 28, 93); }
.markdown-preview-enhanced .github-syntax-theme .support.function { color: rgb(0, 153, 204); }
.markdown-preview-enhanced .github-syntax-theme .support.constant { color: rgb(0, 153, 204); }
.markdown-preview-enhanced .github-syntax-theme .support.type, .markdown-preview-enhanced .github-syntax-theme .support.class, .markdown-preview-enhanced .github-syntax-theme .meta.property-name.scss { color: rgb(0, 153, 204); }
.markdown-preview-enhanced .github-syntax-theme .support.other.variable { color: rgb(0, 0, 0); }
.markdown-preview-enhanced .github-syntax-theme .invalid, .markdown-preview-enhanced .github-syntax-theme .invalid.illegal { color: rgb(248, 248, 248); background-color: rgb(181, 42, 29); }
.markdown-preview-enhanced .github-syntax-theme .invalid.deprecated { color: rgb(181, 42, 29); background-color: rgb(255, 255, 255); }
.markdown-preview-enhanced .github-syntax-theme .entity.name.filename.find-in-files { color: rgb(0, 0, 0); }
.markdown-preview-enhanced .github-syntax-theme .source.css .punctuation.definition.entity, .markdown-preview-enhanced .github-syntax-theme .punctuation.terminator.rule.scss { color: rgb(0, 0, 0); }
.markdown-preview-enhanced .github-syntax-theme .source.css .entity.other.attribute-name.pseudo-class, .markdown-preview-enhanced .github-syntax-theme .source.css .entity.other.attribute-name.pseudo-element { color: rgb(173, 28, 93); }
.markdown-preview-enhanced .github-syntax-theme .source.css .meta.value, .markdown-preview-enhanced .github-syntax-theme .source.css .support.constant, .markdown-preview-enhanced .github-syntax-theme .source.css .support.function { color: rgb(99, 163, 92); }
.markdown-preview-enhanced .github-syntax-theme .source.scss .entity.other.attribute-name.pseudo-class, .markdown-preview-enhanced .github-syntax-theme .source.scss .entity.other.attribute-name.pseudo-element { color: rgb(173, 28, 93); }
.markdown-preview-enhanced .github-syntax-theme .support.constant.property-value, .markdown-preview-enhanced .github-syntax-theme .source.scss .support.function, .markdown-preview-enhanced .github-syntax-theme .meta.property-value.scss { color: rgb(99, 163, 92); }
.markdown-preview-enhanced .github-syntax-theme .variable, .markdown-preview-enhanced .github-syntax-theme .source.scss .variable, .markdown-preview-enhanced .github-syntax-theme .variable.interpolation.scss, .markdown-preview-enhanced .github-syntax-theme .source.scss .meta.set.variable { color: rgb(222, 104, 173); }
.markdown-preview-enhanced .github-syntax-theme .keyword.control.else.scss, .markdown-preview-enhanced .github-syntax-theme .keyword.control.if.scss, .markdown-preview-enhanced .github-syntax-theme .keyword.control.content.scss { color: rgb(99, 163, 92); }
.markdown-preview-enhanced .github-syntax-theme .keyword.other.unit { color: rgb(173, 28, 93); }
.markdown-preview-enhanced .github-syntax-theme .keyword.other.important { color: rgb(235, 69, 53); }
.markdown-preview-enhanced .github-syntax-theme .entity.name.tag.reference.scss { color: rgb(181, 127, 0); }
.markdown-preview-enhanced .github-syntax-theme .entity.name.type.new.js { color: rgb(133, 103, 181); }
.markdown-preview-enhanced .github-syntax-theme .variable.language.js { color: rgb(238, 106, 66); }
.markdown-preview-enhanced .github-syntax-theme .variable.parameter.function { color: rgb(181, 127, 0); }
.markdown-preview-enhanced .github-syntax-theme .source.js .meta.function .entity.name.function, .markdown-preview-enhanced .github-syntax-theme .source.js .entity.name.function .meta.function { color: rgb(133, 103, 181); }
.markdown-preview-enhanced .github-syntax-theme .source.php .entity.name.type.class { color: rgb(238, 106, 66); }
.markdown-preview-enhanced .github-syntax-theme .punctuation.definition.heading.markdown, .markdown-preview-enhanced .github-syntax-theme .punctuation.definition.italic.markdown, .markdown-preview-enhanced .github-syntax-theme .punctuation.definition.bold.markdown, .markdown-preview-enhanced .github-syntax-theme .punctuation.definition.string.begin.markdown, .markdown-preview-enhanced .github-syntax-theme .punctuation.definition.string.end.markdown, .markdown-preview-enhanced .github-syntax-theme .punctuation.definition.metadata.markdown, .markdown-preview-enhanced .github-syntax-theme .punctuation.definition.link.markdown, .markdown-preview-enhanced .github-syntax-theme .punctuation.definition.blockquote.markdown, .markdown-preview-enhanced .github-syntax-theme .punctuation.definition.raw.markdown { color: rgb(173, 28, 93); }
.markdown-preview-enhanced .github-syntax-theme .punctuation.section.function.scss { color: rgb(99, 163, 92); }
.markdown-preview-enhanced .github-syntax-theme .punctuation, .markdown-preview-enhanced .github-syntax-theme .meta.method-call, .markdown-preview-enhanced .github-syntax-theme .meta.method { color: rgb(51, 51, 51); }
.markdown-preview-enhanced .github-syntax-theme .text.html.markdown .meta.separator { color: rgb(179, 179, 179); }
.markdown-preview-enhanced .github-syntax-theme .text.html.markdown .markup.raw.block { color: rgb(0, 0, 0); }
.markdown-preview-enhanced .github-syntax-theme .text.html.markdown .markup.raw.inline { color: rgb(0, 0, 0); }
.markdown-preview-enhanced .github-syntax-theme .text.html.markdown .meta.link, .markdown-preview-enhanced .github-syntax-theme .text.html.markdown .meta.image { color: rgb(65, 131, 196); }
.markdown-preview-enhanced .github-syntax-theme .text.html.markdown .markup.underline.link, .markdown-preview-enhanced .github-syntax-theme .text.html.markdown .constant.other.reference { font-style: italic; }
.markdown-preview-enhanced .github-syntax-theme .text.html.markdown .markup.list { color: rgb(238, 106, 66); }
.markdown-preview-enhanced .github-syntax-theme .text.html.markdown .markup.bold { font-weight: bold; }
.markdown-preview-enhanced .github-syntax-theme .text.html.markdown .markup.italic { font-style: italic; }
.markdown-preview-enhanced .github-syntax-theme .text.html.markdown .markup.bold .markup.italic { font-weight: bold; font-style: italic; }
.markdown-preview-enhanced .github-syntax-theme .text.html.markdown .markup.italic .markup.bold { font-weight: bold; font-style: italic; }
.markdown-preview-enhanced .github-syntax-theme .string.quoted.double.html .invalid.illegal.bad-ampersand.html { color: rgb(34, 115, 195); background-color: rgb(255, 255, 255); }
.markdown-preview-enhanced .github-syntax-theme .bracket-matcher .region { border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgba(240, 192, 0, 0.8); z-index: 100; background-color: rgba(255, 214, 51, 0.0980392); }
.markdown-preview-enhanced .github-syntax-theme .meta.tag.template.angular { color: rgb(34, 115, 195); }
.markdown-preview-enhanced .github-syntax-theme .meta.tag.template.angular .punctuation.definition.block.begin.angular, .markdown-preview-enhanced .github-syntax-theme .meta.tag.template.angular .punctuation.definition.block.end.angular, .markdown-preview-enhanced .github-syntax-theme .meta.tag.template.angular .meta.brace.curly.js { color: rgb(173, 28, 93); }
.markdown-preview-enhanced .github-syntax-theme .entity.other.attribute-name.html.angular, .markdown-preview-enhanced .github-syntax-theme .meta.attribute.html.angular { color: rgb(133, 103, 181) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] pre.editor-colors, .markdown-preview-enhanced[data-use-github-syntax-theme] .host { color: rgb(51, 51, 51) !important; background-color: rgb(247, 247, 247) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] pre { color: rgb(51, 51, 51) !important; background-color: rgb(247, 247, 247) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] pre.editor-colors .gutter, .markdown-preview-enhanced[data-use-github-syntax-theme] .host .gutter { color: rgb(179, 179, 179) !important; background-color: rgb(255, 255, 255) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] pre.editor-colors .gutter .line-number.cursor-line, .markdown-preview-enhanced[data-use-github-syntax-theme] .host .gutter .line-number.cursor-line { color: rgb(77, 77, 77) !important; background-color: rgb(245, 245, 245) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] pre.editor-colors .gutter .line-number.cursor-line-no-selection, .markdown-preview-enhanced[data-use-github-syntax-theme] .host .gutter .line-number.cursor-line-no-selection { color: rgb(77, 77, 77) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] pre.editor-colors .wrap-guide, .markdown-preview-enhanced[data-use-github-syntax-theme] .host .wrap-guide { color: rgb(223, 223, 223) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] pre.editor-colors .indent-guide, .markdown-preview-enhanced[data-use-github-syntax-theme] .host .indent-guide { color: rgb(223, 223, 223) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] pre.editor-colors .invisible-character, .markdown-preview-enhanced[data-use-github-syntax-theme] .host .invisible-character { color: rgb(223, 223, 223) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] pre.editor-colors .search-results .marker .region, .markdown-preview-enhanced[data-use-github-syntax-theme] .host .search-results .marker .region { border: rgb(0, 0, 0) !important; background-color: transparent !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] pre.editor-colors .search-results .marker.current-result .region, .markdown-preview-enhanced[data-use-github-syntax-theme] .host .search-results .marker.current-result .region { border: rgb(0, 0, 0) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] pre.editor-colors.is-focused .cursor, .markdown-preview-enhanced[data-use-github-syntax-theme] .host(.is-focused) .cursor { border-color: rgb(0, 0, 0) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] pre.editor-colors.is-focused .selection .region, .markdown-preview-enhanced[data-use-github-syntax-theme] .host(.is-focused) .selection .region { background-color: rgba(178, 215, 255, 0.4) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] pre.editor-colors.is-focused .line-number.cursor-line-no-selection, .markdown-preview-enhanced[data-use-github-syntax-theme] pre.editor-colors.is-focused .line.cursor-line, .markdown-preview-enhanced[data-use-github-syntax-theme] .host(.is-focused) .line-number.cursor-line-no-selection, .markdown-preview-enhanced[data-use-github-syntax-theme] .host(.is-focused) .line.cursor-line { background-color: rgba(240, 240, 240, 0.498039) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .comment, .markdown-preview-enhanced[data-use-github-syntax-theme] .punctuation.comment { color: rgb(176, 176, 176) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .string, .markdown-preview-enhanced[data-use-github-syntax-theme] .string .constant.character.escape { color: rgb(34, 115, 195) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .constant.numeric { color: rgb(0, 153, 204) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .constant.language { color: rgb(0, 153, 204) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .constant.character, .markdown-preview-enhanced[data-use-github-syntax-theme] .constant.other.rgb-value { color: rgb(0, 153, 204) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .constant.numeric.line-number.find-in-files, .markdown-preview-enhanced[data-use-github-syntax-theme] .constant.numeric.line-number.match.find-in-files { color: rgb(171, 176, 179) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .entity.name.class { color: rgb(0, 153, 204) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .entity.other.inherited-class { color: rgb(0, 153, 204) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .meta.tag.any.html, .markdown-preview-enhanced[data-use-github-syntax-theme] .meta.tag.block.any.html { color: rgb(171, 176, 179) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .entity.name.tag { color: rgb(99, 163, 92) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .entity.name.function { color: rgb(133, 103, 181) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .entity.other.attribute-name, .markdown-preview-enhanced[data-use-github-syntax-theme] .entity.other.attribute-name .punctuation.definition.entity.scss, .markdown-preview-enhanced[data-use-github-syntax-theme] .entity.other.attribute-name.id.css, .markdown-preview-enhanced[data-use-github-syntax-theme] .entity.other.attribute-name.id.css .punctuation.definition.entity.css, .markdown-preview-enhanced[data-use-github-syntax-theme] .entity.other.attribute-name.class.css .punctuation.definition.entity.css { color: rgb(133, 103, 181) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .punctuation.definition.tag.begin.html, .markdown-preview-enhanced[data-use-github-syntax-theme] .punctuation.definition.tag.end.html, .markdown-preview-enhanced[data-use-github-syntax-theme] .punctuation.definition.tag.html, .markdown-preview-enhanced[data-use-github-syntax-theme] .meta.tag.block.any.html { color: rgb(51, 51, 51) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .keyword.control { color: rgb(173, 28, 93) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .keyword.operator { color: rgb(133, 103, 181) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .storage { color: rgb(173, 28, 93) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .storage.type { color: rgb(173, 28, 93) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .support.function { color: rgb(0, 153, 204) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .support.constant { color: rgb(0, 153, 204) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .support.type, .markdown-preview-enhanced[data-use-github-syntax-theme] .support.class, .markdown-preview-enhanced[data-use-github-syntax-theme] .meta.property-name.scss { color: rgb(0, 153, 204) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .support.other.variable { color: rgb(0, 0, 0) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .invalid, .markdown-preview-enhanced[data-use-github-syntax-theme] .invalid.illegal { color: rgb(248, 248, 248) !important; background-color: rgb(181, 42, 29) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .invalid.deprecated { color: rgb(181, 42, 29) !important; background-color: rgb(255, 255, 255) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .entity.name.filename.find-in-files { color: rgb(0, 0, 0) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .source.css .punctuation.definition.entity, .markdown-preview-enhanced[data-use-github-syntax-theme] .punctuation.terminator.rule.scss { color: rgb(0, 0, 0) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .source.css .entity.other.attribute-name.pseudo-class, .markdown-preview-enhanced[data-use-github-syntax-theme] .source.css .entity.other.attribute-name.pseudo-element { color: rgb(173, 28, 93) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .source.css .meta.value, .markdown-preview-enhanced[data-use-github-syntax-theme] .source.css .support.constant, .markdown-preview-enhanced[data-use-github-syntax-theme] .source.css .support.function { color: rgb(99, 163, 92) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .source.scss .entity.other.attribute-name.pseudo-class, .markdown-preview-enhanced[data-use-github-syntax-theme] .source.scss .entity.other.attribute-name.pseudo-element { color: rgb(173, 28, 93) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .support.constant.property-value, .markdown-preview-enhanced[data-use-github-syntax-theme] .source.scss .support.function, .markdown-preview-enhanced[data-use-github-syntax-theme] .meta.property-value.scss { color: rgb(99, 163, 92) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .variable, .markdown-preview-enhanced[data-use-github-syntax-theme] .source.scss .variable, .markdown-preview-enhanced[data-use-github-syntax-theme] .variable.interpolation.scss, .markdown-preview-enhanced[data-use-github-syntax-theme] .source.scss .meta.set.variable { color: rgb(222, 104, 173) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .keyword.control.else.scss, .markdown-preview-enhanced[data-use-github-syntax-theme] .keyword.control.if.scss, .markdown-preview-enhanced[data-use-github-syntax-theme] .keyword.control.content.scss { color: rgb(99, 163, 92) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .keyword.other.unit { color: rgb(173, 28, 93) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .keyword.other.important { color: rgb(235, 69, 53) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .entity.name.tag.reference.scss { color: rgb(181, 127, 0) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .entity.name.type.new.js { color: rgb(133, 103, 181) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .variable.language.js { color: rgb(238, 106, 66) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .variable.parameter.function { color: rgb(181, 127, 0) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .source.js .meta.function .entity.name.function, .markdown-preview-enhanced[data-use-github-syntax-theme] .source.js .entity.name.function .meta.function { color: rgb(133, 103, 181) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .source.php .entity.name.type.class { color: rgb(238, 106, 66) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .punctuation.definition.heading.markdown, .markdown-preview-enhanced[data-use-github-syntax-theme] .punctuation.definition.italic.markdown, .markdown-preview-enhanced[data-use-github-syntax-theme] .punctuation.definition.bold.markdown, .markdown-preview-enhanced[data-use-github-syntax-theme] .punctuation.definition.string.begin.markdown, .markdown-preview-enhanced[data-use-github-syntax-theme] .punctuation.definition.string.end.markdown, .markdown-preview-enhanced[data-use-github-syntax-theme] .punctuation.definition.metadata.markdown, .markdown-preview-enhanced[data-use-github-syntax-theme] .punctuation.definition.link.markdown, .markdown-preview-enhanced[data-use-github-syntax-theme] .punctuation.definition.blockquote.markdown, .markdown-preview-enhanced[data-use-github-syntax-theme] .punctuation.definition.raw.markdown { color: rgb(173, 28, 93) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .punctuation.section.function.scss { color: rgb(99, 163, 92) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .punctuation, .markdown-preview-enhanced[data-use-github-syntax-theme] .meta.method-call, .markdown-preview-enhanced[data-use-github-syntax-theme] .meta.method { color: rgb(51, 51, 51) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .text.html.markdown .meta.separator { color: rgb(179, 179, 179) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .text.html.markdown .markup.raw.block { color: rgb(0, 0, 0) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .text.html.markdown .markup.raw.inline { color: rgb(0, 0, 0) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .text.html.markdown .meta.link, .markdown-preview-enhanced[data-use-github-syntax-theme] .text.html.markdown .meta.image { color: rgb(65, 131, 196) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .text.html.markdown .markup.underline.link, .markdown-preview-enhanced[data-use-github-syntax-theme] .text.html.markdown .constant.other.reference { font-style: italic !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .text.html.markdown .markup.list { color: rgb(238, 106, 66) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .text.html.markdown .markup.bold { font-weight: bold !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .text.html.markdown .markup.italic { font-style: italic !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .text.html.markdown .markup.bold .markup.italic { font-weight: bold !important; font-style: italic !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .text.html.markdown .markup.italic .markup.bold { font-weight: bold !important; font-style: italic !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .string.quoted.double.html .invalid.illegal.bad-ampersand.html { color: rgb(34, 115, 195) !important; background-color: rgb(255, 255, 255) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .bracket-matcher .region { border-bottom-width: 1px !important; border-bottom-style: solid !important; border-bottom-color: rgba(240, 192, 0, 0.8) !important; z-index: 100 !important; background-color: rgba(255, 214, 51, 0.0980392) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .meta.tag.template.angular { color: rgb(34, 115, 195) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .meta.tag.template.angular .punctuation.definition.block.begin.angular, .markdown-preview-enhanced[data-use-github-syntax-theme] .meta.tag.template.angular .punctuation.definition.block.end.angular, .markdown-preview-enhanced[data-use-github-syntax-theme] .meta.tag.template.angular .meta.brace.curly.js { color: rgb(173, 28, 93) !important; }
.markdown-preview-enhanced[data-use-github-syntax-theme] .entity.other.attribute-name.html.angular, .markdown-preview-enhanced[data-use-github-syntax-theme] .meta.attribute.html.angular { color: rgb(133, 103, 181) !important; }
.markdown-preview-enhanced[data-presentation-mode] { font-size: 24px; width: 100%; box-sizing: border-box; margin: 0px; padding: 0px; }
.markdown-preview-enhanced[data-presentation-mode] h1, .markdown-preview-enhanced[data-presentation-mode] h2, .markdown-preview-enhanced[data-presentation-mode] h3, .markdown-preview-enhanced[data-presentation-mode] h4, .markdown-preview-enhanced[data-presentation-mode] h5, .markdown-preview-enhanced[data-presentation-mode] h6 { margin-top: 0px; }
.markdown-preview-enhanced[data-presentation-mode] strong { font-weight: bold; }
.markdown-preview-enhanced[data-presentation-mode]::-webkit-scrollbar { display: none; }
.markdown-preview-enhanced .slides { text-align: left !important; }
.markdown-themeable-pdf-page-break {
  border-top: 2px dotted #0098ff;
}
.markdown-themeable-pdf-page-break span {
  opacity: .35;
}

.bracket-matcher .region {
  border-bottom: 1px dotted lime;
  position: absolute;
}

pre.editor-colors,
.host {
  color: #adaeaf;
  background-color: #2d2e2f;
}
pre.editor-colors .line.cursor-line,
.host .line.cursor-line {
  background-color: rgba(61, 62, 63, 0.26);
}
pre.editor-colors .invisible,
.host .invisible {
  color: #adaeaf;
}
pre.editor-colors .cursor,
.host .cursor {
  border-color: #6c9cba;
  border-left-width: 2px;
}
pre.editor-colors .selection .region,
.host .selection .region {
  background-color: #3d3e3f;
}
pre.editor-colors .bracket-matcher .region,
.host .bracket-matcher .region {
  border-bottom: 1px solid #6c9cba;
}
pre.editor-colors .invisible-character,
.host .invisible-character {
  color: rgba(125, 126, 127, 0.25);
  -webkit-font-smoothing: antialiased;
}
pre.editor-colors .indent-guide,
.host .indent-guide {
  color: #3d3e3f;
}
pre.editor-colors .wrap-guide,
.host .wrap-guide {
  background-color: #3d3e3f;
}
pre.editor-colors .find-result .region.region.region,
.host .find-result .region.region.region,
pre.editor-colors .current-result .region.region.region,
.host .current-result .region.region.region {
  border-radius: 0px;
  background-color: rgba(108, 156, 186, 0.16);
  transition: border-color 0.4s;
}
pre.editor-colors .find-result .region.region.region,
.host .find-result .region.region.region {
  border: 2px solid transparent;
}
pre.editor-colors .current-result .region.region.region,
.host .current-result .region.region.region {
  border: 2px solid #6c9cba;
  transition-duration: .1s;
}
pre.editor-colors .gutter .line-number,
.host .gutter .line-number {
  color: #7d7e7f;
  -webkit-font-smoothing: antialiased;
}
pre.editor-colors .gutter .line-number.git-line-removed:before,
.host .gutter .line-number.git-line-removed:before {
  bottom: -3px;
}
pre.editor-colors .gutter .line-number.git-line-removed:after,
.host .gutter .line-number.git-line-removed:after {
  content: "";
  position: absolute;
  left: 0px;
  bottom: 0px;
  width: 25px;
  border-bottom: 1px dotted rgba(157, 105, 54, 0.5);
  pointer-events: none;
}
pre.editor-colors .gutter .line-number.cursor-line,
.host .gutter .line-number.cursor-line {
  color: #6c9cba;
  background-color: #3d3e3f;
}
pre.editor-colors .gutter .line-number.cursor-line-no-selection,
.host .gutter .line-number.cursor-line-no-selection {
  background-color: transparent;
}
pre.editor-colors .gutter .line-number .icon-right,
.host .gutter .line-number .icon-right {
  color: #adaeaf;
}
pre.editor-colors .gutter .line-number.folded,
.host .gutter .line-number.folded,
pre.editor-colors .gutter .line-number:after,
.host .gutter .line-number:after,
pre.editor-colors .fold-marker:after,
.host .fold-marker:after {
  color: #6c9cba;
}
.text1 {
  color: #adaeaf;
}
.text2 {
  color: #7d7e7f;
}
.primary1 {
  color: #9d6936;
}
.primary2 {
  color: #8b9c3a;
}
.primary3 {
  color: #b38121;
}
.secondary1 {
  color: #85af85;
}
.secondary2 {
  color: #bdaa4a;
}
.tertiary1 {
  color: #6c9cba;
}
.tertiary2 {
  color: #8a8db7;
}
.tertiary3 {
  color: #bd9198;
}
.meta {
  color: #7d7e7f;
}
.html.elements,
.entity,
.tag,
.function-call {
  color: #9d6936;
}
.variable,
.attribute-name,
.character.escape {
  color: #8b9c3a;
}
.support {
  color: #adaeaf;
}
.string,
.constant,
.storage.type {
  color: #b38121;
}
.keyword,
.storage {
  color: #85af85;
}
.punctuation,
.bracket,
.brace {
  color: #7d7e7f;
}
.string .punctuation {
  color: #7d7e7f;
}
.comment {
  color: #7d7e7f;
  font-style: italic;
}
.bold {
  font-weight: bold;
}
.italic {
  font-style: italic;
}
.c .parens,
.c .block {
  color: #8b9c3a;
}
.c .parens .punctuation,
.c .block .punctuation,
.c .parens .bracket,
.c .block .bracket,
.c .parens .brace,
.c .block .brace {
  color: #7d7e7f;
}
.c .parens .string .punctuation,
.c .block .string .punctuation {
  color: #7d7e7f;
}
.c .comment {
  color: #bdaa4a;
}
.source.clojure .expression {
  color: #b38121;
}
.source.clojure .expression .punctuation {
  color: #7d7e7f;
}
.source.clojure .symbol {
  color: #8b9c3a;
}
.source.clojure .vector {
  color: #8a8db7;
}
.coffee.source {
  color: #adaeaf;
}
.coffee .string.quoted {
  color: #85af85;
}
.coffee .punctuation.definition.string {
  color: #85af85;
}
.coffee .keyword.control {
  color: #b38121;
}
.coffee .keyword.control.anchor {
  color: #bdaa4a;
}
.coffee .keyword.operator {
  color: #adaeaf;
}
.coffee .keyword.other {
  color: #bdaa4a;
}
.source.cs .meta {
  color: #8a8db7;
}
.source.cs .method {
  color: #8b9c3a;
}
.css.source {
  color: #7d7e7f;
}
.css.at-rule {
  color: #9d6936;
}
.css.at-rule .keyword.punctuation {
  color: inherit;
}
.css.attribute-name.id,
.css.attribute-name.class,
.css.attribute-name.parent-selector {
  color: #9d6936;
}
.gfm {
  color: #adaeaf;
}
.gfm .punctuation,
.gfm .bracket,
.gfm .brace {
  color: #7d7e7f;
}
.gfm .string .punctuation {
  color: #7d7e7f;
}
.gfm .link {
  color: #8b9c3a;
}
.gfm.markup {
  color: #adaeaf;
}
.gfm.markup.bold {
  font-weight: bold;
}
.gfm.markup.italic {
  font-style: italic;
}
.gfm.markup.strike {
  color: #7d7e7f;
  text-decoration: line-through;
}
.gfm.markup.raw,
.gfm.markup.raw .support,
.gfm.markup.code .support {
  color: #85af85;
}
.gfm.markup.underline.link {
  color: #b38121;
}
.gfm.comment {
  color: #7d7e7f;
}
.gfm.comment.quote {
  color: #adaeaf;
}
.gfm.table {
  color: #adaeaf;
}
.gfm.table .border,
.gfm.table .pipe {
  color: #7d7e7f;
}
.gfm.variable,
.gfm.entity {
  color: #8b9c3a;
}
.gfm.variable.list {
  color: #bd9198;
}
.gfm.support {
  color: #85af85;
}
.gfm.heading {
  color: #9d6936;
}
.gfm.heading.marker {
  color: #8a8db7;
}
.haskell.source {
  color: #8b9c3a;
}
.haskell.source .punctuation,
.haskell.source .bracket,
.haskell.source .brace {
  color: #7d7e7f;
}
.haskell.source .string .punctuation {
  color: #7d7e7f;
}
.html.meta {
  color: #7d7e7f;
}
.html.text {
  color: #adaeaf;
}
.html .string {
  color: #adaeaf;
}
.html .string .id {
  color: #85af85;
}
.html .string.quoted {
  color: #85af85;
}
.html .string.punctuation {
  color: #85af85;
}
.jade.text {
  color: #8a8db7;
}
.jade .meta.control.flow {
  color: #8b9c3a;
}
.jade .constant.name.attribute.tag {
  color: #7d7e7f;
}
.jade .attribute-name.id {
  color: #b38121;
}
.jade .string.quoted {
  color: #85af85;
}
.jade .string.interpolated {
  color: #bdaa4a;
}
.java .method {
  color: #8b9c3a;
}
.java .method .punctuation,
.java .method .bracket,
.java .method .brace {
  color: #7d7e7f;
}
.java .method .string .punctuation {
  color: #7d7e7f;
}
.java .dereference {
  color: #7d7e7f;
}
.js.source {
  color: #adaeaf;
}
.js.source .punctuation,
.js.source .bracket,
.js.source .brace {
  color: #7d7e7f;
}
.js.source .string .punctuation {
  color: #7d7e7f;
}
.js .entity.name.function {
  color: #b38121;
}
.js .constant {
  color: #b38121;
}
.js .variable {
  color: #9d6936;
}
.js .variable.other {
  color: #85af85;
}
.js .variable.parameter {
  color: #9d6936;
}
.js .meta.arguments {
  color: #9d6936;
}
.js .storage.type {
  color: #8b9c3a;
}
.js .keyword {
  color: #9d6936;
}
.js .keyword.control {
  color: #bdaa4a;
}
.js .keyword.operator {
  color: #adaeaf;
}
.js .keyword.operator.typeof {
  color: #8a8db7;
}
.js .keyword.operator.logical {
  color: #bd9198;
}
.js .string {
  color: #85af85;
}
.js .string.punctuation.definition {
  color: #85af85;
}
.js .support.class {
  color: #bdaa4a;
}
.js .support.function {
  color: #adaeaf;
}
.json .string {
  color: #9d6936;
}
.json .string .punctuation {
  color: #7d7e7f;
}
.json .value > .string {
  color: #8b9c3a;
}
.json .value > .string .punctuation {
  color: #7d7e7f;
}
.json .value .constant {
  color: #bdaa4a;
}
.less.variable:first-child {
  color: #9d6936;
}
.less .mixin {
  color: #85af85;
}
.mediawiki {
  color: #9d6936;
}
.mediawiki .punctuation,
.mediawiki .bracket,
.mediawiki .brace {
  color: #7d7e7f;
}
.mediawiki .string .punctuation {
  color: #7d7e7f;
}
.mediawiki .wiki-link {
  color: #8b9c3a;
}
.mediawiki .heading {
  color: #b38121;
}
.mediawiki .function-call {
  color: #85af85;
}
.mediawiki .value {
  color: #b38121;
}
.mediawiki .fix_this_later {
  color: #8b9c3a;
}
.mediawiki .pipe,
.mediawiki .link,
.mediawiki .tag {
  color: #7d7e7f;
}
.php .string-contents {
  color: #85af85;
}
.php .keyword {
  color: #b38121;
}
.php .keyword.other {
  color: #7d7e7f;
}
.php .keyword.operator {
  color: #8b9c3a;
}
.php .punctuation.section.embedded {
  color: #adaeaf;
}
.php .punctuation.definition.variable {
  color: #8b9c3a;
}
.source.ruby .meta {
  color: #adaeaf;
}
.source.ruby .punctuation {
  color: #7d7e7f;
}
.source.ruby .punctuation.section.regexp {
  color: #bd9198;
}
.source.ruby .keyword {
  color: #9d6936;
}
.source.ruby .keyword.operator {
  color: #bdaa4a;
}
.source.ruby .variable {
  color: #b38121;
}
.source.ruby .name {
  color: #8b9c3a;
}
.source.ruby .string {
  color: #85af85;
}
.source.ruby .character.escape {
  color: #8a8db7;
}
.source.ruby .support.class {
  color: #8b9c3a;
}
.sass .at-rule .at-rule,
.sass .at-rule .at-rule > .punctuation {
  color: #9d6936;
}
.sass .mixin + .function,
.sass .include + .function {
  color: #85af85;
}
.sass.property-value {
  color: #b38121;
}
.sass.property-value .function {
  color: #8b9c3a;
}
.sass.property-value .punctuation {
  color: #7d7e7f;
}
.sass.variable.parameter.url {
  color: #b38121;
}
.sass.class,
.sass.parent-selector-suffix {
  color: #9d6936;
}
.scss .at-rule .at-rule,
.scss .at-rule .at-rule > .punctuation {
  color: #9d6936;
}
.scss .mixin + .function,
.scss .include + .function {
  color: #85af85;
}
.scss.property-value {
  color: #b38121;
}
.scss.property-value .function {
  color: #8b9c3a;
}
.scss.property-value .punctuation {
  color: #7d7e7f;
}
.scss.variable.parameter.url {
  color: #b38121;
}
.scss.class,
.scss.parent-selector-suffix {
  color: #9d6936;
}
.scss .support.function {
  color: #bdaa4a;
}
.scss .keyword.control {
  color: #9d6936;
}
.scss .punctuation.definition.keyword {
  color: #9d6936;
}
.scss .punctuation.definition.string {
  color: #85af85;
}
.scss .punctuation.definition.constant {
  color: #b38121;
}
.scss .variable.interpolation {
  color: #b38121;
}
.scss .string.quoted {
  color: #85af85;
}
.scss .entity.name.function {
  color: #bdaa4a;
}
.slim.meta {
  color: #7d7e7f;
}
.slim.text {
  color: #adaeaf;
}
.slim .string.quoted {
  color: #85af85;
}
.slim .string.id {
  color: #b38121;
}
.stylus .function .name {
  color: #85af85;
}
.tex .other {
  color: #85af85;
}
.tex .reference {
  color: #8b9c3a;
}
.plain .text {
  color: #adaeaf;
}
.yaml .tag {
  color: #9d6936;
}
.yaml .string {
  color: #adaeaf;
}
.yaml .string.quoted {
  color: #85af85;
}
.yaml .constant {
  color: #b38121;
}
.yaml .punctuation {
  color: #7d7e7f;
}
.yaml .punctuation.string {
  color: #85af85;
}
 /* Flowchart variables */
/* Sequence Diagram variables */
/* Gantt chart variables */
.mermaid .label {
  color: #333;
}
.mermaid .node rect,
.mermaid .node circle,
.mermaid .node ellipse,
.mermaid .node polygon {
  fill: #ECECFF;
  stroke: #CCCCFF;
  stroke-width: 1px;
}
.mermaid .edgePath .path {
  stroke: #333333;
}
.mermaid .edgeLabel {
  background-color: #e8e8e8;
}
.mermaid .cluster rect {
  fill: #ffffde !important;
  rx: 4 !important;
  stroke: #aaaa33 !important;
  stroke-width: 1px !important;
}
.mermaid .cluster text {
  fill: #333;
}
.mermaid .actor {
  stroke: #CCCCFF;
  fill: #ECECFF;
}
.mermaid text.actor {
  fill: black;
  stroke: none;
}
.mermaid .actor-line {
  stroke: grey;
}
.mermaid .messageLine0 {
  stroke-width: 1.5;
  stroke-dasharray: "2 2";
  marker-end: "url(#arrowhead)";
  stroke: #333;
}
.mermaid .messageLine1 {
  stroke-width: 1.5;
  stroke-dasharray: "2 2";
  stroke: #333;
}
.mermaid #arrowhead {
  fill: #333;
}
.mermaid #crosshead path {
  fill: #333 !important;
  stroke: #333 !important;
}
.mermaid .messageText {
  fill: #333;
  stroke: none;
}
.mermaid .labelBox {
  stroke: #CCCCFF;
  fill: #ECECFF;
}
.mermaid .labelText {
  fill: black;
  stroke: none;
}
.mermaid .loopText {
  fill: black;
  stroke: none;
}
.mermaid .loopLine {
  stroke-width: 2;
  stroke-dasharray: "2 2";
  marker-end: "url(#arrowhead)";
  stroke: #CCCCFF;
}
.mermaid .note {
  stroke: #aaaa33;
  fill: #fff5ad;
}
.mermaid .noteText {
  fill: black;
  stroke: none;
  font-family: 'trebuchet ms', verdana, arial;
  font-size: 14px;
}
/** Section styling */
.mermaid .section {
  stroke: none;
  opacity: 0.2;
}
.mermaid .section0 {
  fill: rgba(102, 102, 255, 0.49);
}
.mermaid .section2 {
  fill: #fff400;
}
.mermaid .section1,
.mermaid .section3 {
  fill: white;
  opacity: 0.2;
}
.mermaid .sectionTitle0 {
  fill: #333;
}
.mermaid .sectionTitle1 {
  fill: #333;
}
.mermaid .sectionTitle2 {
  fill: #333;
}
.mermaid .sectionTitle3 {
  fill: #333;
}
.mermaid .sectionTitle {
  text-anchor: start;
  font-size: 11px;
  text-height: 14px;
}
/* Grid and axis */
.mermaid .grid .tick {
  stroke: lightgrey;
  opacity: 0.3;
  shape-rendering: crispEdges;
}
.mermaid .grid path {
  stroke-width: 0;
}
/* Today line */
.mermaid .today {
  fill: none;
  stroke: red;
  stroke-width: 2px;
}
/* Task styling */
/* Default task */
.mermaid .task {
  stroke-width: 2;
}
.mermaid .taskText {
  text-anchor: middle;
  font-size: 11px;
}
.mermaid .taskTextOutsideRight {
  fill: black;
  text-anchor: start;
  font-size: 11px;
}
.mermaid .taskTextOutsideLeft {
  fill: black;
  text-anchor: end;
  font-size: 11px;
}
/* Specific task settings for the sections*/
.mermaid .taskText0,
.mermaid .taskText1,
.mermaid .taskText2,
.mermaid .taskText3 {
  fill: white;
}
.mermaid .task0,
.mermaid .task1,
.mermaid .task2,
.mermaid .task3 {
  fill: #8a90dd;
  stroke: #534fbc;
}
.mermaid .taskTextOutside0,
.mermaid .taskTextOutside2 {
  fill: black;
}
.mermaid .taskTextOutside1,
.mermaid .taskTextOutside3 {
  fill: black;
}
/* Active task */
.mermaid .active0,
.mermaid .active1,
.mermaid .active2,
.mermaid .active3 {
  fill: #bfc7ff;
  stroke: #534fbc;
}
.mermaid .activeText0,
.mermaid .activeText1,
.mermaid .activeText2,
.mermaid .activeText3 {
  fill: black !important;
}
/* Completed task */
.mermaid .done0,
.mermaid .done1,
.mermaid .done2,
.mermaid .done3 {
  stroke: grey;
  fill: lightgrey;
  stroke-width: 2;
}
.mermaid .doneText0,
.mermaid .doneText1,
.mermaid .doneText2,
.mermaid .doneText3 {
  fill: black !important;
}
/* Tasks on the critical line */
.mermaid .crit0,
.mermaid .crit1,
.mermaid .crit2,
.mermaid .crit3 {
  stroke: #ff8888;
  fill: red;
  stroke-width: 2;
}
.mermaid .activeCrit0,
.mermaid .activeCrit1,
.mermaid .activeCrit2,
.mermaid .activeCrit3 {
  stroke: #ff8888;
  fill: #bfc7ff;
  stroke-width: 2;
}
.mermaid .doneCrit0,
.mermaid .doneCrit1,
.mermaid .doneCrit2,
.mermaid .doneCrit3 {
  stroke: #ff8888;
  fill: lightgrey;
  stroke-width: 2;
  cursor: pointer;
  shape-rendering: crispEdges;
}
.mermaid .doneCritText0,
.mermaid .doneCritText1,
.mermaid .doneCritText2,
.mermaid .doneCritText3 {
  fill: black !important;
}
.mermaid .activeCritText0,
.mermaid .activeCritText1,
.mermaid .activeCritText2,
.mermaid .activeCritText3 {
  fill: black !important;
}
.mermaid .titleText {
  text-anchor: middle;
  font-size: 18px;
  fill: black;
}
/*


*/
.mermaid .node text {
  font-family: 'trebuchet ms', verdana, arial;
  font-size: 14px;
}
div.mermaidTooltip {
  position: absolute;
  text-align: center;
  max-width: 200px;
  padding: 2px;
  font-family: 'trebuchet ms', verdana, arial;
  font-size: 12px;
  background: #ffffde;
  border: 1px solid #aaaa33;
  border-radius: 2px;
  pointer-events: none;
  z-index: 100;
}
 </style> <link rel="stylesheet" href="file:///C:\Users\zhijianz\.atom\packages\markdown-preview-enhanced\node_modules\katex\dist\katex.min.css">  </head> <body class="markdown-preview-enhanced " data-use-github-style data-use-github-syntax-theme > <blockquote>
<p class="sync-line" data-line="1">介绍插件项目DroidPlugin版本的使用和相关代码分析</p>
</blockquote>
<ul>
<li><p class="sync-line" data-line="5"><a href="#abstract">Abstract</a></p></li>
<li><p class="sync-line" data-line="6"><a href="#&#x6E90;&#x4EE3;&#x7801;&#x5206;&#x6790;">源代码分析</a>
<ul>
<li><p class="sync-line" data-line="7"><a href="#&#x6E90;&#x4EE3;&#x7801;&#x6846;&#x67B6;">源代码框架</a></p></li>
<li><p class="sync-line" data-line="8"><a href="#&#x5173;&#x952E;&#x6D41;&#x7A0B;">关键流程</a>
<ul>
<li><p class="sync-line" data-line="9"><a href="#&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x62C9;&#x53D6;&#x63D2;&#x4EF6;&#x914D;&#x7F6E;&#x548C;&#x66F4;&#x65B0;&#x672C;&#x5730;&#x63D2;&#x4EF6;&#x6570;&#x636E;&#x6D41;&#x7A0B;">从服务器拉取插件配置和更新本地插件数据流程</a></p></li>
<li><p class="sync-line" data-line="10"><a href="#&#x5DF2;&#x5B89;&#x88C5;&#x63D2;&#x4EF6;&#x4FE1;&#x606F;&#x6062;&#x590D;&#x6D41;&#x7A0B;">已安装插件信息恢复流程</a></p></li>
<li><p class="sync-line" data-line="11"><a href="#&#x63D2;&#x4EF6;&#x9884;&#x88C5;&#x8F7D;&#x6D41;&#x7A0B;">插件预装载流程</a></p></li>
<li><p class="sync-line" data-line="12"><a href="#&#x63D2;&#x4EF6;&#x5B89;&#x88C5;&#x6D41;&#x7A0B;">插件安装流程</a></p></li>
<li><p class="sync-line" data-line="13"><a href="#&#x63D2;&#x4EF6;&#x5B9E;&#x4F53;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;">插件实体对应关系</a></p></li>
<li><p class="sync-line" data-line="14"><a href="#&#x63D2;&#x4EF6;&#x8FD0;&#x884C;&#x539F;&#x7406;&#x7B80;&#x4ECB;">插件运行原理简介</a></p></li>
<li><p class="sync-line" data-line="15"><a href="#&#x63D2;&#x4EF6;&#x72B6;&#x6001;">插件状态</a></p></li>
<li><p class="sync-line" data-line="16"><a href="#&#x63D2;&#x4EF6;&#x4FDD;&#x5B58;&#x65B9;&#x5F0F;">插件保存方式</a></p></li>
</ul></p></li>
</ul></p></li>
</ul>
<h1 class="sync-line" data-line="20" id="abstract">Abstract</h1>
<ol>
<li><p class="sync-line" data-line="22">用一个示例项目介绍SDK的使用</p></li>
<li><p class="sync-line" data-line="23">介绍SDK代码结果和关键代码分析</p></li>
</ol>
<h1 class="sync-line" data-line="25" id="&#x6E90;&#x4EE3;&#x7801;&#x5206;&#x6790;">源代码分析</h1>
<h2 class="sync-line" data-line="27" id="&#x6E90;&#x4EE3;&#x7801;&#x6846;&#x67B6;">源代码框架</h2>
<div class="plantuml"><!--?xml version="1.0" encoding="UTF-8" standalone="yes"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="241px" style="width:1082px;height:241px;" version="1.1" viewbox="0 0 1082 241" width="1082px"><defs><filter height="300%" id="f442xyq" width="300%" x="-1" y="-1"><fegaussianblur result="blurOut" stddeviation="2.0"></fegaussianblur><fecolormatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></fecolormatrix><feoffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feoffset><feblend in="SourceGraphic" in2="blurOut3" mode="normal"></feblend></filter></defs><g><polygon fill="#DDDDDD" filter="url(#f442xyq)" points="22,24,178,24,185,49.1201,412,49.1201,412,234,22,234,22,24" style="stroke: #000000; stroke-width: 2.0;"></polygon><line style="stroke: #000000; stroke-width: 2.0;" x1="22" x2="185" y1="49.1201" y2="49.1201"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="150" x="26" y="42.0439">Plugin Sever Controll</text><polygon fill="#FFFFFF" filter="url(#f442xyq)" points="785,24,855,24,862,49.1201,1075,49.1201,1075,126,785,126,785,24" style="stroke: #000000; stroke-width: 2.0;"></polygon><line style="stroke: #000000; stroke-width: 2.0;" x1="785" x2="862" y1="49.1201" y2="49.1201"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="64" x="789" y="42.0439">Open API</text><polygon fill="#FFFFFF" filter="url(#f442xyq)" points="436,24,562,24,569,49.1201,761,49.1201,761,234,436,234,436,24" style="stroke: #000000; stroke-width: 2.0;"></polygon><line style="stroke: #000000; stroke-width: 2.0;" x1="436" x2="569" y1="49.1201" y2="49.1201"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="120" x="440" y="42.0439">DroidPlugin logic</text><rect fill="#FEFECE" filter="url(#f442xyq)" height="48" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="38.5" y="62"></rect><ellipse cx="53.5" cy="78" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"></ellipse><path d="M52.0781,83.3594 Q50.2188,83.3594 49.125,81.9688 Q48.0313,80.5781 48.0313,77.5938 Q48.0313,75.0625 49.1953,73.4063 Q50.3594,71.75 52.3438,71.75 Q53.8125,71.75 54.2813,71.875 Q54.75,72.0781 54.75,72.0781 Q54.75,72.0781 54.75,72.0078 Q54.75,71.9375 55.3594,71.0156 L56.4063,74.6719 L55.0781,75.0781 Q54.6094,73.5313 53.9453,72.8672 Q53.2813,72.2031 52.2188,72.2031 Q51.8281,72.2031 51.0625,73.7344 Q50.2969,75.2656 50.2969,77.5156 Q50.2969,79.9844 50.9609,81.375 Q51.625,82.7656 52.1563,82.7656 Q53.2188,82.7656 53.9766,82 Q54.7344,81.2344 55.0781,79.5781 L56.4063,80.1719 Q56.0781,81.5781 55.1797,82.4688 Q54.2813,83.3594 52.0781,83.3594 Z "></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="139" x="67.5" y="83.5576">PluginDownloadManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39.5" x2="208.5" y1="94" y2="94"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="39.5" x2="208.5" y1="102" y2="102"></line><rect fill="#FEFECE" filter="url(#f442xyq)" height="48" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="244.5" y="62"></rect><ellipse cx="259.5" cy="78" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"></ellipse><path d="M258.0781,83.3594 Q256.2188,83.3594 255.125,81.9688 Q254.0313,80.5781 254.0313,77.5938 Q254.0313,75.0625 255.1953,73.4063 Q256.3594,71.75 258.3438,71.75 Q259.8125,71.75 260.2813,71.875 Q260.75,72.0781 260.75,72.0781 Q260.75,72.0781 260.75,72.0078 Q260.75,71.9375 261.3594,71.0156 L262.4063,74.6719 L261.0781,75.0781 Q260.6094,73.5313 259.9453,72.8672 Q259.2813,72.2031 258.2188,72.2031 Q257.8281,72.2031 257.0625,73.7344 Q256.2969,75.2656 256.2969,77.5156 Q256.2969,79.9844 256.9609,81.375 Q257.625,82.7656 258.1563,82.7656 Q259.2188,82.7656 259.9766,82 Q260.7344,81.2344 261.0781,79.5781 L262.4063,80.1719 Q262.0781,81.5781 261.1797,82.4688 Q260.2813,83.3594 258.0781,83.3594 Z "></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="119" x="273.5" y="83.5576">PluginConfigManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="245.5" x2="394.5" y1="94" y2="94"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="245.5" x2="394.5" y1="102" y2="102"></line><rect fill="#FEFECE" filter="url(#f442xyq)" height="48" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="90.5" y="170"></rect><ellipse cx="105.5" cy="186" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"></ellipse><path d="M104.0781,191.3594 Q102.2188,191.3594 101.125,189.9688 Q100.0313,188.5781 100.0313,185.5938 Q100.0313,183.0625 101.1953,181.4063 Q102.3594,179.75 104.3438,179.75 Q105.8125,179.75 106.2813,179.875 Q106.75,180.0781 106.75,180.0781 Q106.75,180.0781 106.75,180.0078 Q106.75,179.9375 107.3594,179.0156 L108.4063,182.6719 L107.0781,183.0781 Q106.6094,181.5313 105.9453,180.8672 Q105.2813,180.2031 104.2188,180.2031 Q103.8281,180.2031 103.0625,181.7344 Q102.2969,183.2656 102.2969,185.5156 Q102.2969,187.9844 102.9609,189.375 Q103.625,190.7656 104.1563,190.7656 Q105.2188,190.7656 105.9766,190 Q106.7344,189.2344 107.0781,187.5781 L108.4063,188.1719 Q108.0781,189.5781 107.1797,190.4688 Q106.2813,191.3594 104.0781,191.3594 Z "></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="35" x="119.5" y="191.5576">Plugin</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="91.5" x2="156.5" y1="202" y2="202"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="91.5" x2="156.5" y1="210" y2="210"></line><rect fill="#FEFECE" filter="url(#f442xyq)" height="48" style="stroke: #A80036; stroke-width: 1.5;" width="145" x="913.5" y="62"></rect><ellipse cx="928.5" cy="78" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"></ellipse><path d="M927.0781,83.3594 Q925.2188,83.3594 924.125,81.9688 Q923.0313,80.5781 923.0313,77.5938 Q923.0313,75.0625 924.1953,73.4063 Q925.3594,71.75 927.3438,71.75 Q928.8125,71.75 929.2813,71.875 Q929.75,72.0781 929.75,72.0781 Q929.75,72.0781 929.75,72.0078 Q929.75,71.9375 930.3594,71.0156 L931.4063,74.6719 L930.0781,75.0781 Q929.6094,73.5313 928.9453,72.8672 Q928.2813,72.2031 927.2188,72.2031 Q926.8281,72.2031 926.0625,73.7344 Q925.2969,75.2656 925.2969,77.5156 Q925.2969,79.9844 925.9609,81.375 Q926.625,82.7656 927.1563,82.7656 Q928.2188,82.7656 928.9766,82 Q929.7344,81.2344 930.0781,79.5781 L931.4063,80.1719 Q931.0781,81.5781 930.1797,82.4688 Q929.2813,83.3594 927.0781,83.3594 Z "></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="113" x="942.5" y="83.5576">DroidPluginManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="914.5" x2="1057.5" y1="94" y2="94"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="914.5" x2="1057.5" y1="102" y2="102"></line><rect fill="#FEFECE" filter="url(#f442xyq)" height="48" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="801.5" y="62"></rect><ellipse cx="816.5" cy="78" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"></ellipse><path d="M815.0781,83.3594 Q813.2188,83.3594 812.125,81.9688 Q811.0313,80.5781 811.0313,77.5938 Q811.0313,75.0625 812.1953,73.4063 Q813.3594,71.75 815.3438,71.75 Q816.8125,71.75 817.2813,71.875 Q817.75,72.0781 817.75,72.0781 Q817.75,72.0781 817.75,72.0078 Q817.75,71.9375 818.3594,71.0156 L819.4063,74.6719 L818.0781,75.0781 Q817.6094,73.5313 816.9453,72.8672 Q816.2813,72.2031 815.2188,72.2031 Q814.8281,72.2031 814.0625,73.7344 Q813.2969,75.2656 813.2969,77.5156 Q813.2969,79.9844 813.9609,81.375 Q814.625,82.7656 815.1563,82.7656 Q816.2188,82.7656 816.9766,82 Q817.7344,81.2344 818.0781,79.5781 L819.4063,80.1719 Q819.0781,81.5781 818.1797,82.4688 Q817.2813,83.3594 815.0781,83.3594 Z "></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="45" x="830.5" y="83.5576">PlugInfo</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="802.5" x2="877.5" y1="94" y2="94"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="802.5" x2="877.5" y1="102" y2="102"></line><rect fill="#FEFECE" filter="url(#f442xyq)" height="48" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="452.5" y="62"></rect><ellipse cx="467.5" cy="78" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"></ellipse><path d="M466.0781,83.3594 Q464.2188,83.3594 463.125,81.9688 Q462.0313,80.5781 462.0313,77.5938 Q462.0313,75.0625 463.1953,73.4063 Q464.3594,71.75 466.3438,71.75 Q467.8125,71.75 468.2813,71.875 Q468.75,72.0781 468.75,72.0781 Q468.75,72.0781 468.75,72.0078 Q468.75,71.9375 469.3594,71.0156 L470.4063,74.6719 L469.0781,75.0781 Q468.6094,73.5313 467.9453,72.8672 Q467.2813,72.2031 466.2188,72.2031 Q465.8281,72.2031 465.0625,73.7344 Q464.2969,75.2656 464.2969,77.5156 Q464.2969,79.9844 464.9609,81.375 Q465.625,82.7656 466.1563,82.7656 Q467.2188,82.7656 467.9766,82 Q468.7344,81.2344 469.0781,79.5781 L470.4063,80.1719 Q470.0781,81.5781 469.1797,82.4688 Q468.2813,83.3594 466.0781,83.3594 Z "></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="83" x="481.5" y="83.5576">PluginManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="453.5" x2="566.5" y1="94" y2="94"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="453.5" x2="566.5" y1="102" y2="102"></line><rect fill="#FEFECE" filter="url(#f442xyq)" height="48" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="603" y="62"></rect><ellipse cx="618" cy="78" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"></ellipse><path d="M616.5781,83.3594 Q614.7188,83.3594 613.625,81.9688 Q612.5313,80.5781 612.5313,77.5938 Q612.5313,75.0625 613.6953,73.4063 Q614.8594,71.75 616.8438,71.75 Q618.3125,71.75 618.7813,71.875 Q619.25,72.0781 619.25,72.0781 Q619.25,72.0781 619.25,72.0078 Q619.25,71.9375 619.8594,71.0156 L620.9063,74.6719 L619.5781,75.0781 Q619.1094,73.5313 618.4453,72.8672 Q617.7813,72.2031 616.7188,72.2031 Q616.3281,72.2031 615.5625,73.7344 Q614.7969,75.2656 614.7969,77.5156 Q614.7969,79.9844 615.4609,81.375 Q616.125,82.7656 616.6563,82.7656 Q617.7188,82.7656 618.4766,82 Q619.2344,81.2344 619.5781,79.5781 L620.9063,80.1719 Q620.5781,81.5781 619.6797,82.4688 Q618.7813,83.3594 616.5781,83.3594 Z "></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="110" x="632" y="83.5576">IPluginManagerImpl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="604" x2="744" y1="94" y2="94"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="604" x2="744" y1="102" y2="102"></line><rect fill="#FEFECE" filter="url(#f442xyq)" height="48" style="stroke: #A80036; stroke-width: 1.5;" width="152" x="452" y="170"></rect><ellipse cx="467" cy="186" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"></ellipse><path d="M465.5781,191.3594 Q463.7188,191.3594 462.625,189.9688 Q461.5313,188.5781 461.5313,185.5938 Q461.5313,183.0625 462.6953,181.4063 Q463.8594,179.75 465.8438,179.75 Q467.3125,179.75 467.7813,179.875 Q468.25,180.0781 468.25,180.0781 Q468.25,180.0781 468.25,180.0078 Q468.25,179.9375 468.8594,179.0156 L469.9063,182.6719 L468.5781,183.0781 Q468.1094,181.5313 467.4453,180.8672 Q466.7813,180.2031 465.7188,180.2031 Q465.3281,180.2031 464.5625,181.7344 Q463.7969,183.2656 463.7969,185.5156 Q463.7969,187.9844 464.4609,189.375 Q465.125,190.7656 465.6563,190.7656 Q466.7188,190.7656 467.4766,190 Q468.2344,189.2344 468.5781,187.5781 L469.9063,188.1719 Q469.5781,189.5781 468.6797,190.4688 Q467.7813,191.3594 465.5781,191.3594 Z "></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="120" x="481" y="191.5576">PluginPackageParser</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="453" x2="603" y1="202" y2="202"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="453" x2="603" y1="210" y2="210"></line></g></svg></div>
<p class="sync-line" data-line="47">上面的类图大体表述了插件系统的代码组织结构。</p>
<p class="sync-line" data-line="49"><code>Plugin Server Controll</code>部分的代码负责和服务器进行交互从服务器上拉取当前应用对应的插件配置，根据这些配置对系统当前使用的配置进行校验（插件更新以及删除无用的插件，不包含本地插件）。而对于本地插件，这里只负责对本地插件信息进行保存和创建对应的<code>Plugin</code>对象。</p>
<p class="sync-line" data-line="51"><code>DroidPlugin Logic</code>是原本<code>DroidPlugin</code>开源库的逻辑内容。其中包含插件安装的实际操作，插件运行的原理内容。</p>
<p class="sync-line" data-line="53"><code>Open API</code>部分对整个SDK的功能进行抽象并开放对应的逻辑接口给使用SDK的应用程序。</p>
<h2 class="sync-line" data-line="55" id="&#x5173;&#x952E;&#x6D41;&#x7A0B;">关键流程</h2>
<h3 class="sync-line" data-line="57" id="&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x62C9;&#x53D6;&#x63D2;&#x4EF6;&#x914D;&#x7F6E;&#x548C;&#x66F4;&#x65B0;&#x672C;&#x5730;&#x63D2;&#x4EF6;&#x6570;&#x636E;&#x6D41;&#x7A0B;">从服务器拉取插件配置和更新本地插件数据流程</h3>
<div class="plantuml"><!--?xml version="1.0" encoding="UTF-8" standalone="yes"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="651px" style="width:553px;height:651px;" version="1.1" viewbox="0 0 553 651" width="553px"><defs><filter height="300%" id="fasgeb0" width="300%" x="-1" y="-1"><fegaussianblur result="blurOut" stddeviation="2.0"></fegaussianblur><fecolormatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></fecolormatrix><feoffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feoffset><feblend in="SourceGraphic" in2="blurOut3" mode="normal"></feblend></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthadjust="spacingAndGlyphs" textlength="324" x="116.125" y="30.6279">从服务器拉取插件配置进行插件更新流程</text><ellipse cx="354.25" cy="44.583" fill="#000000" filter="url(#fasgeb0)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"></ellipse><rect fill="#FEFECE" filter="url(#fasgeb0)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="384" x="162.25" y="74.583"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="361" x="175.25" y="98.335">向服务器请求当前应用插件配置，参数：appID, appVer, market, uid</text><polygon fill="#FEFECE" filter="url(#fasgeb0)" points="323.75,130.9717,384.75,130.9717,396.75,142.9717,384.75,154.9717,323.75,154.9717,311.75,142.9717,323.75,130.9717" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="55" x="326.75" y="148.0662">请求成功？</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="42" x="269.75" y="140.5547">success</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="14" x="396.75" y="140.5547">fail</text><rect fill="#FEFECE" filter="url(#fasgeb0)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="197" x="134" y="164.9717"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="174" x="147" y="188.7236">解析 json 获取最新远端插件列表</text><rect fill="#FEFECE" filter="url(#fasgeb0)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="167" y="221.3604"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="108" x="180" y="245.1123">获取原有的插件列表</text><rect fill="#FEFECE" filter="url(#fasgeb0)" height="52.7773" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="185" x="140" y="277.749"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="132" x="153" y="301.501">将新插件列表保存到本地</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="165" x="150" y="317.8896">并创建每个插件对应的PlugInfo</text><rect fill="#FEFECE" filter="url(#fasgeb0)" height="52.7773" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="167" x="149" y="350.5264"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="144" x="162" y="374.2783">获取本地插件列表并对每个</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="129" x="159" y="390.667">插件创建对应的PlugInfo</text><polygon fill="#FEFECE" filter="url(#fasgeb0)" points="48,467.3037,153,467.3037,165,479.3037,153,491.3037,48,491.3037,36,479.3037,48,467.3037" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="24" x="104.5" y="503.9097">yeas</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="99" x="51" y="484.3982">旧列表项可以删除？</text><rect fill="#FEFECE" filter="url(#fasgeb0)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="53" y="526.3267"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="72" x="66" y="550.0786">删除旧列表项</text><polygon fill="#FEFECE" filter="url(#fasgeb0)" points="197,467.3037,302,467.3037,314,479.3037,302,491.3037,197,491.3037,185,479.3037,197,467.3037" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="24" x="253.5" y="503.9097">yeas</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="99" x="200" y="484.3982">旧列表项需要更新？</text><rect fill="#FEFECE" filter="url(#fasgeb0)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="202" y="526.3267"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="72" x="215" y="550.0786">更新旧列表项</text><rect fill="#FEFECE" filter="url(#fasgeb0)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="334" y="521.8152"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="72" x="347" y="545.5671">下载对应插件</text><polygon fill="#FEFECE" filter="url(#fasgeb0)" points="180,423.3037,285,423.3037,297,435.3037,285,447.3037,180,447.3037,168,435.3037,180,423.3037" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="99" x="183" y="440.3982">对旧列表项进行遍历</text><ellipse cx="232.5" cy="634.7153" fill="#FFFFFF" filter="url(#fasgeb0)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"></ellipse><line style="stroke: #000000; stroke-width: 2.5;" x1="226.3128" x2="238.6872" y1="628.5281" y2="640.9025"></line><line style="stroke: #000000; stroke-width: 2.5;" x1="238.6872" x2="226.3128" y1="628.5281" y2="640.9025"></line><ellipse cx="476" cy="174.9717" fill="#FFFFFF" filter="url(#fasgeb0)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"></ellipse><line style="stroke: #000000; stroke-width: 2.5;" x1="469.8128" x2="482.1872" y1="168.7845" y2="181.1589"></line><line style="stroke: #000000; stroke-width: 2.5;" x1="482.1872" x2="469.8128" y1="168.7845" y2="181.1589"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="354.25" x2="354.25" y1="54.583" y2="74.583"></line><polygon fill="#A80036" points="350.25,64.583,354.25,74.583,358.25,64.583,354.25,68.583" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="232.5" x2="232.5" y1="201.3604" y2="221.3604"></line><polygon fill="#A80036" points="228.5,211.3604,232.5,221.3604,236.5,211.3604,232.5,215.3604" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="232.5" x2="232.5" y1="257.749" y2="277.749"></line><polygon fill="#A80036" points="228.5,267.749,232.5,277.749,236.5,267.749,232.5,271.749" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="232.5" x2="232.5" y1="330.5264" y2="350.5264"></line><polygon fill="#A80036" points="228.5,340.5264,232.5,350.5264,236.5,340.5264,232.5,344.5264" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="100.5" x2="100.5" y1="491.3037" y2="526.3267"></line><polygon fill="#A80036" points="96.5,516.3267,100.5,526.3267,104.5,516.3267,100.5,520.3267" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="100.5" x2="100.5" y1="562.7153" y2="582.7153"></line><polygon fill="#A80036" points="96.5,572.7153,100.5,582.7153,104.5,572.7153,100.5,576.7153" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="249.5" x2="249.5" y1="491.3037" y2="526.3267"></line><polygon fill="#A80036" points="245.5,516.3267,249.5,526.3267,253.5,516.3267,249.5,520.3267" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="249.5" x2="249.5" y1="562.7153" y2="582.7153"></line><polygon fill="#A80036" points="245.5,572.7153,249.5,582.7153,253.5,572.7153,249.5,576.7153" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="165" x2="185" y1="479.3037" y2="479.3037"></line><polygon fill="#A80036" points="175,475.3037,185,479.3037,175,483.3037,179,479.3037" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="232.5" x2="232.5" y1="447.3037" y2="452.3037"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="232.5" x2="100.5" y1="452.3037" y2="452.3037"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="100.5" x2="100.5" y1="452.3037" y2="467.3037"></line><polygon fill="#A80036" points="96.5,457.3037,100.5,467.3037,104.5,457.3037,100.5,461.3037" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="314" x2="381.5" y1="479.3037" y2="479.3037"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="381.5" x2="381.5" y1="479.3037" y2="521.8152"></line><polygon fill="#A80036" points="377.5,511.8152,381.5,521.8152,385.5,511.8152,381.5,515.8152" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="381.5" x2="381.5" y1="558.2039" y2="582.7153"></line><polygon fill="#A80036" points="377.5,572.7153,381.5,582.7153,385.5,572.7153,381.5,576.7153" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="100.5" x2="381.5" y1="582.7153" y2="582.7153"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="232.5" x2="232.5" y1="582.7153" y2="592.7153"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="232.5" x2="441" y1="592.7153" y2="592.7153"></line><polygon fill="#A80036" points="437,538.0095,441,528.0095,445,538.0095,441,534.0095" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="441" x2="441" y1="435.3037" y2="592.7153"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="441" x2="297" y1="435.3037" y2="435.3037"></line><polygon fill="#A80036" points="307,431.3037,297,435.3037,307,439.3037,303,435.3037" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="168" x2="24" y1="435.3037" y2="435.3037"></line><polygon fill="#A80036" points="20,524.0095,24,534.0095,28,524.0095,24,528.0095" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="24" x2="24" y1="435.3037" y2="604.7153"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="24" x2="232.5" y1="604.7153" y2="604.7153"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="232.5" x2="232.5" y1="604.7153" y2="624.7153"></line><polygon fill="#A80036" points="228.5,614.7153,232.5,624.7153,236.5,614.7153,232.5,618.7153" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="232.5" x2="232.5" y1="403.3037" y2="423.3037"></line><polygon fill="#A80036" points="228.5,413.3037,232.5,423.3037,236.5,413.3037,232.5,417.3037" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="311.75" x2="232.5" y1="142.9717" y2="142.9717"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="232.5" x2="232.5" y1="142.9717" y2="164.9717"></line><polygon fill="#A80036" points="228.5,154.9717,232.5,164.9717,236.5,154.9717,232.5,158.9717" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="396.75" x2="476" y1="142.9717" y2="142.9717"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="476" x2="476" y1="142.9717" y2="164.9717"></line><polygon fill="#A80036" points="472,154.9717,476,164.9717,480,154.9717,476,158.9717" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="354.25" x2="354.25" y1="110.9717" y2="130.9717"></line><polygon fill="#A80036" points="350.25,120.9717,354.25,130.9717,358.25,120.9717,354.25,124.9717" style="stroke: #A80036; stroke-width: 1.0;"></polygon></g></svg></div>
<div class="plantuml"><!--?xml version="1.0" encoding="UTF-8" standalone="yes"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="660px" style="width:809px;height:660px;" version="1.1" viewbox="0 0 809 660" width="809px"><defs><filter height="300%" id="fcb3z0b" width="300%" x="-1" y="-1"><fegaussianblur result="blurOut" stddeviation="2.0"></fegaussianblur><fecolormatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></fecolormatrix><feoffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feoffset><feblend in="SourceGraphic" in2="blurOut3" mode="normal"></feblend></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="270" x="271.5" y="26.0439">从服务器拉取插件配置进行插件更新流程</text><rect fill="#FFFFFF" filter="url(#fcb3z0b)" height="471.6074" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="253" y="138.9946"></rect><rect fill="#FFFFFF" filter="url(#fcb3z0b)" height="31.7544" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="427.5" y="170.749"></rect><rect fill="#FFFFFF" filter="url(#fcb3z0b)" height="69.5088" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="427.5" y="234.2578"></rect><rect fill="#FFFFFF" filter="url(#fcb3z0b)" height="134.0635" style="stroke: #000000; stroke-width: 2.0;" width="649.5" x="150.5" y="326.521"></rect><rect fill="#FFFFFF" filter="url(#fcb3z0b)" height="100.3091" style="stroke: #000000; stroke-width: 2.0;" width="629.5" x="160.5" y="353.2754"></rect><rect fill="#FFFFFF" height="48.7773" style="stroke: none; stroke-width: 1.0;" width="629.5" x="160.5" y="404.8071"></rect><rect fill="#FFFFFF" filter="url(#fcb3z0b)" height="64.5088" style="stroke: #000000; stroke-width: 2.0;" width="219.5" x="160.5" y="538.0933"></rect><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="257.5" x2="257.5" y1="74.2402" y2="619.6021"></line><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="432.5" x2="432.5" y1="74.2402" y2="619.6021"></line><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="652" x2="652" y1="74.2402" y2="619.6021"></line><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="758" x2="758" y1="74.2402" y2="619.6021"></line><rect fill="#FEFECE" filter="url(#fcb3z0b)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="170.5" y="36.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="157" x="177.5" y="59.1641">PluginDownloadManager</text><rect fill="#FEFECE" filter="url(#fcb3z0b)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="170.5" y="618.6021"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="157" x="177.5" y="641.646">PluginDownloadManager</text><rect fill="#FEFECE" filter="url(#fcb3z0b)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="355.5" y="36.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="136" x="362.5" y="59.1641">PluginConfigManager</text><rect fill="#FEFECE" filter="url(#fcb3z0b)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="355.5" y="618.6021"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="136" x="362.5" y="641.646">PluginConfigManager</text><rect fill="#FEFECE" filter="url(#fcb3z0b)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="143" x="579" y="36.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="129" x="586" y="59.1641">DroidPluginManager</text><rect fill="#FEFECE" filter="url(#fcb3z0b)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="143" x="579" y="618.6021"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="129" x="586" y="641.646">DroidPluginManager</text><rect fill="#FEFECE" filter="url(#fcb3z0b)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="40" x="736" y="36.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="26" x="743" y="59.1641">Utils</text><rect fill="#FEFECE" filter="url(#fcb3z0b)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="40" x="736" y="618.6021"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="26" x="743" y="641.646">Utils</text><rect fill="#FFFFFF" filter="url(#fcb3z0b)" height="471.6074" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="253" y="138.9946"></rect><rect fill="#FFFFFF" filter="url(#fcb3z0b)" height="31.7544" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="427.5" y="170.749"></rect><rect fill="#FFFFFF" filter="url(#fcb3z0b)" height="69.5088" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="427.5" y="234.2578"></rect><polygon fill="#A80036" points="420.5,103.2402,430.5,107.2402,420.5,111.2402,424.5,107.2402" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="426.5" y1="107.2402" y2="107.2402"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="84" x="10" y="103.1382">readFromFile()</text><polygon fill="#A80036" points="241,134.9946,251,138.9946,241,142.9946,245,138.9946" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="247" y1="138.9946" y2="138.9946"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="231" x="10" y="134.8926">queryPlugin(appID, appVer, market, uid)</text><polygon fill="#A80036" points="415.5,166.749,425.5,170.749,415.5,174.749,419.5,170.749" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="263" x2="421.5" y1="170.749" y2="170.749"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="128" x="270" y="166.647">getRemotePluginList()</text><polygon fill="#A80036" points="274,198.5034,264,202.5034,274,206.5034,270,202.5034" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="268" x2="431.5" y1="202.5034" y2="202.5034"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="74" x="280" y="198.4014">oldPluginList</text><polygon fill="#A80036" points="415.5,230.2578,425.5,234.2578,415.5,238.2578,419.5,234.2578" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="263" x2="421.5" y1="234.2578" y2="234.2578"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="141" x="270" y="230.1558">updatePluginFromServer</text><polygon fill="#A80036" points="640.5,262.0122,650.5,266.0122,640.5,270.0122,644.5,266.0122" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="437.5" x2="646.5" y1="266.0122" y2="266.0122"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="191" x="444.5" y="261.9102">create PlugInfo (Remote &amp; Local)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="437.5" x2="479.5" y1="303.521" y2="303.521"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="479.5" x2="479.5" y1="303.521" y2="316.521"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="432.5" x2="479.5" y1="316.521" y2="316.521"></line><polygon fill="#A80036" points="442.5,312.521,432.5,316.521,442.5,320.521,438.5,316.521" style="stroke: #A80036; stroke-width: 1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="62" x="444.5" y="298.6646">writeToFile</text><rect fill="none" height="134.0635" style="stroke: #000000; stroke-width: 2.0;" width="649.5" x="150.5" y="326.521"></rect><polygon fill="#EEEEEE" points="150.5,326.521,330.5,326.521,330.5,335.521,320.5,345.521,150.5,345.521,150.5,326.521" style="stroke: #000000; stroke-width: 2.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="135" x="165.5" y="342.4189">oldPluginList.foreach</text><rect fill="none" height="100.3091" style="stroke: #000000; stroke-width: 2.0;" width="629.5" x="160.5" y="353.2754"></rect><polygon fill="#EEEEEE" points="160.5,353.2754,221.5,353.2754,221.5,362.2754,211.5,372.2754,160.5,372.2754,160.5,353.2754" style="stroke: #000000; stroke-width: 2.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="16" x="175.5" y="369.1733">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="115" x="236.5" y="367.8813">[isPluginNeedDelete]</text><polygon fill="#A80036" points="640.5,392.0527,650.5,396.0527,640.5,400.0527,644.5,396.0527" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="263" x2="646.5" y1="396.0527" y2="396.0527"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="79" x="270" y="391.9507">deletePlugin()</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="160.5" x2="790" y1="405.8071" y2="405.8071"></line><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="118" x="165.5" y="418.4131">[isPluginNeedUpdate]</text><polygon fill="#A80036" points="746,440.8301,756,444.8301,746,448.8301,750,444.8301" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="263" x2="752" y1="444.8301" y2="444.8301"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="60" x="270" y="440.728">emptyDir()</text><polygon fill="#A80036" points="420.5,486.5845,430.5,490.5845,420.5,494.5845,424.5,490.5845" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="263" x2="426.5" y1="490.5845" y2="490.5845"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="128" x="270" y="486.4824">getRemotePluginList()</text><polygon fill="#A80036" points="274,518.3389,264,522.3389,274,526.3389,270,522.3389" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="268" x2="431.5" y1="522.3389" y2="522.3389"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="80" x="280" y="518.2368">newPluginList</text><rect fill="none" height="64.5088" style="stroke: #000000; stroke-width: 2.0;" width="219.5" x="160.5" y="538.0933"></rect><polygon fill="#EEEEEE" points="160.5,538.0933,347.5,538.0933,347.5,547.0933,337.5,557.0933,160.5,557.0933,160.5,538.0933" style="stroke: #000000; stroke-width: 2.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="142" x="175.5" y="553.9912">newPluginList.foreach</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="263" x2="305" y1="581.6021" y2="581.6021"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="305" x2="305" y1="581.6021" y2="594.6021"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="264" x2="305" y1="594.6021" y2="594.6021"></line><polygon fill="#A80036" points="274,590.6021,264,594.6021,274,598.6021,270,594.6021" style="stroke: #A80036; stroke-width: 1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="98" x="270" y="576.7456">downloadPlugin()</text></g></svg></div>
<p class="sync-line" data-line="126">上图表述的是向服务器请求该应用当前插件配置列表，并和当前本地保存的插件列表进行交叉对比，更新插件的流程。</p>
<p class="sync-line" data-line="128">在向服务器发送请求获取当前应用的插件配置列表的时候，需要携带下面的几个参数：
<code>appID</code>: 应用程序ID
<code>appVersion</code>: 对应的应用程序的版本
<code>market</code>：针对特定的市场渠道
<code>uid</code>：针对特定的uid</p>
<p class="sync-line" data-line="134">在成功查询到最新的配置列表之后，会将该配置列表保存到本地配置文件中然后对当前系统中的每个插件（Remote &amp; Local）创建对应的<code>PlugInfo</code>对象。在完成这些工作之后，继续对最开始获取到的旧插件列表（Remote）进行校验，校验的内容包括该插件是否已经启用，该插件是否需要进行升级。完成旧版本插件列表校验之后将会执行最后的下载操作，针对新插件列表（Remote）中需要下载的进行下载操作。</p>
<p class="sync-line" data-line="136">在整个流程中，旧版本插件列表(Remote)的校验完成后主要执行的对于插件存储系统中保存的插件文件信息，因为<code>Plugin/PlugInfo</code>在最开始的时候就已经被更新掉。此外，整个下载更新的流程对于<code>Disenable</code>的插件不会做任何的限制，这个标识只会在插件安装，尝试使用插件的时候产生影响。</p>
<h3 class="sync-line" data-line="138" id="&#x5DF2;&#x5B89;&#x88C5;&#x63D2;&#x4EF6;&#x4FE1;&#x606F;&#x6062;&#x590D;&#x6D41;&#x7A0B;">已安装插件信息恢复流程</h3>
<div class="plantuml"><!--?xml version="1.0" encoding="UTF-8" standalone="yes"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="1366px" style="width:1110px;height:1366px;" version="1.1" viewbox="0 0 1110 1366" width="1110px"><defs><filter height="300%" id="ft6wjer" width="300%" x="-1" y="-1"><fegaussianblur result="blurOut" stddeviation="2.0"></fegaussianblur><fecolormatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></fecolormatrix><feoffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feoffset><feblend in="SourceGraphic" in2="blurOut3" mode="normal"></feblend></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthadjust="spacingAndGlyphs" textlength="198" x="457.9375" y="30.6279">已安装插件信息恢复流程</text><ellipse cx="707.8125" cy="44.583" fill="#000000" filter="url(#ft6wjer)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"></ellipse><polygon fill="#FEFECE" filter="url(#ft6wjer)" points="666.3125,74.583,749.3125,74.583,761.3125,86.583,749.3125,98.583,666.3125,98.583,654.3125,86.583,666.3125,74.583" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="77" x="669.3125" y="91.6775">启动插件的方式</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="40" x="611.3125" y="84.166">preLoad</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="27" x="764.3125" y="84.166">install</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="397.5" y="108.583"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="107" x="410.5" y="132.335">加载指定的APK文件</text><rect fill="#FFFFFF" filter="url(#ft6wjer)" height="644.4521" style="stroke: #000000; stroke-width: 2.0;" width="630" x="10" y="164.9717"></rect><path d="M152,165.9717 L152,177.0918 L142,187.0918 L10,187.0918 " fill="#FFFFFF" style="stroke: #000000; stroke-width: 2.0;"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="132" x="13" y="182.0156">创建apk对应的Plugin</text><polygon fill="#FEFECE" filter="url(#ft6wjer)" points="429,204.0918,496,204.0918,508,216.0918,496,228.0918,429,228.0918,417,216.0918,429,204.0918" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="61" x="432" y="221.1863">apk文件存在</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="24" x="393" y="213.6748">yeas</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="12" x="511" y="213.6748">no</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="194" x="247" y="238.0918"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="171" x="260" y="261.8438">创建apk文件对应的packageinfo</text><polygon fill="#FEFECE" filter="url(#ft6wjer)" points="289.5,309.4805,398.5,309.4805,410.5,321.4805,398.5,333.4805,289.5,333.4805,277.5,321.4805,289.5,309.4805" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="103" x="292.5" y="326.575">PackageInfo成功获取</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="24" x="250.5" y="319.0635">yeas</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="12" x="413.5" y="319.0635">no</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="155.5" y="343.4805"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="96" x="168.5" y="367.2324">获取该文件的包名</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="226" x="102" y="414.8691"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="203" x="115" y="438.6211">根据包名尝试从本地缓存中获取Plugin</text><polygon fill="#FEFECE" filter="url(#ft6wjer)" points="170.5,486.2578,259.5,486.2578,271.5,498.2578,259.5,510.2578,170.5,510.2578,158.5,498.2578,170.5,486.2578" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="86" x="173.5" y="503.3523">Plugin 成功获取到</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="24" x="131.5" y="495.8408">yeas</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="12" x="274.5" y="495.8408">no</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="143" x="50" y="520.2578"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="120" x="63" y="544.0098">返回获取到的缓存对象</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="154" x="231.5" y="520.2578"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="131" x="244.5" y="544.0098">根据当前信息创建Plugin</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="191" x="213" y="591.6465"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="168" x="226" y="615.3984">将创建出来的对象保存到缓存中</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="249" y="663.0352"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="96" x="262" y="686.7871">返回新创建的对象</text><polygon fill="#FEFECE" filter="url(#ft6wjer)" points="215,705.4238,227,717.4238,215,729.4238,203,717.4238,215,705.4238" style="stroke: #A80036; stroke-width: 1.5;"></polygon><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="434" y="343.4805"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="55" x="447" y="367.2324">return null</text><polygon fill="#FEFECE" filter="url(#ft6wjer)" points="344,735.4238,356,747.4238,344,759.4238,332,747.4238,344,735.4238" style="stroke: #A80036; stroke-width: 1.5;"></polygon><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="542" y="238.0918"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="55" x="555" y="261.8438">return null</text><polygon fill="#FEFECE" filter="url(#ft6wjer)" points="462.5,765.4238,474.5,777.4238,462.5,789.4238,450.5,777.4238,462.5,765.4238" style="stroke: #A80036; stroke-width: 1.5;"></polygon><rect fill="#FFFFFF" filter="url(#ft6wjer)" height="509.0635" style="stroke: #000000; stroke-width: 2.0;" width="514" x="256.875" y="820"></rect><path d="M387.875,821 L387.875,832.1201 L377.875,842.1201 L256.875,842.1201 " fill="#FFFFFF" style="stroke: #000000; stroke-width: 2.0;"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="121" x="259.875" y="837.0439">创建对应的PlugInfo</text><polygon fill="#FEFECE" filter="url(#ft6wjer)" points="428.5,859.1201,496.5,859.1201,508.5,871.1201,496.5,883.1201,428.5,883.1201,416.5,871.1201,428.5,859.1201" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="62" x="431.5" y="876.2146">Plugin == null</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="19" x="394.5" y="868.7031">true</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="24" x="511.5" y="868.7031">false</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="107" x="276.875" y="893.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="84" x="289.875" y="916.8721">预加载发生错误</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="291.375" y="964.5088"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="55" x="304.375" y="988.2607">return null</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="200" x="494.625" y="893.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="177" x="507.625" y="916.8721">尝试从缓存中获取对应的PlugInfo</text><polygon fill="#FEFECE" filter="url(#ft6wjer)" points="555.625,964.5088,633.625,964.5088,645.625,976.5088,633.625,988.5088,555.625,988.5088,543.625,976.5088,555.625,964.5088" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="72" x="558.625" y="981.6033">PlugInfo == null</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="24" x="516.625" y="974.0918">yeas</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="12" x="648.625" y="974.0918">no</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="420.375" y="998.5088"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="152" x="433.375" y="1022.2607">为Plugin创建对应的PlguInfo</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="107" x="454.375" y="1069.8975"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="84" x="467.375" y="1093.6494">执行预加载操作</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="188" x="413.875" y="1141.2861"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="165" x="426.875" y="1165.0381">将创建的PlugInfo保存到缓存中</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="443.875" y="1212.6748"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="105" x="456.875" y="1236.4268">返回新建的PlugInfo</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="621.875" y="998.5088"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="96" x="634.875" y="1022.2607">返回获取到的缓存</text><polygon fill="#FEFECE" filter="url(#ft6wjer)" points="594.625,1255.0635,606.625,1267.0635,594.625,1279.0635,582.625,1267.0635,594.625,1255.0635" style="stroke: #A80036; stroke-width: 1.5;"></polygon><polygon fill="#FEFECE" filter="url(#ft6wjer)" points="462.5,1285.0635,474.5,1297.0635,462.5,1309.0635,450.5,1297.0635,462.5,1285.0635" style="stroke: #A80036; stroke-width: 1.5;"></polygon><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="889.625" y="108.583"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="104" x="902.625" y="132.335">加载指定的apk文件</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="255" x="825.625" y="164.9717"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="232" x="838.625" y="188.7236">使用和Preload相同的方式尝试获取PlugInfo</text><polygon fill="#FEFECE" filter="url(#ft6wjer)" points="914.125,236.3604,992.125,236.3604,1004.125,248.3604,992.125,260.3604,914.125,260.3604,902.125,248.3604,914.125,236.3604" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="72" x="917.125" y="253.4548">PlugInfo == null</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="24" x="875.125" y="245.9434">yeas</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="12" x="1007.125" y="245.9434">no</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="143" x="800.875" y="270.3604"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="120" x="813.875" y="294.1123">安装本地插件发生错误</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="833.375" y="341.749"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="55" x="846.375" y="365.501">return null</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="981.875" y="270.3604"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="81" x="994.875" y="294.1123">执行install操作</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="986.375" y="341.749"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="72" x="999.375" y="365.501">保存到缓存中</text><rect fill="#FEFECE" filter="url(#ft6wjer)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="963.875" y="413.1377"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="117" x="976.875" y="436.8896">返回获取到的PlugInfo</text><polygon fill="#FEFECE" filter="url(#ft6wjer)" points="953.125,455.5264,965.125,467.5264,953.125,479.5264,941.125,467.5264,953.125,455.5264" style="stroke: #A80036; stroke-width: 1.5;"></polygon><polygon fill="#FEFECE" filter="url(#ft6wjer)" points="707.8125,1335.0635,719.8125,1347.0635,707.8125,1359.0635,695.8125,1347.0635,707.8125,1335.0635" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="215" x2="215" y1="379.8691" y2="414.8691"></line><polygon fill="#A80036" points="211,404.8691,215,414.8691,219,404.8691,215,408.8691" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="308.5" x2="308.5" y1="556.6465" y2="591.6465"></line><polygon fill="#A80036" points="304.5,581.6465,308.5,591.6465,312.5,581.6465,308.5,585.6465" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="308.5" x2="308.5" y1="628.0352" y2="663.0352"></line><polygon fill="#A80036" points="304.5,653.0352,308.5,663.0352,312.5,653.0352,308.5,657.0352" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="158.5" x2="121.5" y1="498.2578" y2="498.2578"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="121.5" x2="121.5" y1="498.2578" y2="520.2578"></line><polygon fill="#A80036" points="117.5,510.2578,121.5,520.2578,125.5,510.2578,121.5,514.2578" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="271.5" x2="308.5" y1="498.2578" y2="498.2578"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="308.5" x2="308.5" y1="498.2578" y2="520.2578"></line><polygon fill="#A80036" points="304.5,510.2578,308.5,520.2578,312.5,510.2578,308.5,514.2578" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="121.5" x2="121.5" y1="556.6465" y2="717.4238"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="121.5" x2="203" y1="717.4238" y2="717.4238"></line><polygon fill="#A80036" points="193,713.4238,203,717.4238,193,721.4238,197,717.4238" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="308.5" x2="308.5" y1="699.4238" y2="717.4238"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="308.5" x2="227" y1="717.4238" y2="717.4238"></line><polygon fill="#A80036" points="237,713.4238,227,717.4238,237,721.4238,233,717.4238" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="215" x2="215" y1="451.2578" y2="486.2578"></line><polygon fill="#A80036" points="211,476.2578,215,486.2578,219,476.2578,215,480.2578" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="277.5" x2="215" y1="321.4805" y2="321.4805"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="215" x2="215" y1="321.4805" y2="343.4805"></line><polygon fill="#A80036" points="211,333.4805,215,343.4805,219,333.4805,215,337.4805" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="410.5" x2="473" y1="321.4805" y2="321.4805"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="473" x2="473" y1="321.4805" y2="343.4805"></line><polygon fill="#A80036" points="469,333.4805,473,343.4805,477,333.4805,473,337.4805" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="215" x2="215" y1="729.4238" y2="747.4238"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="215" x2="332" y1="747.4238" y2="747.4238"></line><polygon fill="#A80036" points="322,743.4238,332,747.4238,322,751.4238,326,747.4238" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="473" x2="473" y1="379.8691" y2="747.4238"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="473" x2="356" y1="747.4238" y2="747.4238"></line><polygon fill="#A80036" points="366,743.4238,356,747.4238,366,751.4238,362,747.4238" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="344" x2="344" y1="274.4805" y2="309.4805"></line><polygon fill="#A80036" points="340,299.4805,344,309.4805,348,299.4805,344,303.4805" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="417" x2="344" y1="216.0918" y2="216.0918"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="344" x2="344" y1="216.0918" y2="238.0918"></line><polygon fill="#A80036" points="340,228.0918,344,238.0918,348,228.0918,344,232.0918" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="508" x2="581" y1="216.0918" y2="216.0918"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="581" x2="581" y1="216.0918" y2="238.0918"></line><polygon fill="#A80036" points="577,228.0918,581,238.0918,585,228.0918,581,232.0918" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="344" x2="344" y1="759.4238" y2="777.4238"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="344" x2="450.5" y1="777.4238" y2="777.4238"></line><polygon fill="#A80036" points="440.5,773.4238,450.5,777.4238,440.5,781.4238,444.5,777.4238" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="581" x2="581" y1="274.4805" y2="777.4238"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="581" x2="474.5" y1="777.4238" y2="777.4238"></line><polygon fill="#A80036" points="484.5,773.4238,474.5,777.4238,484.5,781.4238,480.5,777.4238" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="462.5" x2="462.5" y1="144.9717" y2="204.0918"></line><polygon fill="#A80036" points="458.5,194.0918,462.5,204.0918,466.5,194.0918,462.5,198.0918" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="330.375" x2="330.375" y1="929.5088" y2="964.5088"></line><polygon fill="#A80036" points="326.375,954.5088,330.375,964.5088,334.375,954.5088,330.375,958.5088" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="507.875" x2="507.875" y1="1034.8975" y2="1069.8975"></line><polygon fill="#A80036" points="503.875,1059.8975,507.875,1069.8975,511.875,1059.8975,507.875,1063.8975" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="507.875" x2="507.875" y1="1106.2861" y2="1141.2861"></line><polygon fill="#A80036" points="503.875,1131.2861,507.875,1141.2861,511.875,1131.2861,507.875,1135.2861" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="507.875" x2="507.875" y1="1177.6748" y2="1212.6748"></line><polygon fill="#A80036" points="503.875,1202.6748,507.875,1212.6748,511.875,1202.6748,507.875,1206.6748" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="543.625" x2="507.875" y1="976.5088" y2="976.5088"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="507.875" x2="507.875" y1="976.5088" y2="998.5088"></line><polygon fill="#A80036" points="503.875,988.5088,507.875,998.5088,511.875,988.5088,507.875,992.5088" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="645.625" x2="681.375" y1="976.5088" y2="976.5088"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="681.375" x2="681.375" y1="976.5088" y2="998.5088"></line><polygon fill="#A80036" points="677.375,988.5088,681.375,998.5088,685.375,988.5088,681.375,992.5088" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="507.875" x2="507.875" y1="1249.0635" y2="1267.0635"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="507.875" x2="582.625" y1="1267.0635" y2="1267.0635"></line><polygon fill="#A80036" points="572.625,1263.0635,582.625,1267.0635,572.625,1271.0635,576.625,1267.0635" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="681.375" x2="681.375" y1="1034.8975" y2="1267.0635"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="681.375" x2="606.625" y1="1267.0635" y2="1267.0635"></line><polygon fill="#A80036" points="616.625,1263.0635,606.625,1267.0635,616.625,1271.0635,612.625,1267.0635" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="594.625" x2="594.625" y1="929.5088" y2="964.5088"></line><polygon fill="#A80036" points="590.625,954.5088,594.625,964.5088,598.625,954.5088,594.625,958.5088" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="416.5" x2="330.375" y1="871.1201" y2="871.1201"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="330.375" x2="330.375" y1="871.1201" y2="893.1201"></line><polygon fill="#A80036" points="326.375,883.1201,330.375,893.1201,334.375,883.1201,330.375,887.1201" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="508.5" x2="594.625" y1="871.1201" y2="871.1201"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="594.625" x2="594.625" y1="871.1201" y2="893.1201"></line><polygon fill="#A80036" points="590.625,883.1201,594.625,893.1201,598.625,883.1201,594.625,887.1201" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="330.375" x2="330.375" y1="1000.8975" y2="1297.0635"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="330.375" x2="450.5" y1="1297.0635" y2="1297.0635"></line><polygon fill="#A80036" points="440.5,1293.0635,450.5,1297.0635,440.5,1301.0635,444.5,1297.0635" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="594.625" x2="594.625" y1="1279.0635" y2="1297.0635"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="594.625" x2="474.5" y1="1297.0635" y2="1297.0635"></line><polygon fill="#A80036" points="484.5,1293.0635,474.5,1297.0635,484.5,1301.0635,480.5,1297.0635" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="462.5" x2="462.5" y1="789.4238" y2="859.1201"></line><polygon fill="#A80036" points="458.5,849.1201,462.5,859.1201,466.5,849.1201,462.5,853.1201" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="953.125" x2="953.125" y1="144.9717" y2="164.9717"></line><polygon fill="#A80036" points="949.125,154.9717,953.125,164.9717,957.125,154.9717,953.125,158.9717" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="872.375" x2="872.375" y1="306.749" y2="341.749"></line><polygon fill="#A80036" points="868.375,331.749,872.375,341.749,876.375,331.749,872.375,335.749" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="1033.875" x2="1033.875" y1="306.749" y2="341.749"></line><polygon fill="#A80036" points="1029.875,331.749,1033.875,341.749,1037.875,331.749,1033.875,335.749" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="1033.875" x2="1033.875" y1="378.1377" y2="413.1377"></line><polygon fill="#A80036" points="1029.875,403.1377,1033.875,413.1377,1037.875,403.1377,1033.875,407.1377" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="902.125" x2="872.375" y1="248.3604" y2="248.3604"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="872.375" x2="872.375" y1="248.3604" y2="270.3604"></line><polygon fill="#A80036" points="868.375,260.3604,872.375,270.3604,876.375,260.3604,872.375,264.3604" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="1004.125" x2="1033.875" y1="248.3604" y2="248.3604"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="1033.875" x2="1033.875" y1="248.3604" y2="270.3604"></line><polygon fill="#A80036" points="1029.875,260.3604,1033.875,270.3604,1037.875,260.3604,1033.875,264.3604" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="872.375" x2="872.375" y1="378.1377" y2="467.5264"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="872.375" x2="941.125" y1="467.5264" y2="467.5264"></line><polygon fill="#A80036" points="931.125,463.5264,941.125,467.5264,931.125,471.5264,935.125,467.5264" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="1033.875" x2="1033.875" y1="449.5264" y2="467.5264"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="1033.875" x2="965.125" y1="467.5264" y2="467.5264"></line><polygon fill="#A80036" points="975.125,463.5264,965.125,467.5264,975.125,471.5264,971.125,467.5264" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="953.125" x2="953.125" y1="201.3604" y2="236.3604"></line><polygon fill="#A80036" points="949.125,226.3604,953.125,236.3604,957.125,226.3604,953.125,230.3604" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="654.3125" x2="462.5" y1="86.583" y2="86.583"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="462.5" x2="462.5" y1="86.583" y2="108.583"></line><polygon fill="#A80036" points="458.5,98.583,462.5,108.583,466.5,98.583,462.5,102.583" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="761.3125" x2="953.125" y1="86.583" y2="86.583"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="953.125" x2="953.125" y1="86.583" y2="108.583"></line><polygon fill="#A80036" points="949.125,98.583,953.125,108.583,957.125,98.583,953.125,102.583" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="462.5" x2="462.5" y1="1309.0635" y2="1347.0635"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="462.5" x2="695.8125" y1="1347.0635" y2="1347.0635"></line><polygon fill="#A80036" points="685.8125,1343.0635,695.8125,1347.0635,685.8125,1351.0635,689.8125,1347.0635" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="953.125" x2="953.125" y1="479.5264" y2="1347.0635"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="953.125" x2="719.8125" y1="1347.0635" y2="1347.0635"></line><polygon fill="#A80036" points="729.8125,1343.0635,719.8125,1347.0635,729.8125,1351.0635,725.8125,1347.0635" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="707.8125" x2="707.8125" y1="54.583" y2="74.583"></line><polygon fill="#A80036" points="703.8125,64.583,707.8125,74.583,711.8125,64.583,707.8125,68.583" style="stroke: #A80036; stroke-width: 1.0;"></polygon></g></svg></div>
<p class="sync-line" data-line="198">上图表述的是本地类型插件从无到有进入整个系统的过程。入口的途径有两条，按照具体的需求可以选择使用预加载或者是直接安装的两种方式，在这两条路径上，尝试创建<code>Plugin</code>的过程是共同的，而也就是在这个过程中将本地插件的相关信息保存到了本地的配置文件，同时也将对应的<code>APK文件</code>拷贝到了插件系统对应的存储路径下。所以在完成了上述操作之后，系统每次启动的时候都可以从配置文件中获取到本地插件的相关信息，而至此本地插件也就真正的进入到了当前应用的插件系统中。</p>
<p class="sync-line" data-line="200">之前在介绍从服务器获取插件配置列表并且更新本地插件的时候有提及到，在利用服务器获取到的新数据进行本地配置更新的时候会为每个插件创建对用的<code>PlugInfo</code>对象，这里的操作同样也包括了本地插件。这样做的目的是为了在插件系统启动的时候就完成了<code>Plugin</code>和<code>PlugInfo</code>的对应关系，方便后续的逻辑操作。</p>
<p class="sync-line" data-line="202">在本地插件真正进入到当前应用的插件系统之后，每次插件系统启动的时候除了从配置文件中获取本地插件的相关信息外，同时也会在插件的存储系统中进行扫描恢复所有已经安装完成的插件信息保存在一个<code>PluginPackageParser</code>列表中。虽然这个过程同样涉及到远端的插件，但是也在这里一并讲了。</p>
<div class="plantuml"><!--?xml version="1.0" encoding="UTF-8" standalone="yes"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="318px" style="width:354px;height:318px;" version="1.1" viewbox="0 0 354 318" width="354px"><defs><filter height="300%" id="fxe7oig" width="300%" x="-1" y="-1"><fegaussianblur result="blurOut" stddeviation="2.0"></fegaussianblur><fecolormatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></fecolormatrix><feoffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feoffset><feblend in="SourceGraphic" in2="blurOut3" mode="normal"></feblend></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="135" x="114.25" y="26.0439">已安装插件信息恢复</text><rect fill="#FFFFFF" filter="url(#fxe7oig)" height="112.5088" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="243.5" y="138.9946"></rect><rect fill="#FFFFFF" filter="url(#fxe7oig)" height="72.7544" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="248.5" y="178.749"></rect><rect fill="#FFFFFF" filter="url(#fxe7oig)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="253.5" y="223.5034"></rect><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="88" x2="88" y1="74.2402" y2="277.2578"></line><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="248" x2="248" y1="74.2402" y2="277.2578"></line><rect fill="#FEFECE" filter="url(#fxe7oig)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="156" x="8" y="36.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="142" x="15" y="59.1641">PluginManagerService</text><rect fill="#FEFECE" filter="url(#fxe7oig)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="156" x="8" y="276.2578"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="142" x="15" y="299.3018">PluginManagerService</text><rect fill="#FEFECE" filter="url(#fxe7oig)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="178" y="36.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="123" x="185" y="59.1641">IPluginManagerImpl</text><rect fill="#FEFECE" filter="url(#fxe7oig)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="178" y="276.2578"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="123" x="185" y="299.3018">IPluginManagerImpl</text><rect fill="#FFFFFF" filter="url(#fxe7oig)" height="112.5088" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="243.5" y="138.9946"></rect><rect fill="#FFFFFF" filter="url(#fxe7oig)" height="72.7544" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="248.5" y="178.749"></rect><rect fill="#FFFFFF" filter="url(#fxe7oig)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="253.5" y="223.5034"></rect><polygon fill="#A80036" points="76,103.2402,86,107.2402,76,111.2402,80,107.2402" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="82" y1="107.2402" y2="107.2402"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="52" x="10" y="103.1382">onCreate</text><polygon fill="#A80036" points="231.5,134.9946,241.5,138.9946,231.5,142.9946,235.5,138.9946" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="88" x2="237.5" y1="138.9946" y2="138.9946"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="60" x="95" y="134.8926">onCreate()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="253.5" x2="300.5" y1="166.5034" y2="166.5034"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="300.5" x2="300.5" y1="166.5034" y2="179.5034"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="259.5" x2="300.5" y1="179.5034" y2="179.5034"></line><polygon fill="#A80036" points="269.5,175.5034,259.5,179.5034,269.5,183.5034,265.5,179.5034" style="stroke: #A80036; stroke-width: 1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="88" x="265.5" y="161.647">onCreateInner()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="263.5" x2="305.5" y1="216.2578" y2="216.2578"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="305.5" x2="305.5" y1="216.2578" y2="229.2578"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="264.5" x2="305.5" y1="229.2578" y2="229.2578"></line><polygon fill="#A80036" points="274.5,225.2578,264.5,229.2578,274.5,233.2578,270.5,229.2578" style="stroke: #A80036; stroke-width: 1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="47" x="270.5" y="211.4014">laodAll()</text></g></svg></div>
<div class="plantuml"><!--?xml version="1.0" encoding="UTF-8" standalone="yes"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="649px" style="width:382px;height:649px;" version="1.1" viewbox="0 0 382 649" width="382px"><defs><filter height="300%" id="fll0ccm" width="300%" x="-1" y="-1"><fegaussianblur result="blurOut" stddeviation="2.0"></fegaussianblur><fecolormatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></fecolormatrix><feoffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feoffset><feblend in="SourceGraphic" in2="blurOut3" mode="normal"></feblend></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthadjust="spacingAndGlyphs" textlength="139" x="131.25" y="30.6279">loadAllPlugin流程</text><ellipse cx="224" cy="44.583" fill="#000000" filter="url(#fll0ccm)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"></ellipse><rect fill="#FEFECE" filter="url(#fll0ccm)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="176" x="136" y="74.583"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="153" x="149" y="98.335">PluginDirHelper.getBaseDir</text><polygon fill="#FEFECE" filter="url(#fll0ccm)" points="149.5,174.9717,298.5,174.9717,310.5,186.9717,298.5,198.9717,149.5,198.9717,137.5,186.9717,149.5,174.9717" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="149" x="149.5" y="192.0662">dir.isDirectory &amp;&amp; dir.length &gt; 1</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="24" x="310.5" y="184.5547">false</text><rect fill="#FEFECE" filter="url(#fll0ccm)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="163" x="46" y="208.9717"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="140" x="59" y="232.7236">从插件目录中获取apk文件</text><rect fill="#FEFECE" filter="url(#fll0ccm)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="68" y="278.8604"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="96" x="81" y="302.6123">保存到文件列表中</text><rect fill="#FEFECE" filter="url(#fll0ccm)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="285.5" y="208.9717"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="47" x="298.5" y="232.7236">continue</text><polygon fill="#FEFECE" filter="url(#fll0ccm)" points="224,321.249,236,333.249,224,345.249,212,333.249,224,321.249" style="stroke: #A80036; stroke-width: 1.5;"></polygon><polygon fill="#FEFECE" filter="url(#fll0ccm)" points="177.5,130.9717,270.5,130.9717,282.5,142.9717,270.5,154.9717,177.5,154.9717,165.5,142.9717,177.5,130.9717" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="93" x="177.5" y="148.0662">对BaseDir进行遍历</text><rect fill="#FEFECE" filter="url(#fll0ccm)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="251" x="98.5" y="431.249"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="228" x="111.5" y="455.001">使用该文件创建对应PluginPackageParser</text><rect fill="#FEFECE" filter="url(#fll0ccm)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="176.5" y="487.6377"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="72" x="189.5" y="511.3896">获取签名文件</text><rect fill="#FEFECE" filter="url(#fll0ccm)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="215" x="116.5" y="544.0264"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="192" x="129.5" y="567.7783">保存PluginPackageParser到缓存中</text><polygon fill="#FEFECE" filter="url(#fll0ccm)" points="180,387.249,268,387.249,280,399.249,268,411.249,180,411.249,168,399.249,180,387.249" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="88" x="180" y="404.3435">文件列表进行遍历</text><ellipse cx="224" cy="632.415" fill="none" filter="url(#fll0ccm)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"></ellipse><ellipse cx="224.5" cy="632.915" fill="#000000" filter="url(#fll0ccm)" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"></ellipse><line style="stroke: #A80036; stroke-width: 1.5;" x1="224" x2="224" y1="54.583" y2="74.583"></line><polygon fill="#A80036" points="220,64.583,224,74.583,228,64.583,224,68.583" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="127.5" x2="127.5" y1="245.3604" y2="278.8604"></line><polygon fill="#A80036" points="123.5,268.8604,127.5,278.8604,131.5,268.8604,127.5,272.8604" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="137.5" x2="127.5" y1="186.9717" y2="186.9717"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="127.5" x2="127.5" y1="186.9717" y2="208.9717"></line><polygon fill="#A80036" points="123.5,198.9717,127.5,208.9717,131.5,198.9717,127.5,202.9717" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="310.5" x2="320.5" y1="186.9717" y2="186.9717"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="320.5" x2="320.5" y1="186.9717" y2="208.9717"></line><polygon fill="#A80036" points="316.5,198.9717,320.5,208.9717,324.5,198.9717,320.5,202.9717" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="127.5" x2="127.5" y1="315.249" y2="333.249"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="127.5" x2="212" y1="333.249" y2="333.249"></line><polygon fill="#A80036" points="202,329.249,212,333.249,202,337.249,206,333.249" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="320.5" x2="320.5" y1="245.3604" y2="333.249"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="320.5" x2="236" y1="333.249" y2="333.249"></line><polygon fill="#A80036" points="246,329.249,236,333.249,246,337.249,242,333.249" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="224" x2="224" y1="154.9717" y2="174.9717"></line><polygon fill="#A80036" points="220,164.9717,224,174.9717,228,164.9717,224,168.9717" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="224" x2="224" y1="345.249" y2="355.249"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="224" x2="377.5" y1="355.249" y2="355.249"></line><polygon fill="#A80036" points="373.5,258.8604,377.5,248.8604,381.5,258.8604,377.5,254.8604" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="377.5" x2="377.5" y1="142.9717" y2="355.249"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="377.5" x2="282.5" y1="142.9717" y2="142.9717"></line><polygon fill="#A80036" points="292.5,138.9717,282.5,142.9717,292.5,146.9717,288.5,142.9717" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="165.5" x2="24" y1="142.9717" y2="142.9717"></line><polygon fill="#A80036" points="20,244.8604,24,254.8604,28,244.8604,24,248.8604" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="24" x2="24" y1="142.9717" y2="367.249"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="24" x2="224" y1="367.249" y2="367.249"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="224" x2="224" y1="367.249" y2="387.249"></line><polygon fill="#A80036" points="220,377.249,224,387.249,228,377.249,224,381.249" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="224" x2="224" y1="110.9717" y2="130.9717"></line><polygon fill="#A80036" points="220,120.9717,224,130.9717,228,120.9717,224,124.9717" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="224" x2="224" y1="467.6377" y2="487.6377"></line><polygon fill="#A80036" points="220,477.6377,224,487.6377,228,477.6377,224,481.6377" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="224" x2="224" y1="524.0264" y2="544.0264"></line><polygon fill="#A80036" points="220,534.0264,224,544.0264,228,534.0264,224,538.0264" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="224" x2="224" y1="411.249" y2="431.249"></line><polygon fill="#A80036" points="220,421.249,224,431.249,228,421.249,224,425.249" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="224" x2="224" y1="580.415" y2="590.415"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="224" x2="361.5" y1="590.415" y2="590.415"></line><polygon fill="#A80036" points="357.5,503.832,361.5,493.832,365.5,503.832,361.5,499.832" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="361.5" x2="361.5" y1="399.249" y2="590.415"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="361.5" x2="280" y1="399.249" y2="399.249"></line><polygon fill="#A80036" points="290,395.249,280,399.249,290,403.249,286,399.249" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="168" x2="86.5" y1="399.249" y2="399.249"></line><polygon fill="#A80036" points="82.5,489.832,86.5,499.832,90.5,489.832,86.5,493.832" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="86.5" x2="86.5" y1="399.249" y2="602.415"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="86.5" x2="224" y1="602.415" y2="602.415"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="224" x2="224" y1="602.415" y2="622.415"></line><polygon fill="#A80036" points="220,612.415,224,622.415,228,612.415,224,616.415" style="stroke: #A80036; stroke-width: 1.0;"></polygon></g></svg></div>
<p class="sync-line" data-line="243">上图显示的从插件存储系统中恢复已安装插件信息的流程。在流程图中可以看到，这个恢复流程是从<code>PluginManagerService</code>启动的时候开始的，然后一只辗转到调用<code>IPluginManagerImpl.loadAllPlugin()</code>来执行恢复的具体操作。首先会从插件存储系统的保存目录中进行遍历，从其中找到所有的可能是安装完成的插件。在这里的判断条件有两个，第一是apk目录下必须存在对应的apk文件，第二个点是该插件的目录下除了apk目录之外应该还有其他的文件目录存在。额外增加第二点判断是因为在插件卸载之后仍然会把apk文件保留在原来的目录下面，如果这个时候不增加第二点判断条件，那么就会错误地将已经卸载的插件当作安装完成的插件进行加载。</p>
<p class="sync-line" data-line="245">这里还存在一个没有弄清楚地方就是关于签名文件，包括整个签名文件地获取，保存，使用地意义等等。</p>
<h3 class="sync-line" data-line="247" id="&#x63D2;&#x4EF6;&#x9884;&#x88C5;&#x8F7D;&#x6D41;&#x7A0B;">插件预装载流程</h3>
<div class="plantuml"><!--?xml version="1.0" encoding="UTF-8" standalone="yes"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="535px" style="width:1130px;height:535px;" version="1.1" viewbox="0 0 1130 535" width="1130px"><defs><filter height="300%" id="ffz665r" width="300%" x="-1" y="-1"><fegaussianblur result="blurOut" stddeviation="2.0"></fegaussianblur><fecolormatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></fecolormatrix><feoffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feoffset><feblend in="SourceGraphic" in2="blurOut3" mode="normal"></feblend></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthadjust="spacingAndGlyphs" textlength="126" x="503.5" y="30.6279">插件预装载流程</text><ellipse cx="551.125" cy="44.583" fill="#000000" filter="url(#ffz665r)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"></ellipse><polygon fill="#FEFECE" filter="url(#ffz665r)" points="512.625,74.583,589.625,74.583,601.625,86.583,589.625,98.583,512.625,98.583,500.625,86.583,512.625,74.583" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="77" x="512.625" y="91.6775">预装载插件类型</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="26" x="474.625" y="84.166">Local</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="36" x="601.625" y="84.166">Remote</text><rect fill="#FEFECE" filter="url(#ffz665r)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="213" x="96.25" y="108.583"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="190" x="109.25" y="132.335">使用对应APK文件创建对应的Plugin</text><polygon fill="#FEFECE" filter="url(#ffz665r)" points="171.75,164.9717,233.75,164.9717,245.75,176.9717,233.75,188.9717,171.75,188.9717,159.75,176.9717,171.75,164.9717" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="62" x="171.75" y="182.0662">Plugin == null</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="24" x="135.75" y="174.5547">yeas</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="12" x="245.75" y="174.5547">no</text><rect fill="#FEFECE" filter="url(#ffz665r)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="107" x="10" y="198.9717"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="84" x="23" y="222.7236">本地预加载错误</text><rect fill="#FEFECE" filter="url(#ffz665r)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="24.5" y="255.3604"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="55" x="37.5" y="279.1123">return null</text><rect fill="#FEFECE" filter="url(#ffz665r)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="235" x="224.5" y="198.9717"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="212" x="237.5" y="222.7236">根据获取的Plugin从缓存中获取PlugInfo</text><polygon fill="#FEFECE" filter="url(#ffz665r)" points="306,255.3604,378,255.3604,390,267.3604,378,279.3604,306,279.3604,294,267.3604,306,255.3604" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="72" x="306" y="272.4548">PlugInfo == null</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="24" x="270" y="264.9434">yeas</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="12" x="390" y="264.9434">no</text><rect fill="#FEFECE" filter="url(#ffz665r)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="171" y="289.3604"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="93" x="184" y="313.1123">创建新的PlugInfo</text><rect fill="#FEFECE" filter="url(#ffz665r)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="169.5" y="345.749"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="96" x="182.5" y="369.501">保存到本地缓存中</text><rect fill="#FEFECE" filter="url(#ffz665r)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="164" x="147" y="402.1377"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="141" x="160" y="425.8896">执行PlugInfo的预加载操作</text><rect fill="#FEFECE" filter="url(#ffz665r)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="248" x="331" y="289.3604"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="225" x="344" y="313.1123">使用缓存中获取的PlugInfo执行预加载操作</text><polygon fill="#FEFECE" filter="url(#ffz665r)" points="342,444.5264,354,456.5264,342,468.5264,330,456.5264,342,444.5264" style="stroke: #A80036; stroke-width: 1.5;"></polygon><polygon fill="#FEFECE" filter="url(#ffz665r)" points="202.75,474.5264,214.75,486.5264,202.75,498.5264,190.75,486.5264,202.75,474.5264" style="stroke: #A80036; stroke-width: 1.5;"></polygon><rect fill="#FEFECE" filter="url(#ffz665r)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="164" x="817.5" y="108.583"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="141" x="830.5" y="132.335">尝试从缓存中获取PlugInfo</text><polygon fill="#FEFECE" filter="url(#ffz665r)" points="863.5,164.9717,935.5,164.9717,947.5,176.9717,935.5,188.9717,863.5,188.9717,851.5,176.9717,863.5,164.9717" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="72" x="863.5" y="182.0662">PlugInfo == null</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="24" x="827.5" y="174.5547">yeas</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="12" x="947.5" y="174.5547">no</text><rect fill="#FEFECE" filter="url(#ffz665r)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="675" y="198.9717"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="143" x="688" y="222.7236">从缓存中获取对应地Plugin</text><polygon fill="#FEFECE" filter="url(#ffz665r)" points="727,255.3604,789,255.3604,801,267.3604,789,279.3604,727,279.3604,715,267.3604,727,255.3604" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="62" x="727" y="272.4548">Plugin == null</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="24" x="691" y="264.9434">yeas</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="12" x="801" y="264.9434">no</text><rect fill="#FEFECE" filter="url(#ffz665r)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="639" y="289.3604"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="60" x="652" y="313.1123">预加载错误</text><rect fill="#FEFECE" filter="url(#ffz665r)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="187" x="742" y="289.3604"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="164" x="755" y="313.1123">使用Plugin创建对应地PlugInfo</text><rect fill="#FEFECE" filter="url(#ffz665r)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="765.5" y="345.749"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="117" x="778.5" y="369.501">保存PlugInfo到缓存中</text><rect fill="#FEFECE" filter="url(#ffz665r)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="164" x="753.5" y="402.1377"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="141" x="766.5" y="425.8896">执行PlugInfo的预加载操作</text><polygon fill="#FEFECE" filter="url(#ffz665r)" points="758,444.5264,770,456.5264,758,468.5264,746,456.5264,758,444.5264" style="stroke: #A80036; stroke-width: 1.5;"></polygon><rect fill="#FEFECE" filter="url(#ffz665r)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="164" x="959" y="198.9717"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="141" x="972" y="222.7236">执行PlugInfo的预加载操作</text><polygon fill="#FEFECE" filter="url(#ffz665r)" points="899.5,474.5264,911.5,486.5264,899.5,498.5264,887.5,486.5264,899.5,474.5264" style="stroke: #A80036; stroke-width: 1.5;"></polygon><polygon fill="#FEFECE" filter="url(#ffz665r)" points="551.125,504.5264,563.125,516.5264,551.125,528.5264,539.125,516.5264,551.125,504.5264" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="63.5" x2="63.5" y1="235.3604" y2="255.3604"></line><polygon fill="#A80036" points="59.5,245.3604,63.5,255.3604,67.5,245.3604,63.5,249.3604" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="229" x2="229" y1="325.749" y2="345.749"></line><polygon fill="#A80036" points="225,335.749,229,345.749,233,335.749,229,339.749" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="229" x2="229" y1="382.1377" y2="402.1377"></line><polygon fill="#A80036" points="225,392.1377,229,402.1377,233,392.1377,229,396.1377" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="294" x2="229" y1="267.3604" y2="267.3604"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="229" x2="229" y1="267.3604" y2="289.3604"></line><polygon fill="#A80036" points="225,279.3604,229,289.3604,233,279.3604,229,283.3604" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="390" x2="455" y1="267.3604" y2="267.3604"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="455" x2="455" y1="267.3604" y2="289.3604"></line><polygon fill="#A80036" points="451,279.3604,455,289.3604,459,279.3604,455,283.3604" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="229" x2="229" y1="438.5264" y2="456.5264"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="229" x2="330" y1="456.5264" y2="456.5264"></line><polygon fill="#A80036" points="320,452.5264,330,456.5264,320,460.5264,324,456.5264" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="455" x2="455" y1="325.749" y2="456.5264"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="455" x2="354" y1="456.5264" y2="456.5264"></line><polygon fill="#A80036" points="364,452.5264,354,456.5264,364,460.5264,360,456.5264" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="342" x2="342" y1="235.3604" y2="255.3604"></line><polygon fill="#A80036" points="338,245.3604,342,255.3604,346,245.3604,342,249.3604" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="159.75" x2="63.5" y1="176.9717" y2="176.9717"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="63.5" x2="63.5" y1="176.9717" y2="198.9717"></line><polygon fill="#A80036" points="59.5,188.9717,63.5,198.9717,67.5,188.9717,63.5,192.9717" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="245.75" x2="342" y1="176.9717" y2="176.9717"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="342" x2="342" y1="176.9717" y2="198.9717"></line><polygon fill="#A80036" points="338,188.9717,342,198.9717,346,188.9717,342,192.9717" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="63.5" x2="63.5" y1="291.749" y2="486.5264"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="63.5" x2="190.75" y1="486.5264" y2="486.5264"></line><polygon fill="#A80036" points="180.75,482.5264,190.75,486.5264,180.75,490.5264,184.75,486.5264" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="342" x2="342" y1="468.5264" y2="486.5264"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="342" x2="214.75" y1="486.5264" y2="486.5264"></line><polygon fill="#A80036" points="224.75,482.5264,214.75,486.5264,224.75,490.5264,220.75,486.5264" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="202.75" x2="202.75" y1="144.9717" y2="164.9717"></line><polygon fill="#A80036" points="198.75,154.9717,202.75,164.9717,206.75,154.9717,202.75,158.9717" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="835.5" x2="835.5" y1="325.749" y2="345.749"></line><polygon fill="#A80036" points="831.5,335.749,835.5,345.749,839.5,335.749,835.5,339.749" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="835.5" x2="835.5" y1="382.1377" y2="402.1377"></line><polygon fill="#A80036" points="831.5,392.1377,835.5,402.1377,839.5,392.1377,835.5,396.1377" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="715" x2="680.5" y1="267.3604" y2="267.3604"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="680.5" x2="680.5" y1="267.3604" y2="289.3604"></line><polygon fill="#A80036" points="676.5,279.3604,680.5,289.3604,684.5,279.3604,680.5,283.3604" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="801" x2="835.5" y1="267.3604" y2="267.3604"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="835.5" x2="835.5" y1="267.3604" y2="289.3604"></line><polygon fill="#A80036" points="831.5,279.3604,835.5,289.3604,839.5,279.3604,835.5,283.3604" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="680.5" x2="680.5" y1="325.749" y2="456.5264"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="680.5" x2="746" y1="456.5264" y2="456.5264"></line><polygon fill="#A80036" points="736,452.5264,746,456.5264,736,460.5264,740,456.5264" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="835.5" x2="835.5" y1="438.5264" y2="456.5264"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="835.5" x2="770" y1="456.5264" y2="456.5264"></line><polygon fill="#A80036" points="780,452.5264,770,456.5264,780,460.5264,776,456.5264" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="758" x2="758" y1="235.3604" y2="255.3604"></line><polygon fill="#A80036" points="754,245.3604,758,255.3604,762,245.3604,758,249.3604" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="851.5" x2="758" y1="176.9717" y2="176.9717"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="758" x2="758" y1="176.9717" y2="198.9717"></line><polygon fill="#A80036" points="754,188.9717,758,198.9717,762,188.9717,758,192.9717" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="947.5" x2="1041" y1="176.9717" y2="176.9717"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="1041" x2="1041" y1="176.9717" y2="198.9717"></line><polygon fill="#A80036" points="1037,188.9717,1041,198.9717,1045,188.9717,1041,192.9717" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="758" x2="758" y1="468.5264" y2="486.5264"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="758" x2="887.5" y1="486.5264" y2="486.5264"></line><polygon fill="#A80036" points="877.5,482.5264,887.5,486.5264,877.5,490.5264,881.5,486.5264" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="1041" x2="1041" y1="235.3604" y2="486.5264"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="1041" x2="911.5" y1="486.5264" y2="486.5264"></line><polygon fill="#A80036" points="921.5,482.5264,911.5,486.5264,921.5,490.5264,917.5,486.5264" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="899.5" x2="899.5" y1="144.9717" y2="164.9717"></line><polygon fill="#A80036" points="895.5,154.9717,899.5,164.9717,903.5,154.9717,899.5,158.9717" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="500.625" x2="202.75" y1="86.583" y2="86.583"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="202.75" x2="202.75" y1="86.583" y2="108.583"></line><polygon fill="#A80036" points="198.75,98.583,202.75,108.583,206.75,98.583,202.75,102.583" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="601.625" x2="899.5" y1="86.583" y2="86.583"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="899.5" x2="899.5" y1="86.583" y2="108.583"></line><polygon fill="#A80036" points="895.5,98.583,899.5,108.583,903.5,98.583,899.5,102.583" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="202.75" x2="202.75" y1="498.5264" y2="516.5264"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="202.75" x2="539.125" y1="516.5264" y2="516.5264"></line><polygon fill="#A80036" points="529.125,512.5264,539.125,516.5264,529.125,520.5264,533.125,516.5264" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="899.5" x2="899.5" y1="498.5264" y2="516.5264"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="899.5" x2="563.125" y1="516.5264" y2="516.5264"></line><polygon fill="#A80036" points="573.125,512.5264,563.125,516.5264,573.125,520.5264,569.125,516.5264" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="551.125" x2="551.125" y1="54.583" y2="74.583"></line><polygon fill="#A80036" points="547.125,64.583,551.125,74.583,555.125,64.583,551.125,68.583" style="stroke: #A80036; stroke-width: 1.0;"></polygon></g></svg></div>
<p class="sync-line" data-line="285">关于插件预装载，首要说明的是执行这个过程的意义。在当前系统中存在多个插件，或者是应用希望同时展现出一个可选择使用的插件列表的时候，就需要从插件中获取到用于展示的基本信息。按照和服务器定义的<code>Plugin</code>实体的配置信息本来是可以完成这个工作，但是最开始没有注意到这一部分的内容，而且也要兼容到本地插件的预装载信息。所以在这里采用的方案是直接对插件的APK文件进行解析，目的是为了获取到插件的<code>应用名称\应用图标</code>用于插件列表的展示。这部分的实在操作封装在<code>PlugInfo</code>中，关键代码如下:</p>
<pre class="editor-colors lang-java sync-line" data-line="287"><div class="line"><span class="source java"><span class="storage type java"><span>PackageManager</span></span><span>&nbsp;pm&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="variable other object java"><span>context</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>getPackageManager</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span class="storage type java"><span>PackageInfo</span></span><span>&nbsp;pi&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="variable other object java"><span>pm</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>getPackageArchiveInfo</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="variable other object java"><span>apkFile</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>getAbsolutePath</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation separator delimiter java"><span>,</span></span><span>&nbsp;</span><span class="constant numeric java"><span>0</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span class="keyword control java"><span>if</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span>pi&nbsp;</span><span class="keyword operator comparison java"><span>==</span></span><span>&nbsp;</span><span class="constant language java"><span>null</span></span><span class="punctuation bracket round java"><span>)</span></span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object java"><span>Log</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>e</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="storage type java"><span>TAG</span></span><span class="punctuation separator delimiter java"><span>,</span></span><span>&nbsp;</span><span class="string quoted double java"><span class="punctuation definition string begin java"><span>&quot;</span></span><span>doPreLoad&nbsp;can&nbsp;not&nbsp;get&nbsp;PackageInfo&nbsp;for&nbsp;apk:&nbsp;</span><span class="punctuation definition string end java"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator arithmetic java"><span>+</span></span><span>&nbsp;</span><span class="variable other object java"><span>apkFile</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>getAbsolutePath</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>return</span></span><span>&nbsp;</span><span class="constant language java"><span>false</span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span class="variable other object java"><span>pi</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>sourceDir</span></span><span>&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="variable other object java"><span>apkFile</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>getAbsolutePath</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span class="variable other object java"><span>pi</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>publicSourceDir</span></span><span>&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="variable other object java"><span>apkFile</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>getAbsolutePath</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>label&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="storage type java"><span>String</span></span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="variable other object java"><span>pi</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>applicationInfo</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>loadLabel</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span>pm</span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>icon&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="variable other object java"><span>pi</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>applicationInfo</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>loadIcon</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span>pm</span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>pluginStatus&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="variable other object java"><span>STATUS</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>PRELOADED</span></span><span class="punctuation terminator java"><span>;</span></span></span></div></pre>
<p class="sync-line" data-line="301">代码的核心部分是尝试获取当前APK文件的<code>PackageInfo</code>，如果这个获取操作失败就直接判定当前的APK文件是不可用的，成功获取之后就可以直接从其中获取需要的内容。</p>
<h3 class="sync-line" data-line="303" id="&#x63D2;&#x4EF6;&#x5B89;&#x88C5;&#x6D41;&#x7A0B;">插件安装流程</h3>
<p class="sync-line" data-line="305">插件的安装虽然会有本地插件安装和远端服务器配置插件安装两种流程，但其实两种方式不同点仅仅在于本地插件安装的时候，最开始本地插件是不存在与之对应的<code>Plugin</code>信息的，在这个方面的缺陷就需要手动的从该插件构建出对应的<code>Plugin</code>并切保存到本地配置文件中。在Plugin创建完成之后，两种不同类型的插件安装过程实际上就合并到了同样的一条操作路径中。所以在介绍关于插件安装的过程时分成两个部分的内容，第一个是为本地插件创建对应<code>Plugin</code>的过程；第二个则是<code>PlugInfo</code>作为起点的插件安装路径。</p>
<div class="plantuml"><!--?xml version="1.0" encoding="UTF-8" standalone="yes"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="597px" style="width:726px;height:597px;" version="1.1" viewbox="0 0 726 597" width="726px"><defs><filter height="300%" id="fsjn8zv" width="300%" x="-1" y="-1"><fegaussianblur result="blurOut" stddeviation="2.0"></fegaussianblur><fecolormatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></fecolormatrix><feoffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feoffset><feblend in="SourceGraphic" in2="blurOut3" mode="normal"></feblend></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="164" x="283" y="26.0439">本地插件创建Plugin流程</text><rect fill="#FFFFFF" filter="url(#fsjn8zv)" height="440.0986" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="281" y="107.2402"></rect><rect fill="#FFFFFF" filter="url(#fsjn8zv)" height="234.5723" style="stroke: #000000; stroke-width: 2.0;" width="704" x="13" y="304.7666"></rect><rect fill="#FFFFFF" height="61.7773" style="stroke: none; stroke-width: 1.0;" width="704" x="13" y="477.5615"></rect><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="286" x2="286" y1="74.2402" y2="556.3389"></line><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="468" x2="468" y1="74.2402" y2="556.3389"></line><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="575" x2="575" y1="74.2402" y2="556.3389"></line><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="678" x2="678" y1="74.2402" y2="556.3389"></line><rect fill="#FEFECE" filter="url(#fsjn8zv)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="209" y="36.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="136" x="216" y="59.1641">PluginConfigManager</text><rect fill="#FEFECE" filter="url(#fsjn8zv)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="209" y="555.3389"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="136" x="216" y="578.3828">PluginConfigManager</text><rect fill="#FEFECE" filter="url(#fsjn8zv)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="435" y="36.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="48" x="442" y="59.1641">Context</text><rect fill="#FEFECE" filter="url(#fsjn8zv)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="435" y="555.3389"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="48" x="442" y="578.3828">Context</text><rect fill="#FEFECE" filter="url(#fsjn8zv)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="511" y="36.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="111" x="518" y="59.1641">PackageManager</text><rect fill="#FEFECE" filter="url(#fsjn8zv)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="511" y="555.3389"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="111" x="518" y="578.3828">PackageManager</text><rect fill="#FEFECE" filter="url(#fsjn8zv)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="650" y="36.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="39" x="657" y="59.1641">Plugin</text><rect fill="#FEFECE" filter="url(#fsjn8zv)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="650" y="555.3389"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="39" x="657" y="578.3828">Plugin</text><rect fill="#FFFFFF" filter="url(#fsjn8zv)" height="440.0986" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="281" y="107.2402"></rect><polygon fill="#A80036" points="269,103.2402,279,107.2402,269,111.2402,273,107.2402" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="275" y1="107.2402" y2="107.2402"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="246" x="10" y="103.1382">getPlugin(originPath, context, replaceFlag)</text><polygon fill="#A80036" points="456,134.9946,466,138.9946,456,142.9946,460,138.9946" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="291" x2="462" y1="138.9946" y2="138.9946"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="127" x="298" y="134.8926">getPackageManager()</text><polygon fill="#A80036" points="302,166.749,292,170.749,302,174.749,298,170.749" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="296" x2="467" y1="170.749" y2="170.749"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="18" x="308" y="166.647">pm</text><polygon fill="#A80036" points="563.5,198.5034,573.5,202.5034,563.5,206.5034,567.5,202.5034" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="291" x2="569.5" y1="202.5034" y2="202.5034"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="212" x="298" y="198.4014">getPackageArchiveInfo(originPath, 0)</text><polygon fill="#A80036" points="302,235.2578,292,239.2578,302,243.2578,298,239.2578" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="296" x2="574.5" y1="239.2578" y2="239.2578"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="10" x="308" y="235.1558">pi</text><polygon fill="#FBFB77" filter="url(#fsjn8zv)" points="44,216.2578,44,243.2578,272,243.2578,272,226.2578,262,216.2578,44,216.2578" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="262" x2="262" y1="216.2578" y2="226.2578"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="272" x2="262" y1="226.2578" y2="226.2578"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="207" x="50" y="236.1558">can get some information about apk</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="291" x2="333" y1="276.7666" y2="276.7666"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="333" x2="333" y1="276.7666" y2="289.7666"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="292" x2="333" y1="289.7666" y2="289.7666"></line><polygon fill="#A80036" points="302,285.7666,292,289.7666,302,293.7666,298,289.7666" style="stroke: #A80036; stroke-width: 1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="158" x="298" y="271.9102">try to get plugin from cache</text><rect fill="none" height="234.5723" style="stroke: #000000; stroke-width: 2.0;" width="704" x="13" y="304.7666"></rect><polygon fill="#EEEEEE" points="13,304.7666,74,304.7666,74,313.7666,64,323.7666,13,323.7666,13,304.7666" style="stroke: #000000; stroke-width: 2.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="16" x="28" y="320.6646">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="111" x="89" y="319.3726">[plugin not in cache]</text><polygon fill="#A80036" points="666.5,343.5439,676.5,347.5439,666.5,351.5439,670.5,347.5439" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="291" x2="672.5" y1="347.5439" y2="347.5439"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="71" x="298" y="343.4419">new Plugin()</text><polygon fill="#A80036" points="302,375.2983,292,379.2983,302,383.2983,298,379.2983" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="296" x2="677.5" y1="379.2983" y2="379.2983"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="34" x="308" y="375.1963">plugin</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="291" x2="333" y1="411.8071" y2="411.8071"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="333" x2="333" y1="411.8071" y2="424.8071"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="292" x2="333" y1="424.8071" y2="424.8071"></line><polygon fill="#A80036" points="302,420.8071,292,424.8071,302,428.8071,298,424.8071" style="stroke: #A80036; stroke-width: 1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="80" x="298" y="406.9507">save to cache</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="291" x2="333" y1="456.5615" y2="456.5615"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="333" x2="333" y1="456.5615" y2="469.5615"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="292" x2="333" y1="469.5615" y2="469.5615"></line><polygon fill="#A80036" points="302,465.5615,292,469.5615,302,473.5615,298,469.5615" style="stroke: #A80036; stroke-width: 1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="62" x="298" y="451.7051">writeToFile</text><polygon fill="#FBFB77" filter="url(#fsjn8zv)" points="23,439.3071,23,466.3071,272,466.3071,272,449.3071,262,439.3071,23,439.3071" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="262" x2="262" y1="439.3071" y2="449.3071"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="272" x2="262" y1="449.3071" y2="449.3071"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="228" x="29" y="459.2051">save the new plugin to SharePreference</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="717" y1="478.5615" y2="478.5615"></line><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="90" x="18" y="491.1675">[plugin in cache]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="291" x2="333" y1="518.3389" y2="518.3389"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="333" x2="333" y1="518.3389" y2="531.3389"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="292" x2="333" y1="531.3389" y2="531.3389"></line><polygon fill="#A80036" points="302,527.3389,292,531.3389,302,535.3389,298,531.3389" style="stroke: #A80036; stroke-width: 1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="110" x="298" y="513.4824">return cache plugin</text></g></svg></div>
<p class="sync-line" data-line="334">在这个流程中，最基本的条件是可以从<code>originPath</code>指定目录下获取到该文件<code>PackageInfo</code>。在成功获取到<code>PackageInfo</code>之后可以使用对应的包名尝试在缓存中获取到对应<code>Plugin</code>对象，当该对象不存在的时候就会尝试使用现有的信息来构建<code>Plugin</code>对象。这些现有的填充出来的本地<code>Plugin</code>对象应该是下面的这种数据结构:</p>
<pre class="editor-colors lang-javascript sync-line" data-line="336"><div class="line"><span class="source js"><span class="support class js"><span>Plugin</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;pluginID</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant other js"><span>LOCAL_ID</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;url</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;originPath</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;enable</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;packageName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;packageName</span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre>
<p class="sync-line" data-line="345">因为该插件信息是从本地生成的，所以配置的是一个统一的LOCAL_ID；然后会在url中保存APK文件原始放置路径；最后packageName则是直接从PackageInfo中解析出来；当然，对于所有的本地插件来说，enable字段都是true值。</p>
<p class="sync-line" data-line="347">只要配置完对应的<code>Plugin</code>对象之后，这个流程基本上算是完成了，后面只需要把新生成的对象保存到合适的位置。但是上面的流程图中对于<code>replaceFlag</code>参数的时候并没有表述出来，在这里需要做一个补充说明。因为考虑到本地插件不能够向远端服务器下载的插件那样可以通过插件的ID和版本号来进行更新操作，所以在开这个接口的时候留下了一个<code>replaceFlag</code>参数来配置在缓存中已经存在对应包名插件的时候采取怎样的操作，可以是直接返回不替代也可以删除旧的插件采用替代的方式导入新的插件。</p>
<p class="sync-line" data-line="349">在完成本地插件信息获取过程分析之后，现在来介绍插件的具体安装过程。</p>
<div class="plantuml"><!--?xml version="1.0" encoding="UTF-8" standalone="yes"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="708px" style="width:958px;height:708px;" version="1.1" viewbox="0 0 958 708" width="958px"><defs><filter height="300%" id="f6t7pun" width="300%" x="-1" y="-1"><fegaussianblur result="blurOut" stddeviation="2.0"></fegaussianblur><fecolormatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></fecolormatrix><feoffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feoffset><feblend in="SourceGraphic" in2="blurOut3" mode="normal"></feblend></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="90" x="435.5" y="26.0439">插件安装流程</text><rect fill="#FFFFFF" filter="url(#f6t7pun)" height="534.3159" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="155" y="107.2402"></rect><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="159.5" x2="159.5" y1="74.2402" y2="667.3105"></line><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="410" x2="410" y1="74.2402" y2="667.3105"></line><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="517" x2="517" y1="74.2402" y2="667.3105"></line><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="669" x2="669" y1="74.2402" y2="667.3105"></line><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="854" x2="854" y1="74.2402" y2="667.3105"></line><rect fill="#FEFECE" filter="url(#f6t7pun)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="89.5" y="36.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="123" x="96.5" y="59.1641">IPluginManagerImpl</text><rect fill="#FEFECE" filter="url(#f6t7pun)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="89.5" y="666.3105"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="123" x="96.5" y="689.3545">IPluginManagerImpl</text><rect fill="#FEFECE" filter="url(#f6t7pun)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="377" y="36.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="48" x="384" y="59.1641">Context</text><rect fill="#FEFECE" filter="url(#f6t7pun)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="377" y="666.3105"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="48" x="384" y="689.3545">Context</text><rect fill="#FEFECE" filter="url(#f6t7pun)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="453" y="36.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="111" x="460" y="59.1641">PackageManager</text><rect fill="#FEFECE" filter="url(#f6t7pun)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="453" y="666.3105"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="111" x="460" y="689.3545">PackageManager</text><rect fill="#FEFECE" filter="url(#f6t7pun)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="592" y="36.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="136" x="599" y="59.1641">PluginPackageParser</text><rect fill="#FEFECE" filter="url(#f6t7pun)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="592" y="666.3105"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="136" x="599" y="689.3545">PluginPackageParser</text><rect fill="#FEFECE" filter="url(#f6t7pun)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="756" y="36.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="179" x="763" y="59.1641">BaseActivityManagerService</text><rect fill="#FEFECE" filter="url(#f6t7pun)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="756" y="666.3105"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="179" x="763" y="689.3545">BaseActivityManagerService</text><rect fill="#FFFFFF" filter="url(#f6t7pun)" height="534.3159" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="155" y="107.2402"></rect><polygon fill="#A80036" points="143,103.2402,153,107.2402,143,111.2402,147,107.2402" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="149" y1="107.2402" y2="107.2402"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="133" x="10" y="103.1382">installPlugin(pluginFile)</text><polygon fill="#A80036" points="398,134.9946,408,138.9946,398,142.9946,402,138.9946" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="165" x2="404" y1="138.9946" y2="138.9946"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="127" x="172" y="134.8926">getPackageManager()</text><polygon fill="#A80036" points="176,166.749,166,170.749,176,174.749,172,170.749" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="170" x2="409" y1="170.749" y2="170.749"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="18" x="182" y="166.647">pm</text><polygon fill="#A80036" points="505.5,198.5034,515.5,202.5034,505.5,206.5034,509.5,202.5034" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="165" x2="511.5" y1="202.5034" y2="202.5034"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="209" x="172" y="198.4014">getPackageArchiveInfo(pluginFile, 0)</text><polygon fill="#A80036" points="176,230.2578,166,234.2578,176,238.2578,172,234.2578" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="170" x2="516.5" y1="234.2578" y2="234.2578"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="10" x="182" y="230.1558">pi</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="165" x2="207" y1="266.7666" y2="266.7666"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="207" x2="207" y1="266.7666" y2="279.7666"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="166" x2="207" y1="279.7666" y2="279.7666"></line><polygon fill="#A80036" points="176,275.7666,166,279.7666,176,283.7666,172,279.7666" style="stroke: #A80036; stroke-width: 1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="197" x="172" y="261.9102">forceStopPackage(packageName)</text><polygon fill="#A80036" points="657,306.7666,667,310.7666,657,314.7666,661,310.7666" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="165" x2="663" y1="310.7666" y2="310.7666"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="160" x="172" y="306.6646">new PluginPackageParser()</text><polygon fill="#A80036" points="176,338.521,166,342.521,176,346.521,172,342.521" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="170" x2="668" y1="342.521" y2="342.521"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="36" x="182" y="338.4189">parser</text><polygon fill="#A80036" points="657,370.2754,667,374.2754,657,378.2754,661,374.2754" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="165" x2="663" y1="374.2754" y2="374.2754"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="114" x="172" y="370.1733">collectCertification()</text><polygon fill="#A80036" points="657,402.0298,667,406.0298,657,410.0298,661,406.0298" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="165" x2="663" y1="406.0298" y2="406.0298"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="130" x="172" y="401.9277">检查权限是否允许运行</text><polygon fill="#A80036" points="657,433.7842,667,437.7842,657,441.7842,661,437.7842" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="165" x2="663" y1="437.7842" y2="437.7842"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="78" x="172" y="433.6821">获取签名文件</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="165" x2="207" y1="470.293" y2="470.293"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="207" x2="207" y1="470.293" y2="483.293"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="166" x2="207" y1="483.293" y2="483.293"></line><polygon fill="#A80036" points="176,479.293,166,483.293,176,487.293,172,483.293" style="stroke: #A80036; stroke-width: 1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="131" x="172" y="465.4365">copyNativeLibs(parser)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="165" x2="207" y1="515.0474" y2="515.0474"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="207" x2="207" y1="515.0474" y2="528.0474"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="166" x2="207" y1="528.0474" y2="528.0474"></line><polygon fill="#A80036" points="176,524.0474,166,528.0474,176,532.0474,172,528.0474" style="stroke: #A80036; stroke-width: 1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="137" x="172" y="510.1909">dexOpt(context, parser)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="165" x2="207" y1="559.8018" y2="559.8018"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="207" x2="207" y1="559.8018" y2="572.8018"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="166" x2="207" y1="572.8018" y2="572.8018"></line><polygon fill="#A80036" points="176,568.8018,166,572.8018,176,576.8018,172,572.8018" style="stroke: #A80036; stroke-width: 1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="120" x="172" y="554.9453">save parser to cache</text><polygon fill="#A80036" points="842.5,599.8018,852.5,603.8018,842.5,607.8018,846.5,603.8018" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="165" x2="848.5" y1="603.8018" y2="603.8018"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="239" x="172" y="599.6997">onPkgInstalled(parserCache, parser, pkg)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="165" x2="207" y1="641.3105" y2="641.3105"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="207" x2="207" y1="641.3105" y2="654.3105"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="160" x2="207" y1="654.3105" y2="654.3105"></line><polygon fill="#A80036" points="170,650.3105,160,654.3105,170,658.3105,166,654.3105" style="stroke: #A80036; stroke-width: 1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="226" x="172" y="636.4541">sendInstalledBroadcast(packageName)</text></g></svg></div>
<p class="sync-line" data-line="380">整个插件的安装流程基本上采用的还是<code>DroidPlugin</code>原来的那一套，在最开始的部分仍然需要获取到APK文件的包名，然后通过这个包名尝试关闭当前在运行的同包名的插件。关闭同名插件的关键代码如下：</p>
<pre class="editor-colors lang-java sync-line" data-line="382"><div class="line"><span class="source java"><span class="storage modifier java"><span>public</span></span><span>&nbsp;</span><span class="storage type primitive java"><span>boolean</span></span><span>&nbsp;</span><span class="meta function-call java"><span class="entity name function java"><span>killBackgroundProcesses</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="storage type java"><span>String</span></span><span>&nbsp;pluginPackageName</span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span>&nbsp;throws&nbsp;</span><span class="storage type java"><span>RemoteException</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type java"><span>ActivityManager</span></span><span>&nbsp;am&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="storage type java"><span>ActivityManager</span></span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="variable other object java"><span>mContext</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>getSystemService</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="variable other object java"><span>Context</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>ACTIVITY_SERVICE</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type java"><span>List</span></span><span class="punctuation bracket angle java"><span>&lt;</span></span><span class="storage type generic java"><span>RunningAppProcessInfo</span></span><span class="punctuation bracket angle java"><span>&gt;</span></span><span>&nbsp;infos&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="variable other object java"><span>am</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>getRunningAppProcesses</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type primitive java"><span>boolean</span></span><span>&nbsp;success&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="constant language java"><span>false</span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>for</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="storage type java"><span>RunningAppProcessInfo</span></span><span>&nbsp;info&nbsp;</span><span class="keyword control ternary java"><span>:</span></span><span>&nbsp;infos</span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>if</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="variable other object java"><span>info</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>pkgList</span></span><span>&nbsp;</span><span class="keyword operator comparison java"><span>!=</span></span><span>&nbsp;</span><span class="constant language java"><span>null</span></span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type object array java"><span>String</span><span class="punctuation bracket square java"><span>[</span><span>]</span></span></span><span>&nbsp;pkgListCopy&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="variable other object java"><span>Arrays</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>copyOf</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="variable other object java"><span>info</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>pkgList</span></span><span class="punctuation separator delimiter java"><span>,</span></span><span>&nbsp;</span><span class="variable other object java"><span>info</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>pkgList</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>length</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object java"><span>Arrays</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>sort</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span>pkgListCopy</span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>if</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="variable other object java"><span>Arrays</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>binarySearch</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span>pkgListCopy</span><span class="punctuation separator delimiter java"><span>,</span></span><span>&nbsp;pluginPackageName</span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span>&nbsp;</span><span class="keyword operator comparison java"><span>&gt;=</span></span><span>&nbsp;</span><span class="constant numeric java"><span>0</span></span><span>&nbsp;</span><span class="keyword operator logical java"><span>&amp;&amp;</span></span><span>&nbsp;</span><span class="variable other object java"><span>info</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>pid</span></span><span>&nbsp;</span><span class="keyword operator comparison java"><span>!=</span></span><span>&nbsp;</span><span class="variable other object java"><span>android</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>os</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>Process</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>myPid</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object java"><span>Log</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>i</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="storage type java"><span>TAG</span></span><span class="punctuation separator delimiter java"><span>,</span></span><span>&nbsp;</span><span class="string quoted double java"><span class="punctuation definition string begin java"><span>&quot;</span></span><span>killBackgroundProcesses(%s),pkgList=%s,pid=%s</span><span class="punctuation definition string end java"><span>&quot;</span></span></span><span class="punctuation separator delimiter java"><span>,</span></span><span>&nbsp;pluginPackageName</span><span class="punctuation separator delimiter java"><span>,</span></span><span>&nbsp;</span><span class="variable other object java"><span>Arrays</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>toString</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="variable other object java"><span>info</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>pkgList</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation separator delimiter java"><span>,</span></span><span>&nbsp;</span><span class="variable other object java"><span>info</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>pid</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object java"><span>android</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>os</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>Process</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>killProcess</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="variable other object java"><span>info</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>pid</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;success&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="constant language java"><span>true</span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>return</span></span><span>&nbsp;success</span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div></pre>
<p class="sync-line" data-line="402">上面的代码遍历了正在运行的进程并通过匹配插件的包名来确定需要关掉的进程来达到停止正在运行的同名插件的目的。</p>
<p class="sync-line" data-line="404">在准备上面的准备工作完成之后，会去创建在插件安装工程中的一个关键类<code>PluginPackageParser</code>，整个插件的的安装工作基本上在这个类的构造函数中就执行的差不多了，而且后续插件使用的过程中也无法避免的要和这个类进行交互。</p>
<div class="plantuml"><!--?xml version="1.0" encoding="UTF-8" standalone="yes"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="185px" style="width:525px;height:185px;" version="1.1" viewbox="0 0 525 185" width="525px"><defs><filter height="300%" id="ftw8w40" width="300%" x="-1" y="-1"><fegaussianblur result="blurOut" stddeviation="2.0"></fegaussianblur><fecolormatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></fecolormatrix><feoffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feoffset><feblend in="SourceGraphic" in2="blurOut3" mode="normal"></feblend></filter></defs><g><rect fill="#FEFECE" filter="url(#ftw8w40)" height="48" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="6" y="68"></rect><ellipse cx="21" cy="84" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"></ellipse><path d="M19.5781,89.3594 Q17.7188,89.3594 16.625,87.9688 Q15.5313,86.5781 15.5313,83.5938 Q15.5313,81.0625 16.6953,79.4063 Q17.8594,77.75 19.8438,77.75 Q21.3125,77.75 21.7813,77.875 Q22.25,78.0781 22.25,78.0781 Q22.25,78.0781 22.25,78.0078 Q22.25,77.9375 22.8594,77.0156 L23.9063,80.6719 L22.5781,81.0781 Q22.1094,79.5313 21.4453,78.8672 Q20.7813,78.2031 19.7188,78.2031 Q19.3281,78.2031 18.5625,79.7344 Q17.7969,81.2656 17.7969,83.5156 Q17.7969,85.9844 18.4609,87.375 Q19.125,88.7656 19.6563,88.7656 Q20.7188,88.7656 21.4766,88 Q22.2344,87.2344 22.5781,85.5781 L23.9063,86.1719 Q23.5781,87.5781 22.6797,88.4688 Q21.7813,89.3594 19.5781,89.3594 Z "></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="68" x="35" y="89.5576">PackageInfo</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="105" y1="100" y2="100"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="105" y1="108" y2="108"></line><rect fill="#FEFECE" filter="url(#ftw8w40)" height="168.1836" style="stroke: #A80036; stroke-width: 1.5;" width="223" x="141.5" y="8"></rect><ellipse cx="188.75" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"></ellipse><path d="M187.3281,29.3594 Q185.4688,29.3594 184.375,27.9688 Q183.2813,26.5781 183.2813,23.5938 Q183.2813,21.0625 184.4453,19.4063 Q185.6094,17.75 187.5938,17.75 Q189.0625,17.75 189.5313,17.875 Q190,18.0781 190,18.0781 Q190,18.0781 190,18.0078 Q190,17.9375 190.6094,17.0156 L191.6563,20.6719 L190.3281,21.0781 Q189.8594,19.5313 189.1953,18.8672 Q188.5313,18.2031 187.4688,18.2031 Q187.0781,18.2031 186.3125,19.7344 Q185.5469,21.2656 185.5469,23.5156 Q185.5469,25.9844 186.2109,27.375 Q186.875,28.7656 187.4063,28.7656 Q188.4688,28.7656 189.2266,28 Q189.9844,27.2344 190.3281,25.5781 L191.6563,26.1719 Q191.3281,27.5781 190.4297,28.4688 Q189.5313,29.3594 187.3281,29.3594 Z "></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="120" x="209.25" y="29.5576">PluginPackageParser</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="142.5" x2="363.5" y1="40" y2="40"></line><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="149.5" y="50.0115"></rect><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="94" x="161.5" y="56.606">final File mPluginFile</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="149.5" y="65.0344"></rect><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="139" x="161.5" y="71.6289">final PackageParser mParser</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="149.5" y="80.0574"></rect><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="130" x="161.5" y="86.6519">final String mPackageName</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="149.5" y="95.0803"></rect><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="130" x="161.5" y="101.6748">final Context mHostContext</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="149.5" y="110.1033"></rect><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="174" x="161.5" y="116.6978">final PackageInfo mHostPackageInfo</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="142.5" x2="363.5" y1="123.1147" y2="123.1147"></line><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="210" x="147.5" y="139.7207">1. 在这个类的构造函数过程中，会从创建的</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="211" x="147.5" y="154.7437">PackageParser中获取到关于apk的各种组件</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="33" x="147.5" y="169.7666">的信息</text><rect fill="#FEFECE" filter="url(#ftw8w40)" height="48" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="399.5" y="68"></rect><ellipse cx="414.5" cy="84" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"></ellipse><path d="M413.0781,89.3594 Q411.2188,89.3594 410.125,87.9688 Q409.0313,86.5781 409.0313,83.5938 Q409.0313,81.0625 410.1953,79.4063 Q411.3594,77.75 413.3438,77.75 Q414.8125,77.75 415.2813,77.875 Q415.75,78.0781 415.75,78.0781 Q415.75,78.0781 415.75,78.0078 Q415.75,77.9375 416.3594,77.0156 L417.4063,80.6719 L416.0781,81.0781 Q415.6094,79.5313 414.9453,78.8672 Q414.2813,78.2031 413.2188,78.2031 Q412.8281,78.2031 412.0625,79.7344 Q411.2969,81.2656 411.2969,83.5156 Q411.2969,85.9844 411.9609,87.375 Q412.625,88.7656 413.1563,88.7656 Q414.2188,88.7656 414.9766,88 Q415.7344,87.2344 416.0781,85.5781 L417.4063,86.1719 Q417.0781,87.5781 416.1797,88.4688 Q415.2813,89.3594 413.0781,89.3594 Z "></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="85" x="428.5" y="89.5576">PackageParser</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="400.5" x2="515.5" y1="100" y2="100"></line><line style="stroke: #A80036; stroke-width: 1.5;" x1="400.5" x2="515.5" y1="108" y2="108"></line><path d="M364.709,92 C374.536,92 384.363,92 394.19,92 " fill="none" style="stroke: #A80036; stroke-width: 1.0;"></path><polygon fill="#A80036" points="399.329,92,390.329,88,394.329,92,390.329,96,399.329,92" style="stroke: #A80036; stroke-width: 1.0;"></polygon><path d="M111.261,92 C121.284,92 131.306,92 141.329,92 " fill="none" style="stroke: #A80036; stroke-width: 1.0;"></path><polygon fill="#A80036" points="106.02,92,115.02,96,111.02,92,115.02,88,106.02,92" style="stroke: #A80036; stroke-width: 1.0;"></polygon></g></svg></div>
<div class="plantuml"><!--?xml version="1.0" encoding="UTF-8" standalone="yes"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="1161px" style="width:882px;height:1161px;" version="1.1" viewbox="0 0 882 1161" width="882px"><defs><filter height="300%" id="f7rh9ov" width="300%" x="-1" y="-1"><fegaussianblur result="blurOut" stddeviation="2.0"></fegaussianblur><fecolormatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></fecolormatrix><feoffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feoffset><feblend in="SourceGraphic" in2="blurOut3" mode="normal"></feblend></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="213" x="333.75" y="26.0439">PluginPackageParser 创建流程</text><rect fill="#FFFFFF" filter="url(#f7rh9ov)" height="1004.1055" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="288" y="107.2402"></rect><rect fill="#FFFFFF" filter="url(#f7rh9ov)" height="517.5615" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="293" y="248.2578"></rect><rect fill="#FFFFFF" filter="url(#f7rh9ov)" height="31.7544" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="633" y="138.9946"></rect><rect fill="#FFFFFF" filter="url(#f7rh9ov)" height="31.7544" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="633" y="248.2578"></rect><rect fill="#FFFFFF" filter="url(#f7rh9ov)" height="31.7544" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="633" y="446.7842"></rect><rect fill="#FFFFFF" filter="url(#f7rh9ov)" height="31.7544" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="633" y="599.8018"></rect><rect fill="#FFFFFF" filter="url(#f7rh9ov)" height="31.7544" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="789" y="338.521"></rect><rect fill="#FFFFFF" filter="url(#f7rh9ov)" height="434.0527" style="stroke: #000000; stroke-width: 2.0;" width="661.5" x="206" y="295.7666"></rect><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="293" x2="293" y1="74.2402" y2="1120.3457"></line><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="637.5" x2="637.5" y1="74.2402" y2="1120.3457"></line><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="793.5" x2="793.5" y1="74.2402" y2="1120.3457"></line><rect fill="#FEFECE" filter="url(#f7rh9ov)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="216" y="36.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="136" x="223" y="59.1641">PluginPackageParser</text><rect fill="#FEFECE" filter="url(#f7rh9ov)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="216" y="1119.3457"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="136" x="223" y="1142.3896">PluginPackageParser</text><rect fill="#FEFECE" filter="url(#f7rh9ov)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="580.5" y="36.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="97" x="587.5" y="59.1641">PackageParser</text><rect fill="#FEFECE" filter="url(#f7rh9ov)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="580.5" y="1119.3457"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="97" x="587.5" y="1142.3896">PackageParser</text><rect fill="#FEFECE" filter="url(#f7rh9ov)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="730.5" y="36.1201"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="109" x="737.5" y="59.1641">ComponentName</text><rect fill="#FEFECE" filter="url(#f7rh9ov)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="730.5" y="1119.3457"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacingAndGlyphs" textlength="109" x="737.5" y="1142.3896">ComponentName</text><rect fill="#FFFFFF" filter="url(#f7rh9ov)" height="1004.1055" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="288" y="107.2402"></rect><rect fill="#FFFFFF" filter="url(#f7rh9ov)" height="517.5615" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="293" y="248.2578"></rect><rect fill="#FFFFFF" filter="url(#f7rh9ov)" height="31.7544" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="633" y="138.9946"></rect><rect fill="#FFFFFF" filter="url(#f7rh9ov)" height="31.7544" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="633" y="248.2578"></rect><rect fill="#FFFFFF" filter="url(#f7rh9ov)" height="31.7544" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="633" y="446.7842"></rect><rect fill="#FFFFFF" filter="url(#f7rh9ov)" height="31.7544" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="633" y="599.8018"></rect><rect fill="#FFFFFF" filter="url(#f7rh9ov)" height="31.7544" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="789" y="338.521"></rect><polygon fill="#A80036" points="276,103.2402,286,107.2402,276,111.2402,280,107.2402" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="282" y1="107.2402" y2="107.2402"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="266" x="10" y="103.1382">new PluginPackageParser(context, pluginFile)</text><polygon fill="#A80036" points="621,134.9946,631,138.9946,621,142.9946,625,138.9946" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="298" x2="627" y1="138.9946" y2="138.9946"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="148" x="305" y="134.8926">newPluginParser(context)</text><polygon fill="#A80036" points="309,166.749,299,170.749,309,174.749,305,170.749" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="303" x2="637" y1="170.749" y2="170.749"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="49" x="315" y="166.647">mParser</text><rect fill="#EEEEEE" filter="url(#f7rh9ov)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="874.5" x="3" y="201.3806"></rect><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="877.5" y1="201.3806" y2="201.3806"></line><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="877.5" y1="204.3806" y2="204.3806"></line><rect fill="#EEEEEE" filter="url(#f7rh9ov)" height="25.7544" style="stroke: #000000; stroke-width: 2.0;" width="148" x="366.25" y="189.5034"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="130" x="372.25" y="208.4014">获取Activity相关信息</text><polygon fill="#A80036" points="621,244.2578,631,248.2578,621,252.2578,625,248.2578" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="303" x2="627" y1="248.2578" y2="248.2578"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="78" x="310" y="244.1558">getActivities()</text><polygon fill="#A80036" points="314,276.0122,304,280.0122,314,284.0122,310,280.0122" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="308" x2="637" y1="280.0122" y2="280.0122"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="32" x="320" y="275.9102">datas</text><rect fill="none" height="434.0527" style="stroke: #000000; stroke-width: 2.0;" width="661.5" x="206" y="295.7666"></rect><polygon fill="#EEEEEE" points="206,295.7666,317,295.7666,317,304.7666,307,314.7666,206,314.7666,206,295.7666" style="stroke: #000000; stroke-width: 2.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="66" x="221" y="311.6646">datas.loop</text><polygon fill="#A80036" points="777,334.521,787,338.521,777,342.521,781,338.521" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="303" x2="783" y1="338.521" y2="338.521"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="467" x="310" y="334.4189">new ComponentName(packageName, mParser.readNameFromComponent(data))</text><polygon fill="#A80036" points="314,366.2754,304,370.2754,314,374.2754,310,370.2754" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="308" x2="793" y1="370.2754" y2="370.2754"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="98" x="320" y="366.1733">componentName</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="303" x2="345" y1="402.7842" y2="402.7842"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="345" y1="402.7842" y2="415.7842"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="304" x2="345" y1="415.7842" y2="415.7842"></line><polygon fill="#A80036" points="314,411.7842,304,415.7842,314,419.7842,310,415.7842" style="stroke: #A80036; stroke-width: 1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="271" x="310" y="397.9277">mActivityObjCache.put(componentName, data)</text><polygon fill="#A80036" points="621,442.7842,631,446.7842,621,450.7842,625,446.7842" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="303" x2="627" y1="446.7842" y2="446.7842"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="160" x="310" y="442.6821">generateActivityInfo(data, 0)</text><polygon fill="#A80036" points="314,474.5386,304,478.5386,314,482.5386,310,478.5386" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="308" x2="637" y1="478.5386" y2="478.5386"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="29" x="320" y="474.4365">value</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="303" x2="345" y1="511.0474" y2="511.0474"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="345" y1="511.0474" y2="524.0474"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="304" x2="345" y1="524.0474" y2="524.0474"></line><polygon fill="#A80036" points="314,520.0474,304,524.0474,314,528.0474,310,524.0474" style="stroke: #A80036; stroke-width: 1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="200" x="310" y="506.1909">fixApplicationInfo(value.application)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="303" x2="345" y1="555.8018" y2="555.8018"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="345" y1="555.8018" y2="568.8018"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="304" x2="345" y1="568.8018" y2="568.8018"></line><polygon fill="#A80036" points="314,564.8018,304,568.8018,314,572.8018,310,568.8018" style="stroke: #A80036; stroke-width: 1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="275" x="310" y="550.9453">mActivityInfoCache.put(componentName, value)</text><polygon fill="#A80036" points="621,595.8018,631,599.8018,621,603.8018,625,599.8018" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0;" x1="303" x2="627" y1="599.8018" y2="599.8018"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="215" x="310" y="595.6997">readIntentFilterFromComponent(data)</text><polygon fill="#A80036" points="314,627.5562,304,631.5562,314,635.5562,310,631.5562" style="stroke: #A80036; stroke-width: 1.0;"></polygon><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="308" x2="637" y1="631.5562" y2="631.5562"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="31" x="320" y="627.4541">filters</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="303" x2="345" y1="664.0649" y2="664.0649"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="345" y1="664.0649" y2="677.0649"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="304" x2="345" y1="677.0649" y2="677.0649"></line><polygon fill="#A80036" points="314,673.0649,304,677.0649,314,681.0649,310,677.0649" style="stroke: #A80036; stroke-width: 1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="302" x="310" y="659.2085">mActivityIntentFilterCache.remove(componentName)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="303" x2="345" y1="708.8193" y2="708.8193"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="345" y1="708.8193" y2="721.8193"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="304" x2="345" y1="721.8193" y2="721.8193"></line><polygon fill="#A80036" points="314,717.8193,304,721.8193,314,725.8193,310,721.8193" style="stroke: #A80036; stroke-width: 1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="316" x="310" y="703.9629">mactivityintentFilterCache.put(componentName, filters)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="303" x2="345" y1="765.5737" y2="765.5737"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="345" y1="765.5737" y2="778.5737"></line><line style="stroke: #A80036; stroke-width: 1.0;" x1="298" x2="345" y1="778.5737" y2="778.5737"></line><polygon fill="#A80036" points="308,774.5737,298,778.5737,308,782.5737,304,778.5737" style="stroke: #A80036; stroke-width: 1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacingAndGlyphs" textlength="131" x="310" y="760.7173">decode info from datas</text><rect fill="#EEEEEE" filter="url(#f7rh9ov)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="874.5" x="3" y="803.4509"></rect><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="877.5" y1="803.4509" y2="803.4509"></line><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="877.5" y1="806.4509" y2="806.4509"></line><rect fill="#EEEEEE" filter="url(#f7rh9ov)" height="25.7544" style="stroke: #000000; stroke-width: 2.0;" width="150" x="365.25" y="791.5737"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="132" x="371.25" y="810.4717">获取Service相关信息</text><rect fill="#EEEEEE" filter="url(#f7rh9ov)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="874.5" x="3" y="874.2053"></rect><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="877.5" y1="874.2053" y2="874.2053"></line><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="877.5" y1="877.2053" y2="877.2053"></line><rect fill="#EEEEEE" filter="url(#f7rh9ov)" height="25.7544" style="stroke: #000000; stroke-width: 2.0;" width="156" x="362.25" y="862.3281"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="138" x="368.25" y="881.2261">获取Provider相关信息</text><rect fill="#EEEEEE" filter="url(#f7rh9ov)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="874.5" x="3" y="944.9597"></rect><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="877.5" y1="944.9597" y2="944.9597"></line><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="877.5" y1="947.9597" y2="947.9597"></line><rect fill="#EEEEEE" filter="url(#f7rh9ov)" height="25.7544" style="stroke: #000000; stroke-width: 2.0;" width="164" x="358.25" y="933.0825"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="146" x="364.25" y="951.9805">获取Receivers相关信息</text><rect fill="#EEEEEE" filter="url(#f7rh9ov)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="874.5" x="3" y="1015.7141"></rect><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="877.5" y1="1015.7141" y2="1015.7141"></line><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="877.5" y1="1018.7141" y2="1018.7141"></line><rect fill="#EEEEEE" filter="url(#f7rh9ov)" height="25.7544" style="stroke: #000000; stroke-width: 2.0;" width="201" x="339.75" y="1003.8369"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="183" x="345.75" y="1022.7349">获取Insturmentation相关信息</text><rect fill="#EEEEEE" filter="url(#f7rh9ov)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="874.5" x="3" y="1086.4685"></rect><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="877.5" y1="1086.4685" y2="1086.4685"></line><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="877.5" y1="1089.4685" y2="1089.4685"></line><rect fill="#EEEEEE" filter="url(#f7rh9ov)" height="25.7544" style="stroke: #000000; stroke-width: 2.0;" width="172" x="354.25" y="1074.5913"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthadjust="spacingAndGlyphs" textlength="154" x="360.25" y="1093.4893">获取Permission相关信息</text></g></svg></div>
<p class="sync-line" data-line="490"><code>PluginPackageParser</code>类主要依赖<code>PackageParser</code>类来获取插件的各种相关信息。这些信息的获取操作如上图所示，在<code>PluginPackageParser</code>的构造函数中创建完<code>PackageParser</code>对象之后就开始执行插件信息获取的操作，其实整个插件的安装工作大部分都是从插件插件中解析出这些信息内容，所以在整个构造函数执行完毕的时候，插件的安装过程已经完成了一大半。因为获取各种信息的操作基本差不多所以在流程图中就采用了比较简略的写法来表述，具体的信息的可以查看相关的代码。在这个流程中还有一个<code>fixApplicationInfo</code>函数需要详细看一下:</p>
<pre class="editor-colors lang-java sync-line" data-line="492"><div class="line"><span class="source java"><span class="storage modifier java"><span>private</span></span><span>&nbsp;</span><span class="storage type java"><span>ApplicationInfo</span></span><span>&nbsp;</span><span class="meta function-call java"><span class="entity name function java"><span>fixApplicationInfo</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="storage type java"><span>ApplicationInfo</span></span><span>&nbsp;applicationInfo</span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>if</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="variable other object java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>sourceDir</span></span><span>&nbsp;</span><span class="keyword operator comparison java"><span>==</span></span><span>&nbsp;</span><span class="constant language java"><span>null</span></span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>sourceDir</span></span><span>&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="variable other object java"><span>mPluginFile</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>getPath</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>if</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="variable other object java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>publicSourceDir</span></span><span>&nbsp;</span><span class="keyword operator comparison java"><span>==</span></span><span>&nbsp;</span><span class="constant language java"><span>null</span></span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>publicSourceDir</span></span><span>&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="variable other object java"><span>mPluginFile</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>getPath</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;</span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>if</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="variable other object java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>dataDir</span></span><span>&nbsp;</span><span class="keyword operator comparison java"><span>==</span></span><span>&nbsp;</span><span class="constant language java"><span>null</span></span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>dataDir</span></span><span>&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="variable other object java"><span>PluginDirHelper</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>getPluginDataDir</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="meta function-call java"><span class="entity name function java"><span>getPluginBaseDirName</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation separator delimiter java"><span>,</span></span><span>&nbsp;mPackageName</span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;</span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control catch-exception java"><span>try</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>if</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="variable other object java"><span>Build</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>VERSION</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>SDK_INT</span></span><span>&nbsp;</span><span class="keyword operator comparison java"><span>&gt;=</span></span><span>&nbsp;</span><span class="variable other object java"><span>Build</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>VERSION_CODES</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>LOLLIPOP</span></span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>if</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="variable other object java"><span>FieldUtils</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>readField</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span>applicationInfo</span><span class="punctuation separator delimiter java"><span>,</span></span><span>&nbsp;</span><span class="string quoted double java"><span class="punctuation definition string begin java"><span>&quot;</span></span><span>scanSourceDir</span><span class="punctuation definition string end java"><span>&quot;</span></span></span><span class="punctuation separator delimiter java"><span>,</span></span><span>&nbsp;</span><span class="constant language java"><span>true</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span>&nbsp;</span><span class="keyword operator comparison java"><span>==</span></span><span>&nbsp;</span><span class="constant language java"><span>null</span></span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object java"><span>FieldUtils</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>writeField</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span>applicationInfo</span><span class="punctuation separator delimiter java"><span>,</span></span><span>&nbsp;</span><span class="string quoted double java"><span class="punctuation definition string begin java"><span>&quot;</span></span><span>scanSourceDir</span><span class="punctuation definition string end java"><span>&quot;</span></span></span><span class="punctuation separator delimiter java"><span>,</span></span><span>&nbsp;</span><span class="variable other object java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>dataDir</span></span><span class="punctuation separator delimiter java"><span>,</span></span><span>&nbsp;</span><span class="constant language java"><span>true</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span><span>&nbsp;</span><span class="keyword control catch-exception java"><span>catch</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="storage type java"><span>Throwable</span></span><span>&nbsp;e</span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span class="punctuation whitespace comment leading java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash java"><span class="punctuation definition comment java"><span>//</span></span><span>Do&nbsp;nothing</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;</span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control catch-exception java"><span>try</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>if</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="variable other object java"><span>Build</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>VERSION</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>SDK_INT</span></span><span>&nbsp;</span><span class="keyword operator comparison java"><span>&gt;=</span></span><span>&nbsp;</span><span class="variable other object java"><span>Build</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>VERSION_CODES</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>LOLLIPOP</span></span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>if</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="variable other object java"><span>FieldUtils</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>readField</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span>applicationInfo</span><span class="punctuation separator delimiter java"><span>,</span></span><span>&nbsp;</span><span class="string quoted double java"><span class="punctuation definition string begin java"><span>&quot;</span></span><span>scanPublicSourceDir</span><span class="punctuation definition string end java"><span>&quot;</span></span></span><span class="punctuation separator delimiter java"><span>,</span></span><span>&nbsp;</span><span class="constant language java"><span>true</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span>&nbsp;</span><span class="keyword operator comparison java"><span>==</span></span><span>&nbsp;</span><span class="constant language java"><span>null</span></span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object java"><span>FieldUtils</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>writeField</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span>applicationInfo</span><span class="punctuation separator delimiter java"><span>,</span></span><span>&nbsp;</span><span class="string quoted double java"><span class="punctuation definition string begin java"><span>&quot;</span></span><span>scanPublicSourceDir</span><span class="punctuation definition string end java"><span>&quot;</span></span></span><span class="punctuation separator delimiter java"><span>,</span></span><span>&nbsp;</span><span class="variable other object java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>dataDir</span></span><span class="punctuation separator delimiter java"><span>,</span></span><span>&nbsp;</span><span class="constant language java"><span>true</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span><span>&nbsp;</span><span class="keyword control catch-exception java"><span>catch</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="storage type java"><span>Throwable</span></span><span>&nbsp;e</span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span class="punctuation whitespace comment leading java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash java"><span class="punctuation definition comment java"><span>//</span></span><span>Do&nbsp;nothing</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;</span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>uid</span></span><span>&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="variable other object java"><span>mHostPackageInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>uid</span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;</span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>if</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="variable other object java"><span>Build</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>VERSION</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>SDK_INT</span></span><span>&nbsp;</span><span class="keyword operator comparison java"><span>&gt;=</span></span><span>&nbsp;</span><span class="variable other object java"><span>Build</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>VERSION_CODES</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>GINGERBREAD</span></span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>if</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="variable other object java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>nativeLibraryDir</span></span><span>&nbsp;</span><span class="keyword operator comparison java"><span>==</span></span><span>&nbsp;</span><span class="constant language java"><span>null</span></span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>nativeLibraryDir</span></span><span>&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="variable other object java"><span>PluginDirHelper</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>getPluginNativeLibraryDir</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="meta function-call java"><span class="entity name function java"><span>getPluginBaseDirName</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;</span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>if</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="variable other object java"><span>Build</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>VERSION</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>SDK_INT</span></span><span>&nbsp;</span><span class="keyword operator comparison java"><span>&gt;=</span></span><span>&nbsp;</span><span class="variable other object java"><span>Build</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>VERSION_CODES</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>LOLLIPOP</span></span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>if</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="variable other object java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>splitSourceDirs</span></span><span>&nbsp;</span><span class="keyword operator comparison java"><span>==</span></span><span>&nbsp;</span><span class="constant language java"><span>null</span></span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>splitSourceDirs</span></span><span>&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="keyword control new java"><span>new</span></span><span>&nbsp;</span><span class="storage type java"><span>String</span></span><span class="punctuation bracket square java"><span>[</span><span>]</span></span><span class="punctuation section block begin bracket curly java"><span>{</span></span><span class="variable other object java"><span>mPluginFile</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>getPath</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation section block end bracket curly java"><span>}</span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;</span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>if</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="variable other object java"><span>Build</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>VERSION</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>SDK_INT</span></span><span>&nbsp;</span><span class="keyword operator comparison java"><span>&gt;=</span></span><span>&nbsp;</span><span class="variable other object java"><span>Build</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other object property java"><span>VERSION_CODES</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>LOLLIPOP</span></span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>if</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="variable other object java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>splitPublicSourceDirs</span></span><span>&nbsp;</span><span class="keyword operator comparison java"><span>==</span></span><span>&nbsp;</span><span class="constant language java"><span>null</span></span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>splitPublicSourceDirs</span></span><span>&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="keyword control new java"><span>new</span></span><span>&nbsp;</span><span class="storage type java"><span>String</span></span><span class="punctuation bracket square java"><span>[</span><span>]</span></span><span class="punctuation section block begin bracket curly java"><span>{</span></span><span class="variable other object java"><span>mPluginFile</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>getPath</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation section block end bracket curly java"><span>}</span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;</span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>if</span></span><span>&nbsp;</span><span class="punctuation bracket round java"><span>(</span></span><span class="variable other object java"><span>TextUtils</span></span><span class="meta method-call java"><span class="punctuation separator period java"><span>.</span></span><span class="entity name function java"><span>isEmpty</span></span><span class="punctuation definition parameters begin bracket round java"><span>(</span></span><span class="variable other object java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>processName</span></span><span class="punctuation definition parameters end bracket round java"><span>)</span></span></span><span class="punctuation bracket round java"><span>)</span></span><span>&nbsp;</span><span class="punctuation section block begin bracket curly java"><span>{</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>processName</span></span><span>&nbsp;</span><span class="keyword operator assignment java"><span>=</span></span><span>&nbsp;</span><span class="variable other object java"><span>applicationInfo</span></span><span class="punctuation separator period java"><span>.</span></span><span class="variable other property java"><span>packageName</span></span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div><div class="line"><span class="source java"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control java"><span>return</span></span><span>&nbsp;applicationInfo</span><span class="punctuation terminator java"><span>;</span></span></span></div><div class="line"><span class="source java"><span class="punctuation section block end bracket curly java"><span>}</span></span></span></div></pre>
<p class="sync-line" data-line="552">在构造函数获取插件信息的过程中，会调用该函数对所有组件相对应的<code>Application</code>进行设置，在这个设置的过程中，会将<code>Application</code>中各种路径参数对应到我们自己插件系统中具体路径。</p>
<h3 class="sync-line" data-line="554" id="&#x63D2;&#x4EF6;&#x5B9E;&#x4F53;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;">插件实体对应关系</h3>
<h3 class="sync-line" data-line="556" id="&#x63D2;&#x4EF6;&#x8FD0;&#x884C;&#x539F;&#x7406;&#x7B80;&#x4ECB;">插件运行原理简介</h3>
<h3 class="sync-line" data-line="558" id="&#x63D2;&#x4EF6;&#x72B6;&#x6001;">插件状态</h3>
<h3 class="sync-line" data-line="560" id="&#x63D2;&#x4EF6;&#x4FDD;&#x5B58;&#x65B9;&#x5F0F;">插件保存方式</h3>
 </body>  </html>